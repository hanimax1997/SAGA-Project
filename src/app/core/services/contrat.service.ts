import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';
import { catchError, Observable, of, tap, throwError, map } from 'rxjs';
import { Constants } from '../config/constants';
import * as pdfMake from 'pdfmake/build/pdfmake';
import * as moment from 'moment';
import getBase64ImageFromURL from '../utils/imageHandling';

@Injectable({
    providedIn: 'root'
})
export class ContratService {
    valas: any;
    valtot: any;
    souscripteur01: any;
    sousExit: boolean=false;
    constructor(private http: HttpClient) { }


    getByLien(idDictionnaire: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
    
        return this.http
          .get<any>(
            `${Constants.API_ENDPOINT_TEST_GET_BY_LIEN}/${idDictionnaire}`, httpOption).pipe(
            tap((response) => response),
            catchError((error) => throwError(error.error))
          );
      
    
       
    
    
    
    }

    getAllContrat() {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    getRisquesByContrat(idContact: any, codeProduit: any) {
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/${idContact}/produit/${codeProduit}/risques`).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    getContratByProduit(codeProduit: any,size:any,index:any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT_BY_PRODUIT}/${codeProduit}?pageNumber=${index}&pageSize=${size}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    getQuittanceById(idQuittance: any) {
        // console.log('jesuis le idQuittance',idQuittance)
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_QUITTANCE}/${idQuittance}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }

    getContratById(idContrat: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/${idContrat}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }

    getFichierExcel(idContrat: any, codeProduit: any): Observable<Blob> {
        const httpOptions = {
          headers: new HttpHeaders({
            'Content-Type': 'application/json',
            'Access-Control-Allow-Origin': '*',
          }),
          responseType: 'blob' as 'json' 
        };
    
        return this.http.get<Blob>(`${Constants.API_ENDPOINT_Extraire_Excel}/${idContrat}/codeProduit/${codeProduit}`, httpOptions).pipe(
          tap((response) => {
            console.log('RÃ©ponse du fichier Excel', response);
          })
        );
      }

    addGroupe(description: any) {
        let body = {
            "description": description
        }
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.post<any[]>(`${Constants.API_ENDPOINT_CONTRAT_ADD_GROUPE}`, body, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    getContratHistoriqueById(idHisContrat: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/historique/${idHisContrat}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    getParamHistoByIdRisque(idHistorique: any, idGroupe: any, idRisque: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT_HISTORIQUE}/${idHistorique}/groupe/${idGroupe}/risque/${idRisque}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }

    getHistoriqueStatus(requestBody: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.post<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/historique/status`, requestBody, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }

    Migration(id_contrat: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.post<any>(`${Constants.API_ENDPOINT_CONTRAT}/migration/${id_contrat}`, {}, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }


    filtresContrat(filterObject: any,index:number,size:number) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.post<any[]>(`${Constants.API_ENDPOINT_CONTRAT_FILTRE}?pageNumber=${index}&pageSize=${size}`, filterObject, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    createSiteComercial(body:any){
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.post<any[]>(`${Constants.API_ENDPOINT_CONTRAT_COMEMRCIAL_LINE_SITE}`, body, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }

    createContrat(contrat: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.post<any[]>(`${Constants.API_ENDPOINT_CONTRAT}`, contrat, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    //check if policy exist
    getPolicyExist(numPolice: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/${numPolice}/exist`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    //check if policy exist
    getMatricule(requestBody: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.post<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/historique/matricule`, requestBody, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }

    outputQuittance(contrat: any, quittance: any, avenant: any) {
        // console.log('contrat quittance avenant ', contrat , quittance , avenant)
        let assure: any = {};
        let conducteur: any = {};
        let souscripteur: any = {};
       //console.log("je suis le contrat au niveau de quittace ",contrat)
        contrat?.personnesList?.forEach((element: any) => {
            switch (element?.role?.idParam) {
                case 233:
                    conducteur = element?.personne
                    break;
                case 234:
                    souscripteur = element?.personne
                    break;
                case 235:
                    assure = element?.personne
                    break;
                case 236:
                    souscripteur = element?.personne
                    assure = element?.personne
                    break;
                case 237:
                    souscripteur = element?.personne
                    conducteur = element?.personne
                    break;
                case 280:
                    assure = element?.personne
                    conducteur = element?.personne
                    break;
                case 238:
                    souscripteur = element?.personne
                    assure = element?.personne
                    conducteur = element?.personne
                    break;

                default:
                    break;
            }
        });
        let dateDebut =moment( contrat?.dateEffet).format('DD-MM-YYYY');
        let qr = "";
        switch (contrat?.produit.codeProduit) {
            case "45A":
                qr = "https://www.axa.dz/wp-content/uploads/2023/10/Conditions-generales-Assurance-Automobile.pdf"
                break;
            case "96":
                qr = "https://www.axa.dz/wp-content/uploads/2023/10/Conditions-Generales-Habitation.pdf"
                break;
            case "95":
                qr = "https://www.axa.dz/wp-content/uploads/2023/11/Conditions-Generales-Multirisque-professionnelle.pdf"
                break;
            case '20A':
                qr="https://www.axa.dz/wp-content/uploads/2023/10/Conditions-Generales-Assurance-Voyage.pdf"
                break;
        
            default:

                break;
        } 

        const docDefinitionQuittance: any = {
            watermark: { text: '', color: 'blue', opacity: 0.1 },
            pageMargins: [35, 110, 35, 90],
            border: [false, false, false, false],
            header: function (currentPage: any, pageCount: any, pageSize: any) {
                if (currentPage == 1) {
                    return {
                        stack: [
                            {
                                text: quittance?.auditDate?.split("T")[0],
                                style: 'sectionHeader',
                                color: 'black'
                            },
                            {
                                text: `\nQuittance de prime\n\n`,
                                style: 'sectionHeader',
                                color: 'black'
                            }
                            // {
                            //     qr: qr,
                            //     fit: '70',
                            //     alignment: "right",
                            //     style: 'sectionHeader'
                            // }
                        ],
                        margin: [35, 30, 35, 0]
                    }
                }
            },
            content: [
                qr != '' ? {
                    columns: [
                        {},
                        {
                            qr: qr,
                            fit: '70',
                            alignment: "right",
                            style: 'sectionHeader'
                        }
                    ]
                } : {},
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `Agence`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: `Reference`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            },
                        },
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `Nom et code agence : `, bold: true, fontSize: "10" },
                                                { text: contrat?.agence?.codeAgence + " " + contrat?.agence?.raisonSocial, fontSize: "10" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `NÂ° Police: `, bold: true, fontSize: "10" },
                                                { text: contrat?.idContrat, fontSize: "10" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `Adresse agence : `, bold: true, fontSize: "10" },
                                                { text: contrat?.agence?.adresse, fontSize: "10" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `Date effet : `, bold: true, fontSize: "10" },
                                                { text: avenant != null ? dateDebut : contrat?.dateEffet?.split("T")[0], fontSize: "10" },

                                            ],//avenant?.dateAvenant.split("T")[0]
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `TÃ©lÃ©phone agence : `, bold: true, fontSize: "10" },
                                                { text: contrat?.agence?.telephone, fontSize: "10" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `Date expiration contrat : `, bold: true, fontSize: "10" },
                                                { text: contrat?.dateExpiration?.split("T")[0], fontSize: "10" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `E-mail agence : `, bold: true, fontSize: "10" },
                                                { text: contrat?.agence?.email, fontSize: "10" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `NÂ° Quittance : `, bold: true, fontSize: "10" },
                                                { text: contrat?.idQuittance == undefined ? contrat?.quittanceList[contrat?.quittanceList.length - 1] : contrat?.idQuittance, fontSize: "10" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },

                contrat?.produit?.codeProduit == "45A" || contrat?.produit?.codeProduit == "45F" || contrat?.produit?.codeProduit == "45L" ?
                    {
                        columns: [
                            {
                                style: "table",
                                table: {
                                    widths: ["*", "*", "*", "*", "*", "*"],
                                    body: [
                                        [
                                            {
                                                text: `Prime nette`,
                                                style: "headerTable"
                                            },
                                            contrat?.idHistorique == undefined || avenant?.typeAvenant?.code == 'A12' || avenant?.typeAvenant?.code == 'A13' || avenant?.typeAvenant?.code == 'A18' ?
                                                {
                                                    text: `CoÃ»t de police`,
                                                    style: "headerTable"
                                                }
                                                : {
                                                    text: `Frais de gestion`,
                                                    style: "headerTable"
                                                },
                                            {
                                                text: `T.V.A`,
                                                style: "headerTable"
                                            },

                                            {
                                                text: `F.G.A`,
                                                style: "headerTable"
                                            },
                                            {
                                                text: `Timbre de dimension`,
                                                style: "headerTable"
                                            },
                                            {
                                                text: `Timbre graduÃ©`,
                                                style: "headerTable"
                                            },
                                        ],
                                        [
                                            {
                                                text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },

                                            /*  {
                                                  text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01' || taxe?.taxe?.code == 'T08')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                  fontSize: 10
                                              },
                                              */
                                            contrat?.idHistorique == undefined || avenant?.typeAvenant?.code == 'A12' || avenant?.typeAvenant?.code == 'A13' || avenant?.typeAvenant?.code == 'A18' ?
                                                {
                                                    text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                }
                                                : {
                                                    text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T08')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                },
                                            {
                                                text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T04')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            {
                                                text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T07')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            {
                                                text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T03')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            {
                                                text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T02')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                        ],
                                        [
                                            { text: '', colSpan: 4 },
                                            {},
                                            {},
                                            {},
                                            {
                                                text: `Prime Totale`,
                                                style: "headerTable",
                                            },
                                            {
                                                text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                        ],
                                    ],
                                }
                            }
                        ],
                    } : contrat?.produit?.codeProduit==="20A" || contrat.produit.codeProduit=="20G" ?{
                        columns: [

                            {
                                style: "table",
                                table: {

                                    widths: ["*", "*", "*", "*"],
                                    body: [
                                        [
                                            {
                                                text: `Prime nette`,
                                                style: "headerTable"
                                            },
                                            contrat?.idHistorique == undefined || avenant?.typeAvenant?.code == 'A12' || avenant?.typeAvenant?.code == 'A13' || avenant?.typeAvenant?.code == 'A18' ?
                                                {
                                                    text: `CoÃ»t de police`,
                                                    style: "headerTable"
                                                }
                                                : {
                                                    text: `Frais de gestion`,
                                                    style: "headerTable"
                                                },
                                           

                                            {
                                                text: `Timbre de dimension`,
                                                style: "headerTable"
                                            },
                                            {
                                                text: `Prime Totale`,
                                                style: "headerTable",
                                            },

                                        ],
                                        [
                                            {
                                                text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10,
                                                alignment: "center"
                                            },
                                            /* {
                                                 text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01' || taxe?.taxe?.code == 'T08')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                 fontSize: 10,
                                                 alignment: "center"
                                             },
                                             */
                                            contrat?.idHistorique == undefined || avenant?.typeAvenant?.code == 'A12' || avenant?.typeAvenant?.code == 'A13' || avenant?.typeAvenant?.code == 'A18' ?
                                                {
                                                    text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                }
                                                : {
                                                    text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T08')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                },
                                           

                                            {
                                                text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T03')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10,
                                                alignment: "center"
                                            },
                                            {
                                                text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10,
                                                alignment: "center"
                                            },



                                        ],

                                    ],
                                }
                            },

                        ],
                    }:{



                        columns: [

                            {
                                style: "table",
                                table: {

                                    widths: ["*", "*", "*", "*", "*"],
                                    body: [
                                        [
                                            {
                                                text: `Prime nette`,
                                                style: "headerTable"
                                            },
                                            contrat?.idHistorique == undefined || avenant?.typeAvenant?.code == 'A12' || avenant?.typeAvenant?.code == 'A13' || avenant?.typeAvenant?.code == 'A18' ?
                                                {
                                                    text: `CoÃ»t de police`,
                                                    style: "headerTable"
                                                }
                                                : {
                                                    text: `Frais de gestion`,
                                                    style: "headerTable"
                                                },
                                            {
                                                text: `T.V.A`,
                                                style: "headerTable"
                                            },

                                            {
                                                text: `Timbre de dimension`,
                                                style: "headerTable"
                                            },
                                            {
                                                text: `Prime Totale`,
                                                style: "headerTable",
                                            },

                                        ],
                                        [
                                            {
                                                text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10,
                                                alignment: "center"
                                            },
                                            /* {
                                                 text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01' || taxe?.taxe?.code == 'T08')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                 fontSize: 10,
                                                 alignment: "center"
                                             },
                                             */
                                            contrat?.idHistorique == undefined || avenant?.typeAvenant?.code == 'A12' || avenant?.typeAvenant?.code == 'A13' || avenant?.typeAvenant?.code == 'A18' ?
                                                {
                                                    text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10,
                                                    alignment: "center"
                                                }
                                                : {
                                                    text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T08')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10,
                                                    alignment: "center"
                                                },

                                                contrat.produit.codeProduit=="97"?
                                                { text: "  0.00 DZD" ,
                                                fontSize: 10,
                                                    
                                                       alignment: "center"}:
                               
                                            {
                                                text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T04')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10,
                                                alignment: "center"
                                            },

                                            {
                                                text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T03')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10,
                                                alignment: "center"
                                            },
                                            {
                                                text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10,
                                                alignment: "center"
                                            },



                                        ],

                                    ],
                                }
                            },

                        ],
                    },
                /*   contrat?.produit?.codeProduit == "45F"?
                   {
 
 
                   
                     columns: [
                        
                         {
                             style: "table",
                             table: {
                                 
                                 widths:  ["*","*","*","*","*"] ,
                                 body: [
                                     [
                                         {
                                             text: `Prime nette`,
                                             style: "headerTable"
                                         },
                                         {
                                             text: `Frais de gestion`,
                                             style: "headerTable"
                                         },
                                         {
                                             text: `T.V.A`,
                                             style: "headerTable"
                                         },
                                         
                                         {
                                             text: `Timbre de dimension`,
                                             style: "headerTable"
                                         },
                                         {
                                             text: `Prime Totale`,
                                             style: "headerTable",
                                         },
                                        
                                     ],
                                     [
                                         {
                                             text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                             fontSize: 10,
                                             alignment: "center"
                                         },
                                         {
                                             text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01' || taxe?.taxe?.code == 'T08')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                             fontSize: 10,
                                             alignment: "center"
                                         },
                                         {
                                             text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T04')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                             fontSize: 10,
                                             alignment: "center"
                                         },
                                      
                                         {
                                             text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T03')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                             fontSize: 10,
                                             alignment: "center"
                                         },
                                         {
                                             text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                             fontSize: 10,
                                             alignment: "center"
                                         },
 
                                        
                                         
                                     ],
                                   
                                 ],
                             }
                         },
                         
                     ],
                   }:{},
                   */
                {
                    margin: [0, 50, 0, 0],
                    table: {
                        widths: ['*'],
                        body: [[" "], [" "]]
                    },
                    layout: {
                        hLineWidth: function (i: any, node: any) {
                            return (i === 0 || i === node.table.body.length) ? 0 : 2;
                        },
                        vLineWidth: function (i: any, node: any) {
                            return 0;
                        },
                        hLineStyle: function (i: any, node: any) {
                            if (i === 0 || i === node.table.body.length) {
                                return null;
                            }
                            return { dash: { length: 4, space: 2 } };
                        },
                        vLineStyle: function (i: any, node: any) {
                            return 0;
                        },
                    }
                },
                {
                    style: "table",
                    table: {
                        widths: ["*"],
                        alignment: "right",
                        body: [
                            [
                                {
                                    text: `SOUCHE DE QUITTANCE DE PRIME`,
                                    style: "headerTable"
                                },
                            ],
                        ],
                    },
                },
                contrat?.produit?.codeProduit==="20A" || contrat.produit.codeProduit=="20G"?
                {
                    table: {
                        widths: ["*", "*", "*", "*"],
                        alignment: "right",
                        body: [
                            [
                                {
                                    text: [
                                        { text: `AssurÃ©(e) :`, bold: true, fontSize: "10" },
                                        { text: contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial != null ) ? contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial)?.personne?.raisonSocial : assure?.nom + " " + assure?.prenom1, fontSize: "10" },
                                    ],
                                    colSpan: 4,
                                    alignment: "left"
                                },
                                {},
                                {},
                                {},
                            ],
                            [
                                {
                                    text: [
                                        { text: `NÂº Quittance :`, bold: true, fontSize: "10" },
                                        { text:  quittance.idQuittance, fontSize: "10" },
                                    ],
                                    colSpan: 2,
                                    alignment: "left"
                                },
                                {
                                    text: [
                                        { text: `NÂº de Police :`, bold: true, fontSize: "10" },
                                        { text: contrat?.idContrat, fontSize: "10" },
                                    ],
                                    alignment: "left"
                                },
                                {},
                                {
                                    text: [
                                        { text: `Produit :`, bold: true, fontSize: "10" },
                                        { text: contrat?.produit?.description, fontSize: "10" },
                                    ],
                                    alignment: "left"
                                },
                            ],
                            [
                                {
                                    text: `EchÃ©ance`,
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: `Commissions`,
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: `Prime Nette`,
                                    bold: true,
                                    alignment: "center",
                                },
                                {
                                    text: `Prime Totale`,
                                    bold: true,
                                    alignment: "center"
                                },
                            ],
                            [
                                {
                                    text: [
                                        { text: `Du :`, bold: true, fontSize: "10" },
                                        { text: avenant != null ? avenant.dateAvenant?.split("T")[0] : contrat?.dateEffet?.split("T")[0], fontSize: "10" },
                                        { text: `\nAu :`, bold: true, fontSize: "10" },
                                        { text: contrat?.dateExpiration?.split("T")[0], fontSize: "10" }
                                    ],
                                    alignment: "left"
                                },
                                {
                                    text: `0,00`,
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                    bold: true,
                                    alignment: "center"
                                },
                            ],
                        ],
                    },
                }
                :
                {
                    table: {
                        widths: ["*", "*", "*", "*", "*"],
                        alignment: "right",
                        body: [
                            [
                                {
                                    text: [
                                        { text: `AssurÃ©(e) :`, bold: true, fontSize: "10" },
                                        { text: contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial != null ) ? contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial)?.personne?.raisonSocial : assure?.nom + " " + assure?.prenom1, fontSize: "10" },
                                    ],
                                    colSpan: 5,
                                    alignment: "left"
                                },
                                {},
                                {},
                                {},
                                {},
                            ],
                            [
                                {
                                    text: [
                                        { text: `NÂº Quittance :`, bold: true, fontSize: "10" },
                                        { text:  quittance?.idQuittance, fontSize: "10" },
                                    ],
                                    colSpan: 2,
                                    alignment: "left"
                                },
                                {},
                                {
                                    text: [
                                        { text: `NÂº de Police :`, bold: true, fontSize: "10" },
                                        { text: contrat?.idContrat, fontSize: "10" },
                                    ],
                                    colSpan: 2,
                                    alignment: "left"
                                },
                                {},
                                {
                                    text: [
                                        { text: `Produit :`, bold: true, fontSize: "10" },
                                        { text: contrat?.produit?.description, fontSize: "10" },
                                    ],
                                    alignment: "left"
                                },
                            ],
                            [
                                {
                                    text: `EchÃ©ance`,
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: `Commissions`,
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: `T.V.A`,
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: `Prime Nette`,
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: `Prime Totale`,
                                    bold: true,
                                    alignment: "center"
                                },
                            ],
                            [
                                {
                                    text: [
                                        { text: `Du :`, bold: true, fontSize: "10" },
                                        { text: avenant != null ? avenant.dateAvenant?.split("T")[0] : contrat?.dateEffet?.split("T")[0], fontSize: "10" },
                                        { text: `\nAu :`, bold: true, fontSize: "10" },
                                        { text: contrat?.dateExpiration?.split("T")[0], fontSize: "10" }
                                    ],
                                    alignment: "left"
                                },
                                {
                                    text: `0,00`,
                                    bold: true,
                                    alignment: "center"
                                },
                                contrat.produit.codeProduit=="97"?
                                                { text: "  0.00 DZD",
                                    bold: true,
                                    alignment: "center"}:
                                {
                                    text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T04')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                    bold: true,
                                    alignment: "center"
                                },
                                {
                                    text: Number(quittance?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.primeProrata).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                    bold: true,
                                    alignment: "center"
                                },
                            ],
                        ],
                    },
                },

                {
                    layout: 'noBorders',
                    style: 'table',
                    table: {
                        widths: ["*", "*"],
                        alignment: "center",
                        body: [
                            [
                                {
                                    text: [
                                        { text: `DATE RETOUR :\n\n`, bold: true, fontSize: "10" },
                                        { text: `NÂº BORDEREAU : \n`, bold: true, fontSize: "10" },
                                    ],
                                    alignment: 'left'
                                },
                                {
                                    text: [
                                        { text: `DATE ENCAISSEMENT :\n\n`, bold: true, fontSize: "10" },
                                        { text: `MOTIF DE RETOUR : \n`, bold: true, fontSize: "10" },
                                    ],
                                    alignment: 'left'
                                }
                            ]
                        ],
                    },
                }
            ],
            styles: {
                sectionHeader: {
                    bold: true,
                    color: "#d14723",
                    fontSize: 10,
                    alignment: "right"
                },
                BG: {
                    fontSize: 8
                },
                table: {
                    margin: [0, 10, 0, 0]
                },
                headerTable: {
                    alignment: "center",
                    bold: true,
                    fontSize: 10,
                    color: "#00008F",
                   
                }
            }
        }

        pdfMake.createPdf(docDefinitionQuittance).download(contrat?.idQuittance == undefined ? "Quittance_" + contrat?.quittanceList[contrat?.quittanceList.length - 1] : "Quittance_" + contrat?.idQuittance);
    }

    outputAttestation(contrat: any, quittance: any, avenant: any) {
       
        let assure: any = {};
        let conducteur: any = {};
        let souscripteur: any = {};
        let adresseAgence = contrat?.agence?.commune || contrat?.agence?.commune != null ? contrat?.agence?.commune  + ` - `: '' + contrat?.agence?.wilaya
        

        contrat?.personnesList?.forEach((element: any) => {
            switch (element?.role?.idParam) {
                case 233:
                    conducteur = element?.personne
                    break;
                case 234:
                    souscripteur = element?.personne
                    break;
                case 235:
                    assure = element?.personne
                    break;
                case 236:
                    souscripteur = element?.personne
                    assure = element?.personne
                    break;
                case 237:
                    souscripteur = element?.personne
                    conducteur = element?.personne
                    break;
                case 280:
                    assure = element?.personne
                    conducteur = element?.personne
                    break;
                case 238:
                    souscripteur = element?.personne
                    assure = element?.personne
                    conducteur = element?.personne
                    break;

                default:
                    break;
            }
        });


        const docDefinitionAttestation: any = {
            pageMargins: [10, 5, 10, 50],
            border: [false, false, false, false],
            content: [
                {
                    text: [
                        // { text: `NÂº de Police :`, bold: true, fontSize: "8" },
                        { text: contrat?.idContrat, fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 5, y: 11 }
                },
                {
                    text: [
                        // { text: `NÂº Immatriculation :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList.filter((risque: any) => risque.paramRisque?.categorieParamRisque?.description == "vehicule").find((risque: any) => risque.paramRisque.codeParam == "P38")?.valeur, fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 5, y: 41 }
                },
                {
                    text: [
                        // { text: `ValiditÃ© :`, bold: true, fontSize: "8" },
                        { text: `Ce prÃ©sent contrat est valide ${contrat?.duree?.duree} ${contrat?.duree?.type_duree}`, fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 5, y: 71 }
                },
                {
                    text: [
                        // { text: `AssurÃ© :`, bold: true, fontSize: "8" },
                        { text: contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial != null )? contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial)?.personne?.raisonSocial: assure?.nom + " " + assure?.prenom1, fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 373, y: 70 }
                },
                {
                    text: [
                        // { text: `EchÃ©ance :`, bold: true, fontSize: "8" },
                        { text: contrat?.dateExpiration?.split("T")[0], fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 373, y: 92 }
                },
                {
                    text: [
                        // { text: `NÂ° Quittance :`, bold: true, fontSize: "8" },
                        { text: contrat?.quittanceList.length != 0 ? contrat?.quittanceList[contrat?.quittanceList.length - 1] : '', fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 383, y: 113 }
                },
                {
                    text: [
                        // { text: `Timbre :`, bold: true, fontSize: "8" },
                        { text: Number(quittance?.taxeList?.find((taxe: any) => taxe.taxe.code == "T02")?.primeProrata).toFixed(2), fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 320, y: 160 }
                },
                {
                    text: [
                        // { text: `Timbre Dim :`, bold: true, fontSize: "8" },
                        { text: Number(quittance?.taxeList?.find((taxe: any) => taxe.taxe.code == "T03")?.primeProrata).toFixed(2), fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 370, y: 160 }
                },
                {
                    text: [
                        // { text: `F gestion :`, bold: true, fontSize: "8" },
                        { text: Number(quittance?.taxeList?.find((taxe: any) => taxe.taxe.code == "T01" || taxe?.taxe?.code == 'T08')?.primeProrata).toFixed(2), fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 415, y: 160 }
                },
                {
                    text: [
                        // { text: `F fract :`, bold: true, fontSize: "8" },
                        { text: `0.00`, fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 467, y: 160 }
                },
                {
                    text: [
                        // { text: `TVA :`, bold: true, fontSize: "8" },
                        { text: Number(quittance?.taxeList?.find((taxe: any) => taxe.taxe.code == "T04")?.primeProrata).toFixed(2), fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 522, y: 160 }
                },
                {
                    text: [
                        // { text: `FGA :`, bold: true, fontSize: "8" },
                        { text: Number(quittance?.taxeList?.find((taxe: any) => taxe.taxe.code == "T07")?.primeProrata).toFixed(2), fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 567, y: 160 }
                },
                {
                    text: [
                        // { text: `Prime nette :`, bold: true, fontSize: "8" },
                        { text: Number(quittance?.primeList?.find((prime: any) => prime.typePrime.code == "CP101")?.primeProrata).toFixed(2), fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 325, y: 225 }
                },
                {
                    text: [
                        // { text: `Prime totale :`, bold: true, fontSize: "8" },
                        { text: Number(quittance?.primeList?.find((prime: any) => prime.typePrime.code == "CP186")?.primeProrata).toFixed(2), fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 390, y: 225 }
                },
                {
                    text: [
                        // { text: `wilaya :`, bold: true, fontSize: "8" },
                        { text: contrat?.agence?.wilaya, fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 352, y: 262 }
                },
                {
                    text: [
                        // { text: `date effet :`, bold: true, fontSize: "8" },
                        { text: quittance?.auditDate?.split("T")[0], fontSize: "8" }
                    ], fontSize: "8", absolutePosition: { x: 342, y: 287 }
                },
                 {
                    table: {
                        widths: ["20%"],
                        body: [
                            [
                                // { text: `assurÃ© :`, bold: true, fontSize: "8" },
                                // { text: contrat?.typeClient?.description == "personne morale" ? assure?.raisonSocial + `\n` : assure?.nom + " " + assure?.prenom1 + `\n`, fontSize: "8" },
                                { text: contrat?.agence?.raisonSocial + "\n" +
                                        contrat?.agence?.adresse + "\n" +
                                        adresseAgence
                                , fontSize: "8" },
                            ]
                        ],
                    },
                    absolutePosition: { x: 15, y: 489 },
                    layout: 'noBorders'
                },
                {
                    text: [
                        // { text: `NÂ° attestation :`, bold: true, fontSize: "8" },
                        { text: avenant?.numAttestation, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 147, y: 489 }
                },
                {
                    text: [
                        // { text: `assurÃ© :`, bold: true, fontSize: "8" },
                       // { text: contrat?.typeClient?.description == "personne morale" ? assure?.raisonSocial + `\n` : assure?.nom + " " + assure?.prenom1 + `\n`, fontSize: "8" },
                        { text: contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial != null )? contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial)?.personne?.raisonSocial+ `\n`: assure?.nom + " " + assure?.prenom1 + `\n`, fontSize: "8" },
                        { text: assure?.adressesList[0].description + `\n`, fontSize: "8" },
                        { text: assure?.adressesList[0].commune?.description + ` - ` + assure?.adressesList[0].wilaya?.description, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 15, y: 559 }
                },
                {
                    text: [
                        // { text: `NÂ° police :`, bold: true, fontSize: "8" },
                        { text: contrat?.idContrat, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 78, y: 615 }
                },
                {
                    text: [
                        // { text: `date effet et echÃ©ance :`, bold: true, fontSize: "8" },
                        { text: avenant != null ? avenant.dateAvenant?.split("T")[0]+ ` au ` + contrat?.dateExpiration?.split("T")[0] : contrat?.dateEffet?.split("T")[0] + ` au ` + contrat?.dateExpiration?.split("T")[0], fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 78, y: 625 }
                },
                {
                    text: [
                        // { text: `Immatriculation vehicule :`, bold: true, fontSize: "8" },
                        //avant multiRisque
                        // { text: contrat?.risqueList?.find((risque: any) => risque.paramRisque.codeParam == "P38")?.valeur, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P38")?.reponse?.valeur, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 20, y: 683 }
                },
                {
                    text: [
                        // { text: `Marque vehicule :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P25")?.reponse?.idParamReponse?.description, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 130, y: 683 }
                },
                // {
                //     text: [
                //         // { text: `Genre vehicule :`, bold: true, fontSize: "8" },
                //         { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P50")?.reponse?.idParamReponse?.description, fontSize: "8" },
                //     ], fontSize: "8", absolutePosition: { x: 192, y: 683 }
                // },
                {
                    table: {
                        widths: ["20%"],
                        body: [
                            [
                                // { text: `Genre vehicule :`, bold: true, fontSize: "8" },
                                { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P50")?.reponse?.idParamReponse?.description, fontSize: "8" },
                            ]
                        ],
                    },
                    absolutePosition: { x: 192, y: 683 },
                    layout: 'noBorders'
                },
                contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P31")?.reponse?.idParamReponse?.code != "R184" ?
                {
                    text: [
                        // { text: `Immatriculation vehicule :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P38")?.reponse?.valeur, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 20, y: 748 }
                } : {},
                contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P31")?.reponse?.idParamReponse?.code != "R184" ?
                {
                    text: [
                        // { text: `Marque vehicule :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P25")?.reponse?.idParamReponse?.description, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 130, y: 748 }
                } : {},
                contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P31")?.reponse?.idParamReponse?.code != "R184" ?
                {
                    table: {
                        widths: ["20%"],
                        body: [
                            [
                                // { text: `Genre vehicule :`, bold: true, fontSize: "8" },
                                { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P50")?.reponse?.idParamReponse?.description, fontSize: "8" },
                            ]
                        ],
                    },
                    absolutePosition: { x: 192, y: 748 },
                    layout: 'noBorders'
                }:{},              
                
                {
                    text: [
                        { text: contrat?.agence?.raisonSocial + `\n`, fontSize: "8" },
                        { text: contrat?.agence?.adresse + `\n`, fontSize: "8" },
                        { text: contrat?.agence?.commune || contrat?.agence?.commune != null ? contrat?.agence?.commune  + ` - `: '' + contrat?.agence?.wilaya, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 338, y: 490 }
                },
                {
                    text: [ // non pris en charge en saga (technisys carte verte)
                        // { text: `NÂ° attestation :`, bold: true, fontSize: "8" },
                        { text: ``, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 470, y: 490 }
                },
                {
                    text: [
                        // { text: `assurÃ© :`, bold: true, fontSize: "8" },
                       // { text: contrat?.typeClient?.description == "personne morale" ? assure?.raisonSocial + `\n` : assure?.nom + " " + assure?.prenom1 + `\n`, fontSize: "8" },
                        { text:contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial != null )? contrat?.personnesList?.find((person: any) => person?.personne?.raisonSocial)?.personne?.raisonSocial + `\n`: assure?.nom + " " + assure?.prenom1 + `\n`, fontSize: "8" },
                        { text: assure?.adressesList[0]?.description + `\n`, fontSize: "8" },
                        { text: assure?.adressesList[0]?.commune?.description + ` - ` + assure?.adressesList[0]?.wilaya?.description, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 338, y: 560 }
                },
                {
                    text: [
                        // { text: `NÂ° police :`, bold: true, fontSize: "8" },
                        { text: contrat?.idContrat, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 403, y: 615 }
                },
                {
                    text: [
                        // { text: `date effet et echÃ©ance :`, bold: true, fontSize: "8" },
                        { text: avenant != null ? avenant.dateAvenant?.split("T")[0]+ ` au ` + contrat?.dateExpiration?.split("T")[0] : contrat?.dateEffet?.split("T")[0] + ` au ` + contrat?.dateExpiration?.split("T")[0], fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 403, y: 625 }
                },
                {
                    text: [
                        // { text: `Immatriculation vehicule :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P38")?.reponse?.valeur, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 340, y: 685 }
                },
                {
                    text: [
                        // { text: `Marque vehicule :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P25")?.reponse?.idParamReponse?.description, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 450, y: 685 }
                },
                {
                    text: [
                        // { text: `Genre vehicule :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P50")?.reponse?.idParamReponse?.description, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 515, y: 685 }
                },
                contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P31")?.reponse?.idParamReponse?.code != "R184" ?
                {
                    text: [
                        // { text: `Immatriculation vehicule :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P38")?.reponse?.valeur, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 340, y: 748 }
                }:{},
                contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P31")?.reponse?.idParamReponse?.code != "R184" ?
                {
                    text: [
                        // { text: `Marque vehicule :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P25")?.reponse?.idParamReponse?.description, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 450, y: 748 }
                } : {},
                contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P31")?.reponse?.idParamReponse?.code != "R184" ?
                {
                    text: [
                        // { text: `Genre vehicule :`, bold: true, fontSize: "8" },
                        { text: contrat?.risqueList?.find((risque: any) => risque.codeRisque == "P50")?.reponse?.idParamReponse?.description, fontSize: "8" },
                    ], fontSize: "8", absolutePosition: { x: 515, y: 748 }
                } : {},
            ]
        }

        pdfMake.createPdf(docDefinitionAttestation).download("Attestation_" + contrat?.idContrat);
    }

    getPaysList(){
        const httpOption = {
            headers: new HttpHeaders({
                'Access-Control-Allow-Origin': '*',
            })
        };


        

        return this.http.get<any[]>(`${Constants.API_ENDPOINT_pays}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
  
    outputAttestationFlotte(contrat: any, avenant: any) {

        if(contrat.produit.codeProduit=='45L'&& avenant?.typeAvenant.code=='A27'){
            let risqlist :any []
            risqlist=avenant.risqueList
            // console.log('kkkk',risqlist)
        
            contrat.risqueList=risqlist
            // console.log('je suis contrt 45l',contrat,avenant)
        }

        //////console.log("contrat ==>")
        //////console.log(contrat)
        //////console.log("avenant ==>")
        //////console.log(avenant)
        // console.log('bonjour lattestaion', contrat  , avenant)

        avenant
        let assure: any = {};
        let conducteur: any = {};
        let souscripteur: any = {};
        let risqueListVehicule: any = []
        let risques: any = []
        let adresseAgence = contrat?.agence?.commune || contrat?.agence?.commune != null ? contrat?.agence?.commune  + ` - `: '' + contrat?.agence?.wilaya
        
        
        contrat?.personnesList?.forEach((element: any) => {
            switch (element?.role?.idParam) {
                case 233:
                    conducteur = element?.personne
                    break;
                case 234:
                    souscripteur = element?.personne
                    break;
                case 235:
                    assure = element?.personne
                    break;
                case 236:
                    souscripteur = element?.personne
                    assure = element?.personne
                    break;
                case 237:
                    souscripteur = element?.personne
                    conducteur = element?.personne
                    break;
                case 280:
                    assure = element?.personne
                    conducteur = element?.personne
                    break;
                case 238:
                    souscripteur = element?.personne
                    assure = element?.personne
                    conducteur = element?.personne
                    break;

                default:
                    break;
            }
        });

        

        //Get info riques 
        // avenant?.typeAvenant?.code == "A19" || avenant?.typeAvenant?.code == "A20" || avenant?.typeAvenant?.code == "A03"|| avenant?.typeAvenant?.code == "A06" || avenant?.typeAvenant?.code == "A08"?
        if (avenant?.typeAvenant !== undefined && avenant?.risqueList.length != 0) {


                           
 // if (avenant?.typeAvenant?.code == "A20" ||avenant?.typeAvenant?.code == "A168" || avenant?.typeAvenant?.code == "A08" || avenant?.typeAvenant?.code == "A11" || avenant?.typeAvenant?.code == "A26" || avenant.typeAvenant.code == "A18") {
    if (avenant?.typeAvenant?.code == "A20"||avenant?.typeAvenant?.code == "A27" ||avenant?.typeAvenant?.code == "A168" || avenant?.typeAvenant?.code == "A08" || avenant?.typeAvenant?.code == "A11" || avenant?.typeAvenant?.code == "A26" || avenant.typeAvenant.code == "A18") {

            avenant?.risqueList.map((risque: any) => {
                    risques.push(risque);
                })
               
            }

        } else {
           
                     // if (contrat && contrat.groupeList !== undefined && contrat.groupeList !== null) {
            //     risqueListVehicule = contrat?.groupeList.filter((groupe: any) => groupe?.risques)
            console.log('333333')
            if (contrat && contrat.groupesList !== undefined && contrat.groupesList !== null) {
                risqueListVehicule = contrat.groupesList.filter((groupe: any) => groupe?.risques)

            } else {
                    // risqueListVehicule = contrat?.groupesList.filter((groupe: any) => groupe?.risques)
                    risqueListVehicule = contrat.groupesList.filter((groupe: any) => groupe?.risques)

            }
            risqueListVehicule?.forEach((groupe: any) => {
                if (groupe?.risques) {
                    groupe.risques.map((risque: any) => {
                        risques.push(risque);
                    });
                }
            });
        }
      
        const docDefinitionAttestation: any = {
            pageMargins: [10, 5, 10, 50],
            border: [false, false, false, false],


            content: risques.map((risq: any) => ({
                stack: [
                    {
                        text: [
                            { text: contrat.produit.codeProduit=='45L' ? contrat?.idContrat +' / '+risq?.risque.find((risque: any) => risque.colonne == "Numero de contrat")?.valeur : contrat?.idContrat, fontSize: "8" }
                        ], fontSize: "8", absolutePosition: { x: 5, y: 11 }
                    },
                    {
                        text: [
                            { text: risq?.risque.find((risque: any) => risque.colonne == "NÂ° d'Immatriculation")?.valeur, bold: true, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 5, y: 41 }
                    },
                    {
                        text: [
                            { text: `Ce prÃ©sent contrat est valide ${contrat?.duree?.duree} ${contrat?.duree?.type_duree}`, fontSize: "8" }
                        ], fontSize: "8", absolutePosition: { x: 5, y: 71 }
                    },
                    {
                        table: {
                            widths: ["20%"],
                            body: [
                                [
                                    // { text: `assurÃ© :`, bold: true, fontSize: "8" },
                                    // { text: contrat?.typeClient?.description == "personne morale" ? assure?.raisonSocial + `\n` : assure?.nom + " " + assure?.prenom1 + `\n`, fontSize: "8" },
                                    { text: contrat?.agence?.raisonSocial + "\n" +
                                            contrat?.agence?.adresse + "\n" +                                          
                                            adresseAgence
                                    , fontSize: "8" },
                                ]
                            ],
                        },
                        absolutePosition: { x: 15, y: 489 },
                        layout: 'noBorders'
                    },                   

                   
                    {
                        text: [
                            { text: ``, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 147, y: 489 }
                    },
                    {
                        text: [
                            { text: contrat?.personnesList[0].personne?.raisonSocial ? contrat.produit.codeProduit=='45L' ? contrat?.personnesList[0].personne.raisonSocial + " LOC " + risq?.risque.find((risque: any) => risque.colonne == "Nom & PrÃ©nom CrÃ©dit Preneur/Raison Social")?.valeur : contrat?.personnesList[0].personne.raisonSocial : contrat?.personnesList[0].personne.nom + `\n`, fontSize: "8" },
                            { text:"\n", fontSize: "8" },
                            { text: contrat?.personnesList[0].personne?.adressesList[0].description + `\n`, fontSize: "8" },
                          
                            { text: contrat?.personnesList[0].personne?.adressesList[0]?.commune?.description + ` - ` + contrat?.personnesList[0].personne?.adressesList[0]?.wilaya?.description + `\n`, width: '40%', fontSize: "8" }

                        ], fontSize: "8", absolutePosition: { x: 15, y: 559 }
                    },
                    
                    {
                        text: [
                            { text: contrat.produit.codeProduit=='45L' ? contrat?.idContrat +' / '+risq?.risque.find((risque: any) => risque.colonne == "Numero de contrat")?.valeur : contrat?.idContrat , fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 78, y: 615 }
                    },
                    {
                        text: [
                            { text: (avenant.typeAvenant.code=="A168" || avenant.typeAvenant.code=="A27" || avenant.typeAvenant.code=="A20"? avenant?.dateAvenant?.split("T")[0] : contrat?.dateEffet?.split("T")[0])  + ` au ` + contrat?.dateExpiration?.split("T")[0], fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 78, y: 625 }
                    },
                    {
                        text: [
                            { text: risq?.risque.find((risque: any) => risque.colonne == "NÂ° d'Immatriculation")?.valeur, bold: true, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 20, y: 683 }
                    },
                    {
                        text: [

                            { text: risq?.risque.find((risque: any) => risque.colonne == "Marque")?.valeur, bold: true, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 130, y: 683 }
                    },
                    {
                        text: [
                            { text: risq?.risque.find((risque: any) => risque.colonne == "classe de vehicule")?.valeur, bold: true, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 192, y: 683 }
                    },
                    // {
                    //     text: [

                    //         { text: risq?.risque.find((risque: any) => risque.colonne == "NÂ° d'Immatriculation")?.valeur, bold: true, fontSize: "8" },
                    //     ], fontSize: "8", absolutePosition: { x: 20, y: 748 }
                    // },
                    // {
                    //     text: [
                    //         { text: risq?.risque.find((risque: any) => risque.colonne == "Marque")?.valeur, bold: true, fontSize: "8" },
                    //     ], fontSize: "8", absolutePosition: { x: 130, y: 748 }
                    // },
                    // {
                    //     text: [
                    //         { text: risq?.risque.find((risque: any) => risque.colonne == "classe de vehicule")?.valeur, bold: true, fontSize: "8" },
                    //     ], fontSize: "8", absolutePosition: { x: 192, y: 748 }
                    // },
                  
                    {
                        text: [
                            { text: contrat?.agence?.raisonSocial + "\n", fontSize: "8" },
                            { text: contrat?.agence?.adresse + "\n", fontSize: "8" },
                            { text: contrat?.agence?.commune || contrat?.agence?.commune != null ? contrat?.agence?.commune  + ` - `: '' + contrat?.agence?.wilaya, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 338, y: 490 }
                    },
                    {
                        text: [
                            { text: ``, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 470, y: 490 }
                    },
                    {
                        text: [
                            { text: contrat?.personnesList[0].personne.raisonSocial ? contrat.produit.codeProduit=='45L' ? contrat?.personnesList[0].personne.raisonSocial + " LOC " + risq?.risque.find((risque: any) => risque.colonne == "Nom & PrÃ©nom CrÃ©dit Preneur/Raison Social")?.valeur : contrat?.personnesList[0].personne.raisonSocial: contrat?.personnesList[0].personne.nom  + `\n`, fontSize: "8" },
                            { text:"\n", fontSize: "8" },
                            { text: assure?.adressesList[0].description + `\n`, fontSize: "8" },                           
                            { text: assure?.adressesList[0].commune?.description + ` - ` + assure?.adressesList[0].wilaya?.description, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 338, y: 560 }
                    },
                    // {
                    //     text: [
                    //         { text: contrat?.idContrat, fontSize: "8" },
                    //     ], fontSize: "8", absolutePosition: { x: 403, y: 615 }
                    // },
                    {
                        text: [
                            { text: contrat.produit.codeProduit=='45L' ? contrat?.idContrat +' / '+risq?.risque.find((risque: any) => risque.colonne == "Numero de contrat")?.valeur : contrat?.idContrat , fontSize: "8" }
                        ], fontSize: "8", absolutePosition: { x: 403, y: 615 }
                    },
                    {
                        text: [
                            { text:  (avenant.typeAvenant.code=="A168" || avenant.typeAvenant.code=="A27" || avenant.typeAvenant.code=="A20" ? avenant?.dateAvenant?.split("T")[0] : contrat?.dateEffet?.split("T")[0])+ ` au ` + contrat?.dateExpiration?.split("T")[0], fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 403, y: 625 }
                    },
                   
                    {
                        text: [
                            { text: risq?.risque.find((risque: any) => risque.colonne == "NÂ° d'Immatriculation")?.valeur, bold: true, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 340, y: 683 }
                    },
                    {
                        text: [
                            { text: risq?.risque.find((risque: any) => risque.colonne == "Marque")?.valeur, bold: true, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 450, y: 683 },

                    },
                    {
                        text: [
                            { text: risq?.risque.find((risque: any) => risque.colonne == "classe de vehicule")?.valeur, bold: true, fontSize: "8" },
                        ], fontSize: "8", absolutePosition: { x: 515, y: 683 },
                        pageBreak: risq.idRisque != risques[risques.length - 1].idRisque ? 'after' : null,
                    },
                    // {
                    //     text: [
                    //         { text: risq?.risque.find((risque: any) => risque.colonne == "NÂ° d'Immatriculation")?.valeur, bold: true, fontSize: "8" },
                    //     ], fontSize: "8", absolutePosition: { x: 340, y: 748 }
                    // },
                    // {
                    //     text: [
                    //         { text: risq?.risque.find((risque: any) => risque.colonne == "Marque")?.valeur, bold: true, fontSize: "8" },
                    //     ], fontSize: "8", absolutePosition: { x: 450, y: 748 },

                    // },
                    // {
                    //     text: [
                    //         { text: risq?.risque.find((risque: any) => risque.colonne == "classe de vehicule")?.valeur, bold: true, fontSize: "8" },
                    //     ], fontSize: "8", absolutePosition: { x: 515, y: 748 },
                    //     pageBreak: risq.idRisque != risques[risques.length - 1].idRisque ? 'after' : null,
                    // },
                ]
            }))
        }

        pdfMake.createPdf(docDefinitionAttestation).download("Attestation_" + contrat?.idContrat);
    }
    // generatePdf(contrat: any) {
    //     this.outputContrat(contrat);
    //     this.outputAttestation(contrat);
    // }

    getPackIdRisque(idContrat: any, idRisque: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/${idContrat}/pack/risque/${idRisque}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    getPackIdRisqueHistorique(idContrat: any, idRisque: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT_HISTORIQUE}/${idContrat}/pack/risque/${idRisque}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    getPackIdRisques(idContrat: any, risques: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*',
                'skip': ''
            }),
        };
        return this.http.post<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/${idContrat}/pack`, risques, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }

    getParamContratByIdRisque(idContrat: any, idGroupe: any, idRisque: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/${idContrat}/groupe/${idGroupe}/risque/${idRisque}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }

    getParamContratByIdRisqueHisto(idContrat: any, idGroupe: any, idRisque: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Content-Type': 'application/json',
                'Access-Control-Allow-Origin': '*'
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT_HISTORIQUE}/${idContrat}/groupe/${idGroupe}/risque/${idRisque}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }

    getParamContratFlotteByIdRisque(idContrat: any, idRisques: any[]) {

        const httpOption = {
            headers: new HttpHeaders({
                'Access-Control-Allow-Origin': '*',
                'skip': ''
            })
        };



        return this.http.post<any[]>(`${Constants.API_ENDPOINT_CONTRAT}/${idContrat}/pack`, idRisques, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    getAllContratsCommercialLine(index:number,size:number) {
        const httpOption = {
            headers: new HttpHeaders({
                'Access-Control-Allow-Origin': '*',
            })
        };



        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT_COMEMRCIAL_LINE}?pageNumber=${index}&pageSize=${size}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    getContratCommercialLine(numContrat: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Access-Control-Allow-Origin': '*',
            })
        };
        return this.http.get<any[]>(`${Constants.API_ENDPOINT_CONTRAT_COMEMRCIAL_LINE}/${numContrat}`, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    addContratCommercialLine(body: any) {
        const httpOption = {
            headers: new HttpHeaders({
                'Access-Control-Allow-Origin': '*',
            })
        };
        return this.http.post<any[]>(`${Constants.API_ENDPOINT_CONTRAT_COMEMRCIAL_LINE}`, body, httpOption).pipe(
            tap((response) => this.logs(response)),
            catchError((error) => throwError(error.error))
        );
    }
    //generate contrat pdf
    async outputContrat(contrat: any) {   
//         console.log('contrat depuis output contrat',contrat)    
//         console.log('garantieliste',)
// console.log('contrat',contrat ,  
//     contrat?.idHistorique == undefined ,contrat?.avenantName=="Affaire nouvelle ")


const hisIsUndef=contrat?.idHistorique == undefined
const isAffNouv=contrat?.avenantName=="Affaire nouvelle "

        let index = 0;
        let garanties: any = [];
        let champs: any = ["Garanties"];
        let widthChamp: any = [];
        let assure: any = {};
        let conducteur: any = {};
        let souscripteur: any = {};
        let risqueListVehicule: any = [];
        let valeurVenale: any = 0
        let risque: any = [];
        let risqueList: any = [];
        let zone = '';
        let dateDebut =moment(contrat?.risqueList?.find((el:any)=>el?.codeRisque==="P211")?.reponse?.valeur).format('DD/MM/YYYY');
        let dateRetour = moment( contrat?.dateExpiration).format('DD/MM/YYYY');
        let destination = contrat?.risqueList?.find((el:any)=>el?.codeRisque==="P182")?.reponse?.description;
        let duree=0;
        let garantieDomicile: any = [];
        let listGarantie: any = [];
        let headers: any = []
        let widthsHeaders:any[]=[80, 215, 125, 75];
        let widthTableAssures=contrat.produit.codeProduit ==="20G"?["*","*","*","*","*"]:["*","*","*","*"]
        let bodyTableAssure :any[]=[]
        let garantis=[];
        let packRowsGav= [{text:"Garanties", style: 'headerTable'}]
        let widthspackRowsGav=["*"]
        let gavGarantieTable :any[]=[]
        let isScolaire:boolean=false
        let risquesRows


       //console.log("je suis le contrat au niveau de contrat ",contrat)



// console.log("je suis le contrat au niveau de contrat ",contrat)
        
const cout_police= (contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == "T01")?.primeProrata)
// console.log('je suis coutt de police dans outputcontrat', cout_police , contrat?.idHistorique )

               const data=contrat.personnesList
               if(data.find((item: { role: { code: string; }; }) => (item.role.code === "CP234" || item.role.code === "CP236"))){

                this.souscripteur01 = data.find((item: { role: { code: string; }; }) => (item.role.code === "CP234" || item.role.code === "CP236"));
                this.sousExit=true
               }else{
                this.souscripteur01=null
                this.sousExit=false
               }

               
//console.log('taaaddda',this.souscripteur01?.perosnne);   



        const isContratVoyage = contrat?.produit?.codeProduit==="20A";
        if(contrat.produit.codeProduit ==="20G"){
            bodyTableAssure= [
                { text: 'NumÃ©ro dâassurÃ© ', style: 'headerTable' },
                { text: 'Nom et PrÃ©nom', style: 'headerTable' },
                { text: 'Date de naissance', style: 'headerTable' },
                { text: 'Pack', style: 'headerTable' },
                { text: 'Prime nette', style: 'headerTable' }
              ]
        }else{
            bodyTableAssure= [
                { text: 'NumÃ©ro dâassurÃ© ', style: 'headerTable' },
                { text: 'Nom et PrÃ©nom', style: 'headerTable' },
                { text: 'Date de naissance', style: 'headerTable' },     
                { text: 'Prime nette', style: 'headerTable' }
              ]

        }

        console.log("contrat.gavGarantieTable", contrat.gavGarantieTable)

        if(contrat.produit.codeProduit ==="20G"){
            contrat?.groupeList.forEach((el:any) => {
                packRowsGav.push({text:el.pack.description, style: 'headerTable'})
                widthspackRowsGav.push("*")
                if(el.pack.codePack=="G03"){
                    isScolaire=true               
                } else {
                    contrat.gavGarantieTable = contrat.gavGarantieTable.filter((item: any) => 
                        item[0].text !== "Bris de lunettes en cas dâaccident" && 
                        item[0].text !== "ProthÃ¨se dentaire en cas dâaccident"
                    );
                }
            });
            contrat.gavGarantieTable.unshift(packRowsGav)
            risquesRows = contrat?.groupeList?.flatMap((groupe: any) =>
                groupe?.risques?.map((risque: any) => [
                  { text: risque?.idRisque, fontSize: "8", alignment: "center" },
                  { 
                    text: (risque?.risque.find((cln:any)=>cln.colonne=="Nom")?.valeur || '') + " " + (risque?.risque.find((cln:any)=>cln.colonne=="PrÃ©nom")?.valeur || ''), 
                    fontSize: "8", 
                    alignment: "center" 
                  },
                  { 
                    text: moment(risque?.risque.find((cln:any)=>cln.colonne=="DateDeNaissance")?.valeur).format('DD/MM/YYYY') || '', 
                    fontSize: "8", 
                    alignment: "center" 
                  },
                  { 
                    text: groupe.pack.description, 
                    fontSize: "8", 
                    alignment: "center" 
                  },
                  { 
                    text: contrat?.primeListRisques?.find((rsq: any) => rsq.id === risque?.idRisque)?.prime || '', 
                    fontSize: "8", 
                    alignment: "center" 
                  }
                ])
              ) || [];
              //////console.log("risqrow",risquesRows)

        }else{
            //////console.log("qsdqsd",contrat?.groupeList?.[0]?.risques)
            risquesRows = contrat?.groupeList?.[0]?.risques?.map((risque: any) => [
                // console.log ("datte naiss",risque?.risque.find((cln:any)=>cln.colonne=="DateDeNaissance")),
                { text: risque?.idRisque, fontSize: "8",alignment:"center" },
                { text:(risque?.risque.find((cln:any)=>cln.colonne=="Nom")?.valeur || '') + " " + (risque?.risque.find((cln:any)=>cln.colonne=="PrÃ©nom")?.valeur || ''), fontSize: "8",alignment:"center" },
                { text:  moment(risque?.risque.find((cln:any)=>cln.colonne=="DateDeNaissance")?.valeur).format('DD/MM/YYYY') || '', fontSize: "8",alignment:"center" },
                { text: contrat?.primeListRisques?.find((rsq:any)=>rsq.id ===risque?.idRisque)?.prime, fontSize: "8",alignment:"center" }
            ]) || [];
             garantis = contrat?.paramContratList?.map((garantie:any,idx:number)=>[
                {text:garantie?.description,fontSize:"8"},
                {text:idx!==1?"-":"15%",alignment:"center",fontSize:"8"},
                {text:idx===2?"Voir conditions au verso":`${contrat?.garantiePlafond?.[garantie?.description]} DZD`,alignment:"center",fontSize:"8"}
            ])||[];
        }
       
    
        switch (contrat?.pack?.codePack) {
            case "V01":
                zone="Monde entier sauf USA, Canada, Japon, Singapour"
                break;
            case "V02":
                zone="Monde entier"
                break;
            case "V04" :
                zone="Tunisie"
                break;
            case "V03" :
                zone="Turquie"
                break;
            default:
                break;
        }

        
        if (dateDebut && dateRetour) {
            const startDate = moment(dateDebut, 'DD/MM/YYYY');
            const endDate = moment(dateRetour, 'DD/MM/YYYY').add(1,"day");
            duree = endDate.diff(startDate, 'days');
        }
        if(isContratVoyage){
            widthsHeaders=["60%", "25%", "15%"]
        }
        contrat?.produit.codeProduit == "95" ?
            headers = [{
                text: `Garanties `,
                fontSize: 8,
                style: "headerTable"
            },
            {
                text: `Sous Garanties`,
                fontSize: 8,
                style: "headerTable"
            },
            {
                text: `Plafonds `,
                fontSize: 8,
                style: "headerTable"
            },
            {
                text: `Franchise `,
                fontSize: 8,
                style: "headerTable"
            },
            {
                text: `Primes `,
                fontSize: 8,
                style: "headerTable"
            },
            ] : isContratVoyage?
            headers = [{
                text: `Garanties `,
                style: "headerTable"
            },
            {
                text: `Limites & plafonds `,
                style: "headerTable"
            },
            {
                text: `Franchise `,
                style: "headerTable"
            },
            ]
            :
            headers = [{
                text: `Garanties `,
                style: "headerTable"
            },
            {
                text: `Sous Garanties`,
                style: "headerTable"
            },
            {
                text: `Plafonds `,
                style: "headerTable"
            },
            {
                text: `Franchise `,
                style: "headerTable"
            },

            ];
        let headers2 = [{
            text: `Garanties `,
            style: "headerTable",

        },
        {
            text: `Sous Garanties`,
            style: "headerTable"
        },
        {
            text: `Limites de garanties `,
            style: "headerTable"
        },
        {
            text: `Limite par an `,
            style: "headerTable"
        },
        {
            text: `Franchises `,
            style: "headerTable"
        }
        ];

        risqueListVehicule = contrat?.risqueList.filter((risque: any) => risque?.categorieParamRisque == "vehicule")
        valeurVenale = contrat?.risqueList.find((risque: any) => risque.codeRisque == "P40")?.reponse?.valeur
        risqueList = contrat?.risqueList.filter((risque: any) => risque.categorieParamRisque != "vehicule")
        
        index = 0;
        // function reorderRisqueList(risqueList:any, codesRisqueRecherche:any) {
                
        //     const matchingItems = risqueList
        //       .filter((item:any) => codesRisqueRecherche.includes(item.codeRisque))
        //       .sort((a:any, b:any) => codesRisqueRecherche.indexOf(a.codeRisque) - codesRisqueRecherche.indexOf(b.codeRisque));
          
              
        //     const remainingItems = risqueList.filter((item:any) => !codesRisqueRecherche.includes(item.codeRisque));
          
            
        //     return [...matchingItems, ...remainingItems];
        // }
        
        function reorderRisqueList(risqueList:any, codesRisqueRecherche:any) {
                
            const matchingItems = risqueList
              .filter((item:any) => codesRisqueRecherche.includes(item.codeRisque))
              .sort((a:any, b:any) => codesRisqueRecherche.indexOf(a.codeRisque) - codesRisqueRecherche.indexOf(b.codeRisque));
          
              
            const remainingItems = risqueList.filter((item:any) => !codesRisqueRecherche.includes(item.codeRisque));
          
            
            return [...matchingItems, ...remainingItems];
        }
          

        switch (contrat.produit.codeProduit) {
            case "97" :{

                const indexSMPToRemove = risqueList?.findIndex((risque:any) => risque?.codeRisque === "P245");

                if (indexSMPToRemove !== -1) {
                // Remove the found object at the found index
                risqueList.splice(indexSMPToRemove, 1);
                ////console.log('new rsiquelist',risqueList)
                }

                  const codesRisqueRecherche = ["P222", "P264", "P263", "P223", "P224", "P318"];
                  risqueList = reorderRisqueList(risqueList, codesRisqueRecherche);

                  break;
            }

            default:
                break;

        }
        console.log("risqueList ", risqueList);
        while (index < risqueList?.length) {
            risque.push({
                text1: [

                    { text: risqueList[index].libelle + ": ", bold: true, fontSize: "8" },
                    { text: risqueList[index].typeChamp == "Liste of values" ? risqueList[index].reponse?.idParamReponse?.description : risqueList[index].typeChamp == "From Table" ? risqueList[index].reponse?.description : risqueList[index].typeChamp == "Number" ? Number(risqueList[index].reponse?.valeur).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : risqueList[index].reponse?.valeur, fontSize: "8" },
                ],
                text2: [
                    { text: risqueList[index + 1] ? risqueList[index + 1].libelle + ": " : "", bold: true, fontSize: "8" },
                    { text: risqueList[index + 1] ? risqueList[index + 1].typeChamp == "Liste of values" ? risqueList[index + 1].reponse?.idParamReponse?.description : risqueList[index + 1].typeChamp == "From Table" ? risqueList[index + 1].reponse?.description : risqueList[index+1].typeChamp == "Number" ? Number(risqueList[index+1].reponse?.valeur).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : risqueList[index + 1].reponse?.valeur : "", fontSize: "8" },
                ]

            })
            index = index + 2;
        }

        contrat?.personnesList?.forEach((element: any) => {
            ////console.log("jesuis le contrat",contrat)
            ////console.log("jesuis le element perosnne",element)
            ////console.log("jesuis formsous",souscripteur)


            switch (element?.role?.idParam) {
                case 233:
                    conducteur = element?.personne
                    break;
                case 234:
                    souscripteur = element?.personne
                    break;
                case 235:
                    assure = element?.personne
                    break;
                case 236:
                    souscripteur = element?.personne
                    assure = element?.personne
                    break;
                case 237:
                    souscripteur = element?.personne
                    conducteur = element?.personne
                    break;
                case 280:
                    assure = element?.personne
                    conducteur = element?.personne
                    break;
                case 238:
                    souscripteur = element?.personne
                    assure = element?.personne
                    conducteur = element?.personne
                    break;

                default:
                    break;
            }
        });
        index = 0;
        while (index < contrat?.paramContratList?.length) {
            if ((contrat?.paramContratList[index].prime && contrat?.paramContratList[index].prime != "0") || contrat?.produit?.codeProduit != "95") {
                contrat?.paramContratList[index].categorieList?.map((element: any) => {
                    champs.push(element?.description)
                });
            }

            index++;
        }
        champs = champs.filter((x: any, i: any) => champs.indexOf(x) === i);
        champs.push("Primes nettes")

        champs.map((champ: string) => {
            widthChamp.push("*")
        })
    
        if (contrat?.produit.codeProduit == "96" || contrat?.produit.codeProduit == "95") {

            let garantie: any = []
            garantie = contrat?.paramContratList?.find((item: any) => item.codeGarantie === "J01") ;
            garantieDomicile.push(garantie)
            listGarantie = contrat?.paramContratList?.filter((item: any) => item.codeGarantie != "J01") || [];
            // console.log("je suis la liste de garanti",garantie,listGarantie,)

        }
        if(isContratVoyage){
            listGarantie= [
                {
                    description: "DÃ©cÃ¨s",
                    franchise:"",
                    plafond:contrat.paramContratList?.find((param:any)=>param?.codeGarantie==="G42")?.categorieList?.[0]?.valeur + ' DZD',
                   
                },
                {
                    description: "IncapacitÃ© Permanente Totale / Partielle",
                    franchise:"15%",
                    plafond:contrat.paramContratList?.find((param:any)=>param?.codeGarantie==="G43")?.categorieList?.[0]?.valeur + ' DZD',
                },
                {
                    description: "Rapatriement de corps en cas de dÃ©cÃ¨s",
                    franchise:"",
                    plafond:"Frais rÃ©els",
                    plafondInfo:"(2)"
                },
                {
                    description: "Rapatriement des autres bÃ©nÃ©ficiaires",
                    franchise:"",
                    plafond:"Frais rÃ©els",
                    plafondInfo:"(4)"
                },
                {
                    description: "Assistance : Prise en charge des frais mÃ©dicaux",
                    franchise:"40â¬",
                    plafond:contrat?.pack?.codePack==="V01"? "30 000 â¬"
                    : contrat?.pack?.codePack==="V02"? "50 000 â¬":contrat?.pack?.codePack==="V03"?"10 000 â¬":"5 000 â¬",
                },
                {
                    description: "Transport Sanitaire",
                    franchise:"",
                    plafond:"Frais rÃ©els",
                    plafondInfo:"(1)"
                   
                },
                {
                    description: "Visite dâun proche parent si lâhospitalisation du bÃ©nÃ©ficiaire est supÃ©rieure Ã  10 jours",
                    franchise:"",
                    plafond:"Frais rÃ©els" ,
                    plafondInfo:"(3)"
        
                },
                {
                    description: "Prolongation de sÃ©jour",
                    franchise:"",
                    plafond:"80 Euros/ nuit, Max 7 nuitÃ©es",
                },
                {
                    description: "Prise en charge des soins dentaires dâurgence",
                    franchise:"25â¬",
                    plafond:"160 Euros",
                },
                {
                    description: "Retour prÃ©maturÃ© du BÃ©nÃ©ficiaire",
                    franchise:"",
                    plafond:"Frais rÃ©els",
                    plafondInfo:"(5)"
        
                },
                {
                    description: "Frais de secours et sauvetage",
                    franchise:"",
                    plafond:"2 500 Euros",
                },
                {
                    description: "Assistance juridique",
                    franchise:"",
                    plafond:"4 000 Euros",
                },
                {
                    description: "Avance de caution pÃ©nale",
                    franchise:"",
                    plafond:"10 000 Euros",
                },
                {
                    description: "Perte de bagage, max = 40 kg",
                    franchise:"",
                    plafond:"20 Euros /kg",
                },
                {
                    description: "Retard de vol de plus de 12 heures",
                    franchise:"",
                    plafond:"150 Euros",
                },
                {
                    description: "Retard de livraison bagages de plus 48 heures",
                    franchise:"",
                    plafond:"300 Euros",
                },
                {
                    description: "Transmission de message urgent",
                    franchise:"",
                    plafond:"IllimitÃ©",
                },
                ]
        }

        if(contrat?.produit?.codeProduit=='97'){
            if(contrat.sousProduit.code=="CTH"){
        
            const    valas= contrat?.risqueList.find((risque: { codeRisque: string; }) => risque.codeRisque === "P152");
            this.valas= valas.reponse.valeur*0.8
        //////console.log('je suis la valeur assure', this.valas)
    }
        if(contrat.sousProduit.code =="CTI"){
            const    valas= contrat?.risqueList.find((risque: { codeRisque: string; }) => risque.codeRisque === "P270");
        this.valtot= valas.reponse.valeur*0.5

}}
      

        index = 0;
        while (index < contrat?.paramContratList?.length) {
            if ((contrat?.paramContratList[index].prime && contrat?.paramContratList[index].prime != "0") || contrat?.produit?.codeProduit != "95") {
                let tmp = {
                    Garanties: [
                        { text: contrat?.paramContratList[index].description, fontSize: "8" },
                    ],
                    plafond: [
                        { text: '', fontSize: "8" },
                    ],
                    formule: [
                        { text: '', fontSize: "8" },
                    ],
                    franchise: [
                        { text: '', fontSize: "8" },
                    ],
                    "Primes nettes": [
                        { text: Number(contrat?.paramContratList[index].prime).toFixed(2), fontSize: "8" },
                    ],
                };

                contrat?.paramContratList[index].categorieList?.map((cat: any) => {
                    switch (cat.description) {
                        case "plafond":
                        console.log("cat descr",cat.description)

                            if (cat.valeur == '0') { cat.valeur = valeurVenale }
                            tmp.plafond[0].text = cat.valeur
                            console.log('catval',tmp.plafond)
                            break;

                        case "formule":
                        console.log("cat descr",cat.description)

                            tmp.formule[0].text = cat.valeur
                        console.log("tempformule",tmp.formule)

                            break;

                        case "franchise":
                        console.log("cat descr",cat.description)

                            tmp.franchise[0].text = cat.valeur
                        console.log(" tmp.franchise",tmp.franchise[0].text)

                            break;

                        default:
                            break;
                    }
                })
                garanties.push(tmp);
            }

            index++;
        }

        let qr = "";
        let SignatureCourtier:string=""
        let widthSignature:number=0;
        let heightSignature:number=0;

        switch (contrat?.produit.codeProduit) {
            case "45A":
                SignatureCourtier= await getBase64ImageFromURL(this.http,'assets/signature-auto.png');
                widthSignature= 222
                heightSignature= 124
                qr = "https://www.axa.dz/wp-content/uploads/2023/10/Conditions-generales-Assurance-Automobile.pdf"
                break;
            case "96":
                SignatureCourtier= await getBase64ImageFromURL(this.http,'assets/signature-mrp-mrh.png');
                widthSignature= 336
                heightSignature= 143
                qr = "https://www.axa.dz/wp-content/uploads/2023/10/Conditions-Generales-Habitation.pdf"
                break;
            case "95":
                SignatureCourtier= await getBase64ImageFromURL(this.http,'assets/signature-mrp-mrh.png');
                widthSignature= 336
                heightSignature= 143
                qr = "https://www.axa.dz/wp-content/uploads/2023/11/Conditions-Generales-Multirisque-professionnelle.pdf"
                break;
            case '20A':
                SignatureCourtier= await getBase64ImageFromURL(this.http,'assets/signature-voyage-gav.png');
                widthSignature= 336
                heightSignature= 143
                qr="https://www.axa.dz/wp-content/uploads/2023/10/Conditions-Generales-Assurance-Voyage.pdf"
                break;
            case '20G':
                SignatureCourtier= await getBase64ImageFromURL(this.http,'assets/signature-voyage-gav.png');
                widthSignature= 336
                heightSignature= 143
                break;
    
        
            default:
                SignatureCourtier= ""
                break;
        } 


        const docDefinitionContrat: any = {
            watermark: { text: '', color: 'blue', opacity: 0.1 },
            pageMargins: isContratVoyage ?[44, 40, 40, 40]:[35, 10, 35, 30],
            border: [false, false, false, false],
            // header: function(currentPage: any, pageCount: any, pageSize: any) {         
            //     if(currentPage == 1) {
            //         return {
            //             stack: [

            //             ],
            //             margin: [35, 30, 35, 0]
            //         }
            //     }   
            // },
            content: [
                {
                    columns: [
                        { width: 120, text: '' }, // First empty column with a width of 120 units
                        qr !== "" ? { qr: qr, fit: '70', width: 'auto', margin: [0, 0, 20, 0] } : {}, // QR code column
                        {
                            width: '*', // Third column taking the remaining space
                            stack: [
                                contrat?.produit.codeProduit == "96" ?
                                {
                                    text: 'AXA  MultiRisque Habitation',
                                    style: 'sectionHeader'
                                }
                                :
                                {
                                    text: 'AXA ' + contrat?.produit?.description.toUpperCase(),
                                    style: 'sectionHeader'
                                },
                                {
                                    text: 'Conditions ParticuliÃ¨res',
                                    style: 'sectionHeader',
                                    color: 'black'
                                },
                                // {
                                //     text: contrat?.pack?.description,
                                //     style: 'sectionHeader',
                                //     color: 'black'
                                // },
                                contrat.isAvenant?{
                                    text: contrat?.avenantName,
                                    style: 'sectionHeader',
                                    color: 'black'
                                }:{},
                                {
                                    text: (contrat.produit.codeProduit == '97' && contrat.sousProduit.code == "CTI") 
                                        ? "Bien industriel et commercial" 
                                        : (contrat.produit.codeProduit == '97' && contrat.sousProduit.code == "CTH") 
                                            ? "Bien immobilier" 
                                            : contrat?.pack?.description,
                                    style: 'sectionHeader',
                                    color: 'black'
                                },
                                
                                contrat?.convention != null ?
                                {
                                    text: 'Convention: ' +  contrat?.descriptionConvention ==undefined  ? contrat?.convention : contrat?.descriptionConvention,
                                  
                                    style: 'sectionHeader',
                                    color: 'black'
                                } : {},
                                contrat?.reduction != null  ?
                                {
                                    // text: 'RÃ©duction: ' + contrat?.descriptionReduction,
                                    text: 'RÃ©duction: ' + contrat?.descriptionReduction ==undefined  ? contrat?.reduction :contrat?.descriptionReduction,

                                    style: 'sectionHeader',
                                    color: 'black'
                                } : 
                               
                                {}
                            ]
                        }
                    ]
                },
                    {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `Agence`,
                                            style: "headerTable",
                                        }
                                    ],
                                ],
                            }
                        },
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: `RÃ©fÃ©rence du contrat`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            },
                        },
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `Nom et code agence : `, bold: true, fontSize: "8" },
                                                { text: contrat?.agence?.codeAgence + " " + contrat?.agence?.raisonSocial, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `NÂ° Police: `, bold: true, fontSize: "8" },
                                                { text: contrat?.idContrat, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `Adresse agence : `, bold: true, fontSize: "8" },
                                                { text: contrat?.agence?.adresse, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        isContratVoyage?{
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `DurÃ©e : `, bold: true, fontSize: "8" },
                                                { text: `${duree}`, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }:{
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `Type de contrat : `, bold: true, fontSize: "8" },
                                                { text: `DurÃ©e Ferme`, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `TÃ©lÃ©phone agence : `, bold: true, fontSize: "8" },
                                                { text: contrat?.agence?.telephone, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `Date effet : `, bold: true, fontSize: "8" },
                                                { text: contrat?.dateEffet?.split("T")[0], fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `E-mail agence : `, bold: true, fontSize: "8" },
                                                { text: contrat?.agence?.email, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `Date d'Ã©chÃ©ance contrat : `, bold: true, fontSize: "8" },
                                                { text: contrat?.dateExpiration?.split("T")[0], fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                isContratVoyage || contrat.produit.codeProduit=="20G" ?[
                    {
                        style: "table",
                        table: {
                            widths: ["*"],
                            alignment: "left",
                            body: [
                                [
                                    {
                                        text: `Souscripteur`,
                                        style: "headerTable",
                                        alignment: "left",

                                    },
                                ],
                            ],
                        }
                    },
                    {
                        table: {
                            widths: ["*"],
                            alignment: "left",
                            body: [
                                [
                                    {
                                        text: [
                                            { text: contrat?.typeClient?.description == "personne morale" ? `Raison Sociale : ` : `Nom & PrÃ©nom : `, bold: true, fontSize: "8" },
                                            { text: contrat?.canal?.code == "DV" ? contrat?.userResponse?.nom + " " + contrat?.userResponse?.prenom : contrat?.canal?.code != "DS" ? souscripteur?.nom + " " + souscripteur?.prenom1 : contrat?.typeClient?.description == "personne morale" ? souscripteur?.raisonSocial : souscripteur?.nom + " " + souscripteur?.prenom1, fontSize: "8" },
                                        ],
                                    },
                                ],
                            ],
                        }
                    },
                    {
                        table: {
                            widths: ["*"],
                            alignment: "left",
                            body: [
                                [
                                    {
                                        text: [
                                            { text: `TÃ©lÃ©phone : `, bold: true, fontSize: "8" },
                                            { text: contrat?.canal?.code == "DV" ? contrat?.userResponse?.telephone : souscripteur?.contactList?.find((contact: any) => contact?.typeContact?.code == "CNT1")?.description, fontSize: "8" },
                                        ],
                                    },
                                ],
                            ],
                        }
                    },
                    {
                        table: {
                            widths: ["*"],
                            alignment: "left",
                            body: [
                                [
                                    {
                                        text: [
                                            { text: `E-mail : `, bold: true, fontSize: "8" },
                                            { text: contrat?.canal?.code == "DV" ? contrat?.userResponse?.email : souscripteur?.contactList?.find((contact: any) => contact?.typeContact?.code == "CNT2")?.description, fontSize: "8" },
                                        ],
                                    },
                                ],
                            ],
                        }
                    },
                ]
                :[
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `Souscripteur`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                       {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: `AssurÃ©(e)`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            },
                        },
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            // text: [
                                            //     { text: `Nom & PrÃ©nom : `, bold: true, fontSize: "8" },
                                            //     { text: souscripteur?.nom + " " + souscripteur?.prenom1, fontSize: "8" },
                                            // ], 
                                            
                                            text: [
                                                { text: this.sousExit && souscripteur.raisonSocial != undefined ? `Raison Sociale : ` : `Nom & PrÃ©nom : `, bold: true, fontSize: "8" },
                                                { text: this.sousExit && souscripteur.raisonSocial != undefined ?  souscripteur?.raisonSocial : souscripteur?.nom + " " + souscripteur?.prenom1 , fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: assure.raisonSocial != undefined ? `Raison Sociale : ` : `Nom & PrÃ©nom : `, bold: true, fontSize: "8" },
                                                { text: assure.raisonSocial != undefined ?   assure?.raisonSocial : assure?.nom + " " + assure?.prenom1, fontSize: "8" },
                                                // { text: contrat?.typeClient?.description == "personne morale" ? `Raison Sociale : ` : `Nom & PrÃ©nom : `, bold: true, fontSize: "8" },
                                                // { text: contrat?.typeClient?.description == "personne morale" ? assure?.raisonSocial : assure?.nom + " " + assure?.prenom1, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `NÃ©(e) le : `, bold: true, fontSize: "8" },
                                                { text: souscripteur?.dateNaissance?.split("T")[0], fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `NÃ©(e) le : `, bold: true, fontSize: "8" },
                                                { text: assure?.dateNaissance?.split("T")[0], fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `E-mail : `, bold: true, fontSize: "8" },
                                                { text: souscripteur?.contactList?.find((c: any) => c.typeContact?.idParam == 8)?.description, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                        {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `E-mail : `, bold: true, fontSize: "8" },
                                                { text: assure?.contactList?.find((c: any) => c.typeContact?.idParam == 8)?.description, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                },
                {
                    columns: [
                        {
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `TÃ©lÃ©phone : `, bold: true, fontSize: "8" },
                                                { text: souscripteur?.contactList?.find((c: any) => c.typeContact?.idParam == 7)?.description, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            }
                        },
                         {
                            table: {
                                widths: ["*"],
                                alignment: "right",
                                body: [
                                    [
                                        {
                                            text: [
                                                { text: `TÃ©lÃ©phone : `, bold: true, fontSize: "8" },
                                                { text: assure?.contactList?.find((c: any) => c.typeContact?.idParam == 7)?.description, fontSize: "8" },
                                            ],
                                        },
                                    ],
                                ],
                            },
                        }
                    ],
                }],
                risqueListVehicule?.length != 0 ?
                    {
                        columns: [
                            {
                                style: "table",
                                table: {
                                    widths: ["*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: `Conducteur principal`,
                                                style: "headerTable"
                                            },
                                        ],
                                    ],
                                }
                            },

                            {
                                style: "table",
                                table: {
                                    widths: ["*"],
                                    alignment: "right",
                                    body: [
                                        [
                                            {
                                                text: `VÃ©hicule`,
                                                style: "headerTable"
                                            },
                                        ],
                                    ],
                                },
                            },
                        ],
                    } : {},
                risqueListVehicule?.length != 0 ?
                    {
                        columns: [
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `Nom & PrÃ©nom : `, bold: true, fontSize: "8" },
                                                    { text: conducteur?.nom + ' ' + conducteur?.prenom1, fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                }
                            },
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "right",
                                    body: [
                                        [
                                            {
                                                columns: [
                                                    {
                                                        text: [
                                                            { text: `Marque : `, bold: true, fontSize: "8" },
                                                            { text: risqueListVehicule.find((risque: any) => risque.codeRisque == 'P25')?.reponse?.idParamReponse?.description, fontSize: "8" },
                                                        ],

                                                    },
                                                    {
                                                        border: [false, true, true, true],
                                                        text: [
                                                            { text: `ModÃ¨le : `, bold: true, fontSize: "8" },
                                                            { text: risqueListVehicule.find((risque: any) => risque.codeRisque == 'P26')?.reponse?.idParamReponse?.description, fontSize: "8" },
                                                        ],

                                                    }
                                                ],
                                            },
                                        ],
                                    ],
                                },
                            }
                        ],
                    } : {},
                risqueListVehicule?.length != 0 ?
                    {
                        columns: [
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `E-mail : `, bold: true, fontSize: "8" },
                                                    { text: conducteur?.contactList?.find((c: any) => c.typeContact?.idParam == 8)?.description, fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                }
                            },
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "right",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `NÂ° de ChÃ¢ssis :  `, bold: true, fontSize: "8" },
                                                    { text: risqueListVehicule.find((risque: any) => risque.codeRisque == 'P30')?.reponse?.valeur, fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                },
                            }
                        ],
                    } : {},
                risqueListVehicule?.length != 0 ?
                    {
                        columns: [
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `TÃ©lÃ©phone : `, bold: true, fontSize: "8" },
                                                    { text: conducteur?.contactList?.find((c: any) => c.typeContact?.idParam == 7)?.description, fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                }
                            },
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "right",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `Immatriculation :  `, bold: true, fontSize: "8" },
                                                    { text: risqueListVehicule.find((risque: any) => risque.codeRisque == 'P38')?.reponse?.valeur, fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                },
                            }
                        ],
                    } : {},
                risqueListVehicule?.length != 0 ?
                    {
                        columns: [
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `NÃ©(e) le : `, bold: true, fontSize: "8" },
                                                    { text: conducteur?.dateNaissance?.split("T")[0], fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                }
                            },
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "right",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `Date de mise en circulation : `, bold: true, fontSize: "8" },
                                                    // { text: risqueListVehicule.find((risque: any) => risque.paramRisque?.codeParam == 'P28')?.valeur?.split("T")[0], fontSize: "8" },
                                                    { text: risqueListVehicule.find((risque: any) => risque.codeRisque == 'P28')?.reponse?.valeur, fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                },
                            }
                        ],
                    } : {},
                risqueListVehicule?.length != 0 ?
                    {
                        columns: [
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `CatÃ©gorie de permis : `, bold: true, fontSize: "8" },
                                                    { text: conducteur?.documentList?.find((d: any) => d.typeDocument?.idParam == 5)?.sousCategorie, fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                }
                            },
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "right",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `Valeur VÃ©nale : `, bold: true, fontSize: "8" },
                                                    { text: risqueListVehicule.find((risque: any) => risque.codeRisque == 'P40')?.reponse?.valeur + " DZD", fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                },
                            }
                        ],
                    } : {},
                risqueListVehicule?.length != 0 ?
                    {
                        columns: [
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: [
                                                    { text: `Obtenu le : `, bold: true, fontSize: "8" },
                                                    { text: conducteur?.documentList?.find((d: any) => d.typeDocument?.idParam == 5)?.dateDelivrance?.split("T")[0], fontSize: "8" },
                                                ],
                                            },
                                        ],
                                    ],
                                }
                            },
                            {
                                table: {
                                    widths: ["*"],
                                    alignment: "right",
                                    body: [
                                        [
                                            {
                                                columns: [
                                                    {

                                                        text: [
                                                            { text: `Genre : `, bold: true, fontSize: "8" },
                                                            { text: risqueListVehicule.find((risque: any) => risque.codeRisque == 'P31')?.reponse?.idParamReponse?.description, fontSize: "8" },
                                                        ]
                                                    },
                                                    {

                                                        text: [
                                                            { text: `Usage : `, bold: true, fontSize: "8" },
                                                            { text: risqueListVehicule.find((risque: any) => risque.codeRisque == 'P52')?.reponse?.idParamReponse?.description, fontSize: "8" },
                                                        ]
                                                    }
                                                ],
                                            },
                                        ],
                                    ],
                                },
                            }
                        ],
                    } : {},
                    
                    isContratVoyage || contrat.produit.codeProduit=="20G" ? [
                    {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `Assure(es)`,
                                            style: "headerTable",
                                            alignment: "left",

                                        },
                                    ],
                                ],
                            }
                        },
                       
                    ],
                },
                
                {
                    table: {
                      widths: widthTableAssures, 
                      body: [
                        bodyTableAssure,
                         ...risquesRows, 

                      ]
                    }
                  },
                  {text:`\n`}, contrat.produit.codeProduit=="20G"?
                  [{
                      table: {
                          headerRows: 1,
                          widths: widthspackRowsGav,
                          body: isScolaire? contrat.gavGarantieTable.slice(0,6) : contrat.gavGarantieTable
                      },
                  },
                 { text: `(*) : DÃ©cÃ¨s accidentel 4 â 13 ans Pas de capital dÃ©cÃ¨s                 (*) : DÃ©cÃ¨s accidentel 13 â 18 ans`, fontSize: 6 }

              ]:
                [{
                  table: {
                      widths: ['*', '*'], 
                      body: [
                        [
                          { text: 'Informations du voyage', style: 'headerTable', colSpan: 2, alignment: 'center' },
                          ''
                        ], // Header row
                        [
                          { text: `Formule : ${contrat?.pack?.description}`,fontSize:"8"  },
                          { text: `DurÃ©e : ${duree} Jour(s)`,fontSize:"8" }
                        ], // Row 1
                        [
                          { text: `Zone : ${zone}`,fontSize:"8"  },
                          { text: `Date dâeffet : ${dateDebut}`,fontSize:"8" }
                        ], // Row 2
                        [
                          { text: `Pays destination : ${contrat.isShengen ? destination+" (Schengen)" :destination}`,fontSize:"8"},
                          { text: `Date dâÃ©chÃ©ance : ${dateRetour}`,fontSize:"8" }
                        ], // Row 3
                      ]
                    }
              },
              {text:`\n`},
              {
                  table: {
                    widths: ['55%', '15%', '*'], // Define three columns with the first column auto-sized and the second column smaller
                    body: [
                      [
                        { text: 'Garanties', style: 'headerTable', colSpan: 3, alignment: 'center' },
                        '',
                        ''
                      ], // Header row
                      [
                        { text: 'Garanties accordÃ©es', style: 'headerTable' },
                        { text: 'Franchise', style: 'headerTable' },
                        { text: 'Capitaux', style: 'headerTable' }
                      ], // Row 1
                     ...garantis
                    ]
                  }

                }],
                ]:[
                risqueListVehicule?.length != 0 ? {} :
                    {
                        style: "table",
                        table: {
                            widths: ["*"],
                            alignment: "right",
                            body: [
                                [
                                    {
                                        //text: risqueList[0].paramRisque.categorieParamRisque.description,
                                        text: 'Caracteristique du risque assurÃ©',
                                        style: "headerTable"
                                    },
                                ],
                            ],
                        },
                    },

                risqueListVehicule?.length != 0 ? {} : this.table(risque, ['text1', 'text2']),],




                { text: "\n" },


                 // Added table with two columns
                 (contrat?.produit?.codeProduit=='97' && contrat.sousProduit.code=="CTH")?[
                    {
                        style: "table",
                        table: {
                          widths: ["50%", "50%"],
                          body: [
                            [
                              {
                                text: "Limite de garantie 80%",
                                style: "headerTable",
                              },
                              {
                                text: `${this.valas}`,
                                fontSize: 8,
                              },
                            ],
                            [
                              {
                                text: "Franchise",
                                style: "headerTable",
                              },
                              {
                                text: "2 % des dommages, Minimum 30.000 DZD",
                                fontSize: 8,
                              },
                            ],
                          ],
                        },
                      },
                      
                  ]:
                  (contrat?.produit?.codeProduit=='97' && contrat.sousProduit.code=="CTI")?[
                    {
                        style: "table",
                        table: {
                          widths: ["50%", "50%"],
                          body: [
                            [
                              {
                                text: "Limite de garantie 50%",
                                style: "headerTable",
                              },
                              {
                                text: `${this.valtot} DZD`,
                                fontSize: 8,
                              },
                            ],
                            [
                              {
                                text: "Franchise",
                                style: "headerTable",
                              },
                              {
                                text: "10 % des dommages",
                                fontSize: 8,
                              },
                            ],
                          ],
                        },
                      },
                      
                  ]:

                { text: "\n" },

                //Debut Garanties et sous-garanties
                risqueListVehicule?.length != 0 ? garanties.length != 0 ? this.table(garanties, champs) : {} : {},
                //fin Garanties et sous garanties

                //debut Prime
                risqueListVehicule?.length != 0 ?
                    {
                        columns: [

                            {
                                style: "table",
                                table: {

                                    widths: ["*", "*", "*", "*", "*", "*"],
                                    body: [
                                        [
                                            {
                                                text: `Prime nette`,
                                                style: "headerTable"
                                            },
                                            contrat?.idHistorique == undefined || contrat?.nmouvement==0 ?
                                                {
                                                    text: `CoÃ»t de police `,
                                                    style: "headerTable"
                                                }
                                                : {
                                                    text: `Frais de gestion`,
                                                    style: "headerTable"
                                                },
                                            {
                                                text: `T.V.A`,
                                                style: "headerTable"
                                            },
                                            risqueListVehicule?.length != 0 ?
                                                {
                                                    text: `F.G.A`,
                                                    style: "headerTable"
                                                } : {},
                                            {
                                                text: `Timbre de dimension`,
                                                style: "headerTable"
                                            },
                                            risqueListVehicule?.length != 0 ?
                                                {
                                                    text: `Timbre graduÃ©`,
                                                    style: "headerTable"
                                                } : {},
                                        ],
                                        [
                                            {
                                                text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            // contrat?.idHistorique == undefined ?
                                            contrat?.idHistorique == undefined || contrat?.nmouvement==0 ?
                                
                                             
                                            {
                                                    text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                }
                                                : {
                                                    text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T08')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                },
                                            /* {
                                                 text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01' || taxe?.taxe?.code == 'T08')?.primeProrata).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",")+" DZD",
                                                 fontSize: 10
                                             },
                                             */
                                            {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T04')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            risqueListVehicule?.length != 0 ?
                                                {
                                                    text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T07')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                } : {},
                                            {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T03')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            risqueListVehicule?.length != 0 ?
                                                {
                                                    text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T02')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                } : {},
                                        ],
                                        [
                                            { text: '', colSpan: 4 },
                                            {},
                                            {},
                                            {},
                                            {
                                                text: `Prime Totale`,
                                                style: "headerTable",
                                            },
                                            {
                                                text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                        ],
                                    ],
                                }
                            }
                        ],
                    } : isContratVoyage || contrat.produit.codeProduit=="20G"?
                    {
                        table: {
                            widths: ['*', '*', '*', '*'], // Define five columns with equal width
                            body: [
                              [
                                { text: 'Prime nette', style: 'headerTable' },
                              
                                { text: 'Frais de gestion', style: 'headerTable' },
                                { text: 'Droit de timbres', style: 'headerTable' },
                                { text: 'Prime TTC', style: 'headerTable' }
                              ], // Header row
                              [
                                {text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",bold:true,alignment:"center",fontSize:"8"},
                                
                                {text:Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01')?.primeProrata).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " DZD" ,bold:true,alignment:"center",fontSize:"8"},
                                {text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T03')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",bold:true,alignment:"center",fontSize:"8"},
                                {text:Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",bold:true,alignment:"center",fontSize:"8"}
                              ] // Row 2
                            ]
                          }
                    }
                    :
                    {
                        columns: [

                            {
                                style: "table",
                                table: {

                                    widths: ["*", "*", "*", "*", "*", "*"],
                                    body: [
                                        [
                                            {
                                                text: `Prime nette`,
                                                style: "headerTable"
                                            },
                                            {
                                                text: `Prime sans rÃ©duction`,
                                                style: "headerTable"
                                            },
                                            contrat?.idHistorique == undefined || contrat?.nmouvement==0 ?
                                                {
                                                    text: `CoÃ»t de police`,
                                                    style: "headerTable"
                                                }
                                                : {
                                                    text: `Frais de gestion`,
                                                    style: "headerTable"
                                                },
                                            {
                                                text: `T.V.A`,
                                                style: "headerTable"
                                            },

                                            {
                                                text: `Timbre de dimension`,
                                                style: "headerTable"
                                            },
                                            {
                                                text: `Prime Totale`,
                                                style: "headerTable",
                                            },

                                        ],
                                        [
                                            {
                                                text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            {
                                                text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP264')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            // contrat?.idHistorique == undefined ?
                                            contrat?.idHistorique == undefined  || contrat?.nmouvement == 0 ?
                                            
                                                {
                                                    text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == "T01")?.primeProrata) + " DZD",
                                                    fontSize: 10
                                                }
                                                : {
                                                    text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T08')?.primeProrata).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " DZD",
                                                    fontSize: 10
                                                },
                                                contrat.produit.codeProduit=="97"?
                                                { text: "  0.00 DZD",
                                                fontSize: 10}:
                                            {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T04')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },

                                            {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T03')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            {
                                                text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.primeProrata).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },

                                        ],
                                    ],
                                }
                            },

                        ],

                    },
                { text: "\n" },
                
                isContratVoyage?[
                    {
                        text: 'NB :',
                        bold: true,
                        margin: [0, 0, 0, 7],
                        fontSize:8
                      },
                      {
                        ul: [
                        'Toute modification de dates devra Ãªtre demandÃ©e Ã  lâassureur par le souscripteur, au moins 72 heures avant la prise dâeffet du contrat.',
                        'La rÃ©siliation dâun contrat groupe ne peut se faire que pour la totalitÃ© des assurÃ©s mentionnÃ©s dans ce dernier.',
                        'En cas dâaccident, de maladie inopinÃ©e ou afin dâinvoquer les autres garanties dâassistance, vous devez contacter lâassisteur dans un dÃ©lai maximum de 48h avant dâengager toute dÃ©pense.',
                        ],fontSize:8,bold:true
                    } ,
                    {
                        text: '\n',
                    
                      },
                
                
                ]:{},
                { 
                    text:"Le prÃ©sent contrat est rÃ©gi par le Code Civil, l'ordonnance nÂ°95/07 du 25 Janvier 1995 modifiÃ©e par la loi nÂ°06/04 du 20 FÃ©vrier 2006, relative aux Assurances , l'ordonnance nÂ°74/15 du 30 Janvier 1974 modifiÃ©e et complÃ©tÃ©e par la loi nÂ°88/31 du 19/07/1988 et les dÃ©crets nÂ°80/34 - nÂ°80/35 - nÂ°80/36 et nÂ°80/37 du 16 FÃ©vrier 1980.",
                    fontSize: "8",
                    color: 'black',
                    pageBreak: 'after'
                },



                contrat?.produit.codeProduit == "96" || contrat?.produit.codeProduit == "95" || isContratVoyage ?
                    {
                        style: 'table',
                        
                        text: isContratVoyage ? 'Tableau des garanties'+ ` - Formule : ${contrat?.pack?.description}`:"Tableau des garanties",
                        fontSize: 14,
                        color: 'black',
                        bold: true,
                        alignment: "center"

                    }
                    :{},

                contrat?.produit.codeProduit == "96"||isContratVoyage ? contrat?.paramContratList?.filter((item: any) => item.codeGarantie != "J01")||isContratVoyage ?
                    {
                        style: "table",
                        table: {
                            // widths: [95,245,90,50],   
                            widths:  widthsHeaders,
                            headerRows: 1,
                            body: [headers].concat(
                               
                                listGarantie.map((g: any) => {
                                    
                                    let garantie: any;
                                    let sGarantie: any = [];
                                    let plafond: any = [];
                                    let franchise: any = [];
                                    const priceA = 10000;
                                    
                                    if (g.codeGarantie != "J01") {
                                        let i = 0;
                                        garantie = g.description
                                        g?.sousGarantieList?.map((sg: any) => {
                                            sGarantie.push({ text: sg.description, fontSize: 10, lineHeight: 1.25 });
                                            plafond[i] = sg.codeSousGarantie != "SG23" ?
                                                sg.codeSousGarantie != "SG20" ?
                                                    sg.codeSousGarantie != "SG07" && sg.codeSousGarantie != "SG08" && sg.codeSousGarantie != "SG108" && sg.codeSousGarantie != "SG109" ?
                                                        sg.codeSousGarantie != "SG12" && sg.codeSousGarantie != "SG35" && sg.codeSousGarantie != "SG22" && sg.codeSousGarantie != "SG44" && sg.codeSousGarantie != "SG37" && sg.codeSousGarantie != "SG39" ?
                                                            sg.categorieList?.find((cat: any) => cat?.description == "plafond")?.valeur != 0 ?
                                                            sg.categorieList?.find((cat: any) => cat?.description == "plafond") ?
                                                                
                                                                    { text: Number(sg.categorieList?.find((cat: any) => cat?.description == "plafond").valeur).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD", fontSize: "10", lineHeight: 1.25, alignment: "center" }
                                                                    : { text: "A concurrence des frais engagÃ©s", fontSize: "8", lineHeight: 1.25, alignment: "center" }
                                                                : { text: "/", fontSize: "10", alignment: "center" }
                                                            : { text: "5% de l'indemnitÃ©", fontSize: "10", lineHeight: 1.25, alignment: "center" }
                                                        : { text: " Valeur locative annuelle de 'l'habitation avec un maximum de 1 000 000 DZD", fontSize: "6", lineHeight: 1, alignment: "center" }
                                                    : { text: "250 000 DZD par sinistre par annÃ©e dâassurance", fontSize: "6", lineHeight: 1, alignment: "center" }
                                                : { text: "15 000 DZD par annÃ©e dâassurance", fontSize: "7", lineHeight: 1.25, alignment: "center" }

                                            franchise = g.codeGarantie != "D04" && g.codeGarantie != "D05" ?
                                                { text: "5% des dommages avec un minimum de 5000 DZD ", fontSize: "9", valign: 'middle' }

                                                : { text: "5% des dommages avec un minimum de 5000 DZD et un dÃ©lai de carrance dâun mois Ã  compter de la date dâeffet", fontSize: "8", valign: 'middle' }

                                            // franchise = { text: "5% des dommages avec un minimum de 5000 DZD ", fontSize: "9",valign: 'middle'}     

                                            /*  sg.categorieList?.find((cat: any) => cat?.description == "franchise") ? sg.categorieList?.find((cat: any) => cat?.description == "franchise").valeur ?
                                              { text: "5% des dommages avec un minimum de 5000 DZD", fontSize: "9",valign: 'middle'}: " " 
                                              */
                                            i++;

                                        })
                                        if (g?.sousGarantieList?.length == 0 && g?.categorieList?.length != 0) {
                                            plafond[i] = { text: g.categorieList?.find((cat: any) => cat?.description == "plafond") ? Number(g.categorieList?.find((cat: any) => cat?.description == "plafond")?.valeur).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD" : "", fontSize: "10", lineHeight: 1.25, alignment: "center" }
                                            franchise = { text: g.categorieList?.find((cat: any) => cat?.description == "franchise") ? "5% des dommages avec un minimum de 5000 DZD" : "", fontSize: "9", valign: 'middle' }
                                        }

                                    }
                                    if(isContratVoyage){
                                        garantie=g.description
                                        const textplfnd = g.plafondInfo?
                                         {text:[
                                             g.plafond + ' ',
                                             { text:g.plafondInfo , sup: true },
                                           ],
                                           fontSize: 8,
                                           alignment: 'center'
                                        }
                                        :
                                        {text:g.plafond,fontSize: "8", alignment: 'center'}
                                        plafond=[textplfnd]
                                        franchise={ text: g.franchise, fontSize: "8", alignment: 'center' }
                                    
                                        return [
                                            [{ text: garantie, fontSize: "8", verticalAlignment: 'middle', colSpan: 4 }],
                                            [plafond ? plafond : null],
                                            franchise
                                        ]
                                    }
                                    return [
                                        [{ text: garantie, fontSize: "10", verticalAlignment: 'middle', colSpan: 4 }],
                                        isContratVoyage?null:[sGarantie ? sGarantie : null],
                                        [plafond ? plafond : null],
                                        franchise
                                    ]


                                }),
                               
                            )
                        }
                    }
                    : {} : contrat?.produit.codeProduit == "95" ?
                    
                    {
                        style: "table",
                        table: {
                            // widths: [95,245,90,50],   
                            widths: [95, 175, 120, 45, 60],
                            headerRows: 1,
                            body: [headers].concat(


                                listGarantie.map((g: any) => {

                                    let garantie: any;
                                    let sGarantie: any = [];
                                    let plafond: any = [];
                                    let franchise: any = [];
                                    let prime: any = [];
                                    const priceA = 10000;
                                    let i = 0;

                                    garantie = g.description
                                    g?.sousGarantieList?.map((sg: any) => {
                                        sGarantie.push({ text: sg.description, fontSize: 8, lineHeight: 1.25 });
                                        plafond[i] = sg.codeSousGarantie != "SG98" ?
                                            sg.codeSousGarantie != "SG87" && sg.codeSousGarantie != "SG89" ?
                                                sg.codeSousGarantie != "SG84" && sg.codeSousGarantie != "SG85" && sg.codeSousGarantie != "SG86" ?
                                                    sg.codeSousGarantie != "SG82" ?
                                                        sg.codeSousGarantie != "SG81" ?
                                                            sg.codeSousGarantie != "SG68" ?
                                                                sg.codeSousGarantie != "SG64" && sg.codeSousGarantie != "SG65" ?
                                                                    sg.codeSousGarantie != "SG79" ?
                                                                        sg.codeSousGarantie != "SG52" && sg.codeSousGarantie != "SG53" && sg.codeSousGarantie != "SG70" && sg.codeSousGarantie != "SG71" ?
                                                                            sg.codeSousGarantie != "SG50" ?
                                                                                sg.codeSousGarantie != "SG72" && sg.codeSousGarantie != "SG12" && sg.codeSousGarantie != "SG35" && sg.codeSousGarantie != "SG22" && sg.codeSousGarantie != "SG44" &&
                                                                                    sg.codeSousGarantie != "SG37" && sg.codeSousGarantie != "SG39" && sg.codeSousGarantie != "SG54" && sg.codeSousGarantie != "SG55" && sg.codeSousGarantie != "SG72" ?
                                                                                    sg.categorieList?.find((cat: any) => cat?.description == "plafond") ?
                                                                                        sg.categorieList?.find((cat: any) => cat?.description == "plafond").valeur != 0 ?
                                                                                            { text: Number(sg.categorieList?.find((cat: any) => cat?.description == "plafond").valeur).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD", fontSize: "8", lineHeight: 1.25, alignment: "center" }
                                                                                            : { text: "A concurrence des frais engagÃ©s", fontSize: "8", lineHeight: 1.5, alignment: "center" } : " "
                                                                                    : { text: "5% de l'indemnitÃ© avec un max de 1 000 000 DZD", fontSize: "5", lineHeight: 2, alignment: "center" }
                                                                                : { text: Number(sg.categorieList?.find((cat: any) => cat?.description == "plafond").valeur).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD  /sinistre ", fontSize: "8", lineHeight: 1.25, alignment: "center" }
                                                                            : { text: "Valeur locative annuelle des locaux avec un maximum de 1 000 000 DZD", fontSize: "5", lineHeight: 1, alignment: "center" }
                                                                        : { text: "Frais engagÃ©s max Ã  50 000 DZD", fontSize: "8", lineHeight: 1.25, alignment: "center" }
                                                                    : { text: "2 500 000 DZD/ AnnÃ©e d'assurance", fontSize: "7", lineHeight: 1.25, alignment: "center" }
                                                                : { text: "1 000 000 DZD/ AnnÃ©e d'assurance", fontSize: "7", lineHeight: 1.25, alignment: "center" }
                                                            : { text: "LimitÃ© Ã  50 000 DZD", fontSize: "8", lineHeight: 1.25, alignment: "center" }
                                                        : { text: "50 000 DZD / sinistre", fontSize: "8", lineHeight: 1.25, alignment: "center" }
                                                    : { text: Number(sg.categorieList?.find((cat: any) => cat?.description == "plafond").valeur).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD/ AnnÃ©e d'assurance ", fontSize: "8", lineHeight: 2, alignment: "center" }
                                                : { text: Number(sg.categorieList?.find((cat: any) => cat?.description == "plafond").valeur / 2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD/  /sinistre ", fontSize: "8", lineHeight: 1.25, alignment: "center" }
                                            : { text: "LimitÃ© Ã  1 000 000 DZD", fontSize: "8", lineHeight: 1.25, alignment: "center" }


                                        sg.description == "Honoraires dâexperts" ? plafond[i] = { text: "Selon barÃ¨me UAR", fontSize: "8", lineHeight: 1.5, alignment: "center" } : " "

                                        prime[i] = { text: sg.prime != null && sg.prime != '0' ? Number(sg.prime).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD" : " ", lineHeight: 1.25, fontSize: "8" }
                                        i++;

                                    })

                                    // console.log("listGarantie",g.codeGarantie)

                                    switch (g.codeGarantie) {
                                        case "G47":
                                        case "G52":
                                            franchise = { text: g.categorieList?.find((cat: any) => cat?.description == "franchise") ? "5% des dommages nets" : '', fontSize: "8", valign: 'middle' }
                                            break;
                                        case "G45":
                                        case "G53":
                                            franchise = { text: "20 000 DZD sur dommages matÃ©riels uniquement", fontSize: "8", valign: 'middle' }
                                            break;
                                            case "G46":
                                            franchise = { text: "10% des dommages avec un minimum de 20000 DZD", fontSize: "8", valign: 'middle' }
                                            break;
                                        case "G51":
                                            franchise = { text: "7 Jours", fontSize: "8", valign: 'middle' }
                                            break;

                                        default:
                                            franchise = { text: g.categorieList?.find((cat: any) => cat?.description == "franchise") ? "10% des dommages avec un minimum de " + Number(g.categorieList?.find((cat: any) => cat?.description == "franchise")?.valeur) + " DZD" : "", fontSize: "8", valign: 'middle' }
                                            break;
                                    }

                                    if (g?.sousGarantieList?.length == 0 && g?.categorieList?.length != 0) {
                                        plafond[i] = { text: g.categorieList?.find((cat: any) => cat?.description == "plafond") ? Number(g.categorieList?.find((cat: any) => cat?.description == "plafond")?.valeur).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD" : "", fontSize: "8", lineHeight: 1.25, alignment: "center" }
                                        prime[i] = { text: g.prime != null && g.prime != '0' ? Number(g.prime).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD" : " ", lineHeight: 1.25, fontSize: "8" }
                                    }


                                    return [
                                        [{ text: garantie, fontSize: "8", verticalAlignment: 'middle', colSpan: 4 }],
                                        [sGarantie ? sGarantie : null],
                                        [plafond ? plafond : null],
                                        [franchise],
                                        [prime ? prime : null]
                                    ]


                                }),
                            )
                        }
                    } : {},
                    isContratVoyage?{
                        table:  {
                            widths: ['60%', '*'], 
                            body: [
                                [
                                    { text: '(1) : Couts rÃ©els, avion sanitaire sur vols intracontinentaux uniquement.', fontSize: 7 },
                                    { text: '(2) : Cercueil minimum + frais d\'inhumation', fontSize: 7 }
                                ],
                                [
                                    { text: '(3) : Billet aller/retour classe Ã©conomique.', fontSize: 7 },
                                    { text: '(4) : Billet aller/retour classe Ã©conomique.', fontSize: 7 }
                                ],
                                [
                                    { text: '(5) : Billet retour classe Ã©conomique.', fontSize: 7, colSpan: 2 }, 
                                    {}
                                ]
                            ]
                        },
                        layout: {
                            hLineWidth: function(i:any, node:any) {
                                return (i === node.table.body.length) ? 1 : 0;
                            },
                            vLineWidth: function(i:any, node:any) {
                                return (i === 0 || i === node.table.widths.length) ? 1 : 0;
                            },
                            hLineColor:"black",
                            vLineColor:"black", 
                    },
                }:{},
                { text: "\n", },
                
             //   contrat?.produit.codeProduit == "96" ? contrat?.paramContratList?.filter((item: any) => item.codeGarantie === "J01") ?
                contrat?.produit.codeProduit == "96" ? garantieDomicile !=undefined ?
                
                    {
                        style: "table",
                        table: {
                            widths: [80, 165, 70, 90, 80],
                            headerRows: 1,
                            body: [headers2].concat(

                                garantieDomicile.map((g: any) => {                                  
                                    let garantie: any;
                                    let sGarantie: any = [];
                                    let plafond: any = [];
                                    let franchise: any = [];

                                    if (g !=undefined  && g.codeGarantie == "J01") {
                                        let i = 0;
                                        garantie = g.description
                                        g?.sousGarantieList?.map((sg: any) => {
                                            sGarantie[i] = { text: sg.description, fontSize: "10", lineHeight: 1.25 }
                                            plafond[i] = sg.categorieList?.find((cat: any) => cat?.description == "plafond") ?
                                                { text: sg.categorieList?.find((cat: any) => cat?.description == "plafond").valeur.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ") + " DZD", fontSize: "10", lineHeight: 1.25 } : " "
                                            franchise = {
                                                text: sg.categorieList?.find((cat: any) => cat?.description == "franchise").valeur ?
                                                    sg.categorieList?.find((cat: any) => cat?.description == "franchise").valeur + " DZD" : " "
                                            }

                                            i++;

                                        })
                                    }
                                    return [
                                        [{ text: garantie, fontSize: "10", colSpan: 4 }],
                                        [sGarantie ? sGarantie : null],
                                        [plafond ? plafond : null],
                                        [{ text: "03 interventions / garantie / An", fontSize: "10" }],
                                        [{ text: "Un dÃ©lai de carence d\'un mois Ã  compter de la date d\'effet du contrat", fontSize: "10" }],

                                    ]


                                }),
                            )
                        }

                    } : {} : {},

                /*    contrat?.produit.codeProduit == "96" ?
                   {
                    style: 'table',
                    //text: 'Clauses Assurance '+contrat?.produit?.description.toUpperCase()+' AXA AlgÃ©rie',
                    fontSize: 14,
                    color: 'black',
                    bold: true,
                    alignment: "center"
                    }:{},
                    */
                risqueListVehicule?.length != 0 ?
                    {
                        style: "table",
                        table: {
                            widths: ["*", "*"],
                            body: [
                                [
                                    {
                                        stack: [
                                            { text: `Etendue gÃ©ographique \n \n`, bold: true, fontSize: "8" },
                                            { text: `L'assurance du prÃ©sent contrat produit ses effets exclusivement sur le territoire AlgÃ©rien. \n \n`, fontSize: "6", alignment: 'justify' },

                                            { text: `Usages \n \n`, bold: true, fontSize: "8" },

                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '100' || contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '101' ? `Clauses U1 - Usage Â«affaire - fonctionnaireÂ» \n` : "", bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '100' || contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '101' ? `Le souscripteur dÃ©clare expressÃ©ment que le vÃ©hicule, objet de l'assurance n'est pas utilisÃ© commercialement, mÃªme Ã  titre exceptionnel pour le transport ou la livraison de produits ou de marchandises ou pour le transport onÃ©reux de personnes. \n \n` : "", fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '107' ? `Clause U2 - Usage Â«transport public de marchandisesÂ» \n` : "", bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '107' ? `Le souscripteur dÃ©clare expressÃ©ment que le vÃ©hicule, objet de l'assurance, sert au transport de produits ou de marchandises. \n \n` : '', fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '108' ? `Clause U3 - Usage Â«transport public de voyageursÂ» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '108' ? `Le souscripteur dÃ©clare expressÃ©ment utiliser le vÃ©hicule, objet de l'assurance pour le transport de voyageurs et que ce vÃ©hicule est Ã©quipÃ© de places rÃ©guliÃ¨rement amÃ©nagÃ©es pour le transport des voyageurs, le nombre de places figurant sur la carte grise du vÃ©hicule. \n \n` : '', fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '105' ? `Clause U4 - Usage Â«location-autoÂ» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '105' ? `Le souscripteur dÃ©clare expressÃ©ment que le vÃ©hicule objet de l'assurance est louÃ©, avec ou sans chauffeur, qu'il sert Ã  la promenade, au tourisme ou Ã  l'exercice d'une profession. \n \n` : '', fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '103' ? `Clause U5 - Usage Â«auto-Ã©coleÂ» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '103' ? `Le souscripteur dÃ©clare expressÃ©ment que le vÃ©hicule dÃ©signÃ© au contrat sert Ã  donner des leÃ§ons de conduite et qu'il est muni d'une double commande. \n \n` : '', fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '104' ? `Clause U6 - Usage Â«taxiÂ» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '104' ? `Le souscripteur dÃ©clare expressÃ©ment que le vÃ©hicule est utilisÃ© pour des besoins de transport de personnes Ã  titre onÃ©reux. \n \n` : '', fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '102' ? `Clause U7 - Usage Â«commerce & commerce-cbisÂ» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '102' ? `Le souscripteur dÃ©clare expressÃ©ment que le vÃ©hicule est utilisÃ© pour les besoins d'une activitÃ© commerciale. \n \n` : '', fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '109' ? `Clause U9 - Usage Â«vÃ©hicules spÃ©ciauxÂ» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P52')?.reponse?.idParamReponse?.code == '109' ? `Le souscripteur dÃ©clare expressÃ©ment que le vÃ©hicule, objet de l'assurance, est utilisÃ© pour des besoins privÃ©s ou pour les besoins d'une profession ou d'une activitÃ©, Ã  l'exclusion du transport de personnes Ã  titre onÃ©reux. \n \n` : '', fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.pack?.codePack != 'B2' ? `Franchises \n \n` : '', bold: true, fontSize: "8" },
                                            { text: contrat?.pack?.codePack != 'B2' ? `Est le montant qui reste Ã  la charge de l'assurÃ© en cas de sinistre. \n \n` : '', fontSize: "6" },

                                            { text: contrat?.pack?.codePack == 'S2' || contrat?.pack?.codePack == 'SV' ? `Clause F1 - Franchises sur le risque Â«dommages collisionÂ» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                text: contrat?.pack?.codePack == 'S2' || contrat?.pack?.codePack == 'SV' ? `Cette garantie comporte une franchise mentionnÃ©e dans le tableau des garanties. L'indemnitÃ©, franchise dÃ©duite, ne peut Ãªtre supÃ©rieure Ã  la valeur assurÃ©e qui constitue l'engagement maximum de la Compagnie.
                                En cas de rÃ¨glement de sinistre, cette franchise reste obligatoirement Ã  la charge de l'assurÃ©(e) et sera dÃ©duite de l'indemnitÃ© dÃ©finitive. \n\n`: '', fontSize: "6", alignment: 'justify'
                                            },

                                            { text: contrat?.pack?.codePack == 'F2' ? `Clause F2- Franchises sur le risque Â«dommages tous accidents Â» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                text: contrat?.pack?.codePack == 'F2' ? `La garantie Â« Dommages Tous Accidents Â» comporte une franchise mentionnÃ©e dans le tableau des garanties L'indemnitÃ©, franchise dÃ©duite, ne peut Ãªtre supÃ©rieure Ã  la valeur assurÃ©e qui constitue l'engagement maximum de la Compagnie.
                                En cas de rÃ¨glement de sinistre, cette franchise reste obligatoirement Ã  la charge de l'assurÃ©(e) et sera dÃ©duite de l'indemnitÃ© dÃ©finitive.
                                Il est entendu que l'assurÃ© est redevable de la moitiÃ© du montant de la franchise convenue au tableau des garanties au cas oÃ¹ il communique, sur le constat amiable, toutes les informations du (des) tiers associÃ© (s) Ã  son accident. \n\n`: '', fontSize: "6", alignment: 'justify'
                                            },

                                            { text: contrat?.pack?.codePack == 'FL' ? `Clause F3- Franchises sur le risque Â« Dommages Tous Accidents LimitÃ©e Â» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                text: contrat?.pack?.codePack == 'FL' ? `La garantie Â« Dommages Tous Accidents LimitÃ©e Â» comporte une franchise mentionnÃ©e dans le tableau des garanties L'indemnitÃ©, franchise dÃ©duite, ne peut Ãªtre supÃ©rieure Ã  la valeur assurÃ©e qui constitue l'engagement maximum de la Compagnie.
                                En cas de rÃ¨glement de sinistre, cette franchise reste obligatoirement Ã  la charge de l'assurÃ©(e) et sera dÃ©duite de l'indemnitÃ© dÃ©finitive.
                                Il est entendu que l'assurÃ© est redevable de la moitiÃ© du montant de la franchise convenue au tableau des garanties au cas oÃ¹ il communique, sur le constat amiable, toutes les informations du (des) tiers associÃ© (s) Ã  son accident. \n\n`: '', fontSize: "6", alignment: 'justify'
                                            },

                                            { text: `Divers \n \n`, bold: true, fontSize: "8" },

                                            //   { text: `Clause D1 - Paiement fractionnÃ© \n`, bold: true, fontSize: "6" },
                                            //   { text: `En cas de fractionnement de la prime pour les polices renouvelables par tacite reconduction, le souscripteur ne pourra pas rÃ©silier le contrat Ã  une Ã©chÃ©ance autre que l'Ã©chÃ©ance anniversaire du contrat, exception faite des cas de cession ou de perte totale du vÃ©hicule.
                                            //   Il est entendu que l'Ã©chÃ©ance anniversaire ouvrant droit pour les parties Ã  la facultÃ© de rÃ©siliation prÃ©vue aux conditions gÃ©nÃ©rales est celle indiquÃ©e au recto des prÃ©sentes conditions particuliÃ¨res, dans le champ Â« rÃ©fÃ©rences du contrat Â».\n\n`, fontSize: "6", alignment: 'justify' },

                                            { text: `Clause D2- DÃ©lÃ©gation \n`, bold: true, fontSize: "6" },
                                            {
                                                text: `En cas de perte totale du vÃ©hicule assurÃ© ayant Ã©tÃ© achetÃ© Ã  crÃ©dit, l'indemnitÃ© ne saurait Ãªtre effectuÃ© qu'entre les mains d'un reprÃ©sentant de l'organisme de crÃ©dit hors de la prÃ©sence et sans le concours de l'assurÃ©(e).
                                Le droit pour la compagnie d'assurance de rÃ©silier le contrat lors de toute infraction constatÃ©e demeure entier, mais en ce qui concerne l'assurÃ© (crÃ©ancier susnommÃ©), cette rÃ©siliation ne prendra effet qu'un mois aprÃ¨s la notification qui lui sera destinÃ©e par lettre recommandÃ©e Ã  son domicile dÃ©signÃ© dans le contrat \n\n`, fontSize: "6"
                                            },

                                            { text: `Clause D3 -DurÃ©e ferme \n`, bold: true, fontSize: "6" },
                                            { text: `Le prÃ©sent contrat est souscrit pour la durÃ©e ferme indiquÃ©e aux conditions particuliÃ¨res. Il expire de plein droit et sans autre avis Ã  la date mentionnÃ©e dans la rubrique Â« d'expiration Â» Ã  minuit. \n\n`, fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G05') ? `Clause D4 - Vol d'autoradio \n` : "", bold: true, fontSize: "6" },
                                            {
                                                text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G05') ? `Moyennant une prime additionnelle, la garantie s'exerce en cas de vol d'autoradio Ã  concurrence de sa valeur dÃ©clarÃ©e. La garantie ne pourra s'appliquer qu'Ã  condition qu'il y ait effraction du vÃ©hicule.
                                La valeur de l'autoradio du vÃ©hicule est Ã©gale Ã  la valeur dÃ©clarative Ã  la souscription avec un montant maximum mentionnÃ©e dans le tableau des garanties. \n\n`: "", fontSize: "6", alignment: 'justify'
                                            },

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G10') ? `Clause D5 - Protection FinanciÃ¨re \n` : "", bold: true, fontSize: "6" },
                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G10') ? `Cette garantie couvre le prÃ©judice subi en pertes directes et indirectes, dÃ©passant la valeur vÃ©nale en cas de perte totale ou vÃ©hicule irrÃ©parable. Cette indemnitÃ© est plafonnÃ©e Ã  hauteur du capital mentionnÃ©. \n\n` : "", fontSize: "6", alignment: 'justify' },

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G09') ? `Clause D6 - Protection Juridique \n` : "", bold: true, fontSize: "6" },
                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G09') ? `En cas de conflit engageant le vÃ©hicule assurÃ©, l'assurÃ©(e) dispose de l'assistance d'un avocat ou d'un cabinet agrÃ©Ã© par la Compagnie afin de le conseiller et essayer de rÃ©soudre Ã  l'amiable ou judiciairement tout conflit liÃ© aux transactions commerciales de son vÃ©hicule. Les frais des honoraires du cabinet agrÃ©Ã© seront pris en charge par la Compagnie Ã  hauteur la limitÃ© mentionnÃ©e dans le tableau des garanties. \n\n` : "", fontSize: "6", alignment: 'justify' },

                                            { text: `Clause D9 - DÃ©fense et Recours \n`, bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: `Au titre de la garantie dÃ©fense et recours , l'assureur n'engage aucun recours auprÃ¨s du tiers responsable dans le cas oÃ¹ les dommages ne dÃ©passent pas le montant de 5000 DA. \n\n`, fontSize: "6", alignment: 'justify' },

                                            { text: `Clause D10 - Limite annuelle d'indemnisation \n`, bold: true, fontSize: "6", alignment: 'justify' },
                                            { text: `Au titre des garanties suivantes : Bris de glaces, Protection du conducteur & des passagers, le total annuel des indemnisations ne peut excÃ©der 1,5 fois la limite maximum par sinistre.
                                                Au titre de la garantie Dommages Collision, le total annuel des indemnisations ne peut excÃ©der le plafond mentionnÃ© dans le tableau des garanties\n\n`, fontSize: "6", alignment: 'justify' },

                                            { text: `Clause D11 - bonus malus : \n`, bold: true, fontSize: "6" },
                                            {
                                                text: `ConformÃ©ment aux dispositions de l'article 25 des conditions gÃ©nÃ©rales, la clause de bonus-malus dite aussi rÃ©duction- majoration, consiste Ã  appliquer un coefficient sur la prime de rÃ©fÃ©rence en fonction des accidents que vous occasionnez et/ou dÃ©clarez.
                                Quand et comment Ã©volue votre coefficient de bonus-malus ?
                                - Il Ã©volue chaque annÃ©e, Ã  l'Ã©chÃ©ance anniversaire de votre contrat ; 
                                - C'est un coefficient appliquÃ© sur plusieurs garanties (hors garantie responsabilitÃ© civile ou garanties dont la prime est rÃ©glementÃ©e)
                                - Il est initialement Ã©gal Ã  (01) pour un conducteur qui n'a jamais Ã©tÃ© assurÃ© ou dont l'historique de sinistralitÃ© est inconnu
                                - Il est infÃ©rieur Ã  (01) si vous avez du bonus et supÃ©rieur Ã  (01) si vous avez du malus
                                Vous avez Ã©tÃ© responsable d'un accident ou avez dÃ©clarÃ© plusieurs sinistres ?
                                - Un malus (majoration) qui ne peut dÃ©passer 200% s'applique sur le tarif en vigueur.
                                Une annÃ©e sans accident responsable et sous rÃ©serve des dispositions rÃ©gissant le malus ?
                                - Vous bÃ©nÃ©ficiez d'un bonus qui ne peut dÃ©passer 10% du tarif en vigueur.\n\n`, fontSize: "6", alignment: 'justify'
                                            },

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G17') ? `RÃ¨gles d'indemnisation \n \n` : '', bold: true, fontSize: "8" },
                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G17') ? `Clause R1 -Indemnisations au titre de la garantie Â«Protection du Conducteur & des PassagersÂ» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G17') ? `En cas d'IncapacitÃ© Permanente Partielle (IPP) du conducteur et/ou des passagers du vÃ©hicule assurÃ©, un capital est versÃ© Ã  chacun des blessÃ©s proportionnellement Ã  son taux d'IPP arrÃªtÃ© par le mÃ©decin conseil avec un plafond maximum mentionnÃ©e dans le tableau des garanties par victime et sinistre.
                                Si le total des indemnitÃ©s calculÃ©es est supÃ©rieur Ã  la prÃ©cÃ©dente limite, une rÃ¨gle proportionnelle est applicable pour chacune des victimes dans la limite mentionnÃ©e dans le tableau des garanties.
                                Une franchise de 15% est dÃ©duite du taux d'incapacitÃ© arrÃªtÃ© avant calcul de l'indemnitÃ©.
                                Les frais mÃ©dicaux et d'hospitalisation sont limitÃ©s selon la limitÃ© mentionnÃ©e dans le tableau des garanties par sinistre.`: '', fontSize: "6"
                                            },
                                        ]
                                    },
                                    {
                                        stack: [
                                            { text: !contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G17') ? `RÃ¨gles d'indemnisation \n \n` : '', bold: true, fontSize: "8" },
                                            {
                                                text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G17') ? `Le nombre de personnes transportÃ©es dans le vÃ©hicule assurÃ© ne doit pas excÃ©der le nombre de places prÃ©vues par le constructeur. Dans le cas contraire, la Compagnie prendra en charge, en cas d'accident, toutes les victimes transportÃ©es par le vÃ©hicule assurÃ©, proportionnellement au nombre de places autorisÃ©es.
                                Les indemnitÃ©s versÃ©es au titre de la garantie Â« ResponsabilitÃ© Civile Â» par la Compagnie ou par les Compagnies adverses seront dÃ©duites des indemnitÃ©s dues au titre des frais mÃ©dicaux et d'hospitalisation.
                                En cas de DÃ©cÃ¨s ou d'InvaliditÃ© Absolue ou DÃ©finitive (IAD) de l'assurÃ©(e) et/ou des passagers du vÃ©hicule assurÃ© Ã  la suite d'un accident, un capital mentionnÃ© dans le tableau des garanties est versÃ© dans la limitÃ© mentionnÃ©e dans le tableau des garanties aux ayants droits prÃ©vus par la FrÃ©dha ou au(x) bÃ©nÃ©ficiaire(s), Ã  parts Ã©gales, dÃ©signÃ©(s) par le souscripteur. \n\n`: '', fontSize: "6"
                                            },

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G15') ? `Clause R2 -Indemnisations au titre de la garantie Â« Protection Famille Â» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G15') ? `En cas de DÃ©cÃ¨s ou d'IAD Ã  la suite d'un accident, la Compagnie indemnise l'assurÃ© au titre de la garantie Â« Protection Famille Â» d'un capital mentionnÃ© dans le tableau des garanties, sera rÃ©parti Ã  parts Ã©gales au(x) bÃ©nÃ©ficiaire(s) dÃ©signÃ©(s) par l'assurÃ©(e) lors de la souscription du contrat ou Ã  ses ayants droits prÃ©vus par la FrÃ©dha. Ce capital est cumulable Ã  tout autre capital ayant Ã©tÃ© versÃ© au titre du prÃ©sent contrat
                                Cas ou l'assurÃ© serait une personne morale
                                Dans le cas oÃ¹ l'assurÃ© est une personne morale, les indemnisations relatives Ã  la garantie Â« Protection famille Â», s'appliquent aux ayants droit du conducteur principal mentionnÃ© dans le contrat d'assurance. \n\n`: '', fontSize: "6"
                                            },

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G07') || contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G13') ? `Conditions de prise en charge dans le cadre de la garantie Â«Dommages CollisionÂ» \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G07') || contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G13') ? `Les parties conviennent que la prise en charge du sinistre ne peut se faire qu'Ã  condition de l'identification du tiers comme le prÃ©voit les conditions gÃ©nÃ©rales. Nonobstant toute disposition contraire, les parties conviennent aussi que le remboursement du montant du dommage s'effectue selon les conditions suivantes :
                                (i) Ã  hauteur de la limite de garantie fixÃ©e aux prÃ©sentes conditions particuliÃ¨res dans les dÃ©lais fixÃ©s dans les conditions gÃ©nÃ©rales et (ii) au-delÃ  de ce montant, le complÃ©ment sera versÃ© aprÃ¨s rÃ©ception de ce dit complÃ©ment du montant du sinistre de la sociÃ©tÃ© d'assurance adverse suite Ã  la procÃ©dure de recours en vigueur au niveau du secteur des assurances. \n\n`: '', fontSize: "6"
                                            },

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11') ? `Assistance \n \n` : '', bold: true, fontSize: "8" },
                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11') ? `Clause A1 - Etendue gÃ©ographique et vÃ©hicule garanti \n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11') ? `Etendue gÃ©ographique : Les garanties Assistance aux vÃ©hicules et Assistance aux personnes du prÃ©sent contrat produisent leurs effets exclusivement sur le territoire AlgÃ©rien.
                                VÃ©hicule Garanti : Le vÃ©hicule destinÃ© au transport de personnes et de marchandises dont le poids total autorisÃ© en charge est infÃ©rieur Ã  3,5 tonnes, Ã¢gÃ© de moins de 12 ans pour les cas de panne et sans limite d'Ã¢ge pour les accidents, vols et incendies, 
                                DÃ©finition de la franchise KilomÃ©trique :
                                Distance mentionnÃ©e aux Conditions ParticuliÃ¨res corresÂ¬pondant Ã  un rayon Ã  partir du pÃ©rimÃ¨tre urbain de la ville de rÃ©sidence de l4assurÃ©, sur laquelle la garantie remorÂ¬quage ou dÃ©pannage sur place ne s4applique pas. \n\n`: '', fontSize: "6"
                                            },

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '25' ? `Clause A2 - Limites de garanties : \n\n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                fontSize: "6",
                                                ul: [
                                                    { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '25' ? `Formule Assistance Basic` : '', bold: true, fontSize: "6" },
                                                ]
                                            },
                                            contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '25' ?
                                                {

                                                    style: "table",
                                                    table: {
                                                        widths: ["*", "*"],
                                                        alignment: "left",
                                                        body: [
                                                            [
                                                                {
                                                                    text: `Assistance aux vÃ©hicules`,
                                                                    colSpan: 2,
                                                                    fontSize: "6",
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise kilomÃ©trique en cas de panne (en km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `25`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. DÃ©pannage/remorquage en cas de panne ou d'accident (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `7 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Extraction du vÃ©hicule assurÃ© Ã  l'aide d'une grue (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `7 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Retour des bÃ©nÃ©ficiaires/poursuite de voyage`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Prise en charge des frais d'hÃ©bergement Ã  l'hÃ´tel (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `5 000/nuitÃ©e`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. SÃ©jour et dÃ©placement des bÃ©nÃ©ficiaires par suite du vol du vÃ©hicule (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `5 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Gardiennage et rÃ©cupÃ©ration du vÃ©hicule aprÃ¨s rÃ©paration (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `3 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `7. Service d'un chauffeur professionnel`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `8. Perte ou Vol des clÃ©s`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `9. Remplacement de roue en cas de crevaison`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `Assistance aux Personnes`,
                                                                    fontSize: "6",
                                                                    colSpan: 2,
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise KilomÃ©trique (en Km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. Transport sanitaire`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Transport des bÃ©nÃ©ficiaires accompagnateurs`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Rapatriement de corps`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Visite d'un proche parent en cas d'hospitalisation de plus de sept jours du bÃ©nÃ©ficiaire (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. Interruption de voyage Ã  la suite du dÃ©cÃ¨s d'un proche parent en AlgÃ©rie`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Transmission de messages urgents`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                        ],
                                                    }
                                                } : {},

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '15' ? `Clause A2 - Limites de garanties : \n\n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                fontSize: "6",
                                                ul: [
                                                    { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '15' ? `Formule Assistance Classic` : '', bold: true, fontSize: "6" },
                                                ]
                                            },
                                            contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '15' ?
                                                {

                                                    style: "table",
                                                    table: {
                                                        widths: ["*", "*"],
                                                        alignment: "left",
                                                        body: [
                                                            [
                                                                {
                                                                    text: `Assistance aux vÃ©hicules`,
                                                                    colSpan: 2,
                                                                    fontSize: "6",
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise kilomÃ©trique en cas de panne (en km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `15`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. DÃ©pannage/remorquage en cas de panne ou d'accident (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `10 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Extraction du vÃ©hicule assurÃ© Ã  l'aide d'une grue (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `7 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Retour des bÃ©nÃ©ficiaires/poursuite de voyage`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Prise en charge des frais d'hÃ©bergement Ã  l'hÃ´tel (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `5 000/nuitÃ©e`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. SÃ©jour et dÃ©placement des bÃ©nÃ©ficiaires par suite du vol du vÃ©hicule (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `5 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Gardiennage et rÃ©cupÃ©ration du vÃ©hicule aprÃ¨s rÃ©paration (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `3 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `7. Service d'un chauffeur professionnel`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `8. Perte ou Vol des clÃ©s`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `9. Remplacement de roue en cas de crevaison`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `Assistance aux Personnes`,
                                                                    fontSize: "6",
                                                                    colSpan: 2,
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise KilomÃ©trique (en Km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. Transport sanitaire`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Transport des bÃ©nÃ©ficiaires accompagnateurs`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Rapatriement de corps`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Visite d'un proche parent en cas d'hospitalisation de plus de sept jours du bÃ©nÃ©ficiaire (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. Interruption de voyage Ã  la suite du dÃ©cÃ¨s d'un proche parent en AlgÃ©rie`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Transmission de messages urgents`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                        ],
                                                    }
                                                } : {},

                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '5' ? `Clause A2 - Limites de garanties : \n\n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                fontSize: "6",
                                                ul: [
                                                    { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '5' ? `Formule Assistance Essentiel` : '', bold: true, fontSize: "6" },
                                                ]
                                            },
                                            contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '5' ?
                                                {

                                                    style: "table",
                                                    table: {
                                                        widths: ["*", "*"],
                                                        alignment: "left",
                                                        body: [
                                                            [
                                                                {
                                                                    text: `Assistance aux vÃ©hicules`,
                                                                    colSpan: 2,
                                                                    fontSize: "6",
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise kilomÃ©trique en cas de panne (en km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `5`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. DÃ©pannage/remorquage en cas de panne ou d'accident (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `15 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Extraction du vÃ©hicule assurÃ© Ã  l'aide d'une grue (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `7 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Retour des bÃ©nÃ©ficiaires/poursuite de voyage`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Prise en charge des frais d'hÃ©bergement Ã  l'hÃ´tel (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `10 000/nuitÃ©e`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. SÃ©jour et dÃ©placement des bÃ©nÃ©ficiaires par suite du vol du vÃ©hicule (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `10 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Gardiennage et rÃ©cupÃ©ration du vÃ©hicule aprÃ¨s rÃ©paration (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `3 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `7. Service d'un chauffeur professionnel`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `8. Perte ou Vol des clÃ©s`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `9. Remplacement de roue en cas de crevaison`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `Assistance aux Personnes`,
                                                                    fontSize: "6",
                                                                    colSpan: 2,
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise KilomÃ©trique (en Km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `50`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. Transport sanitaire`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Transport des bÃ©nÃ©ficiaires accompagnateurs`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Rapatriement de corps`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `40 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Visite d'un proche parent en cas d'hospitalisation de plus de sept jours du bÃ©nÃ©ficiaire (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `10 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. Interruption de voyage Ã  la suite du dÃ©cÃ¨s d'un proche parent en AlgÃ©rie`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Transmission de messages urgents`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                        ],
                                                    }
                                                } : {},
                                            { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '0' ? `Clause A2 - Limites de garanties : \n\n` : '', bold: true, fontSize: "6", alignment: 'justify' },
                                            {
                                                fontSize: "6",
                                                ul: [
                                                    { text: contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '0' && contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P24')?.reponse?.idParamReponse?.code != 'R17' ? `Formule Assistance Plus` : '', bold: true, fontSize: "6" },
                                                ]
                                            },
                                            contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '0' && contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P24')?.reponse?.idParamReponse?.code != 'R17' ?
                                                {

                                                    style: "table",
                                                    table: {
                                                        widths: ["*", "*"],
                                                        alignment: "left",
                                                        body: [
                                                            [
                                                                {
                                                                    text: `Assistance aux vÃ©hicules`,
                                                                    colSpan: 2,
                                                                    fontSize: "6",
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise kilomÃ©trique en cas de panne (en km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `0`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. DÃ©pannage/remorquage en cas de panne ou d'accident (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `15 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Extraction du vÃ©hicule assurÃ© Ã  l'aide d'une grue (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `7 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Retour des bÃ©nÃ©ficiaires/poursuite de voyage`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Prise en charge des frais d'hÃ©bergement Ã  l'hÃ´tel (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `10 000/nuitÃ©e`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. SÃ©jour et dÃ©placement des bÃ©nÃ©ficiaires par suite du vol du vÃ©hicule (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `10 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Gardiennage et rÃ©cupÃ©ration du vÃ©hicule aprÃ¨s rÃ©paration (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `3 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `7. Service d'un chauffeur professionnel`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `8. Perte ou Vol des clÃ©s`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `9. Remplacement de roue en cas de crevaison`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Non Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `Assistance aux Personnes`,
                                                                    fontSize: "6",
                                                                    colSpan: 2,
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise KilomÃ©trique (en Km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `50`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. Transport sanitaire`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Transport des bÃ©nÃ©ficiaires accompagnateurs`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Rapatriement de corps`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `60 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Visite d'un proche parent en cas d'hospitalisation de plus de sept jours du bÃ©nÃ©ficiaire (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `20 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. Interruption de voyage Ã  la suite du dÃ©cÃ¨s d'un proche parent en AlgÃ©rie`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Transmission de messages urgents`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                        ],
                                                    }
                                                } : {},

                                            {
                                                fontSize: "6",
                                                ul: [
                                                    { text: contrat?.pack?.codePack == 'F2' && contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P24')?.reponse?.idParamReponse?.code == 'R17' && contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '0' ? `Formule Assistance Assur'ELLE` : '', bold: true, fontSize: "6" },
                                                ]
                                            },
                                            contrat?.pack?.codePack == 'F2' && contrat?.risqueList?.find((risque: any) => risque?.codeRisque == 'P24')?.reponse?.idParamReponse?.code == 'R17' && contrat?.paramContratList?.find((param: any) => param?.codeGarantie == 'G11')?.categorieList[0]?.valeur == '0' ?
                                                {

                                                    style: "table",
                                                    table: {
                                                        widths: ["*", "*"],
                                                        alignment: "left",
                                                        body: [
                                                            [
                                                                {
                                                                    text: `Assistance aux vÃ©hicules`,
                                                                    colSpan: 2,
                                                                    fontSize: "6",
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise kilomÃ©trique en cas de panne (en km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `0`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. DÃ©pannage/remorquage en cas de panne ou d'accident (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `15 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Extraction du vÃ©hicule assurÃ© Ã  l'aide d'une grue (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `7 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Retour des bÃ©nÃ©ficiaires/poursuite de voyage`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Prise en charge des frais d'hÃ©bergement Ã  l'hÃ´tel (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `10 000/nuitÃ©e`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. SÃ©jour et dÃ©placement des bÃ©nÃ©ficiaires par suite du vol du vÃ©hicule (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `10 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Gardiennage et rÃ©cupÃ©ration du vÃ©hicule aprÃ¨s rÃ©paration (en dinars)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `3 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `7. Service d'un chauffeur professionnel`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `8. Perte ou Vol des clÃ©s`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `9. Remplacement de roue en cas de crevaison`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `Assistance aux Personnes`,
                                                                    fontSize: "6",
                                                                    colSpan: 2,
                                                                    style: "headerTable"
                                                                },
                                                                {}
                                                            ],
                                                            [
                                                                {
                                                                    text: `Franchise KilomÃ©trique (en Km)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `50`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `1. Transport sanitaire`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `2. Transport des bÃ©nÃ©ficiaires accompagnateurs`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `3. Rapatriement de corps`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `60 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `4. Visite d'un proche parent en cas d'hospitalisation de plus de sept jours du bÃ©nÃ©ficiaire (02 nuitÃ©es maximum/personne)`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `20 000`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `5. Interruption de voyage Ã  la suite du dÃ©cÃ¨s d'un proche parent en AlgÃ©rie`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                            [
                                                                {
                                                                    text: `6. Transmission de messages urgents`,
                                                                    fontSize: "6",
                                                                },
                                                                {
                                                                    text: `Inclus`,
                                                                    fontSize: "6",
                                                                    alignment: "center"
                                                                },
                                                            ],
                                                        ],
                                                    }
                                                } : {},

                                            { text: `\n\n Les clauses prÃ©vues dans le prÃ©sent contrat et qui ne sont pas mentionnÃ©es dans le champ Â« clauses particuliÃ¨res Â» ne s'appliquent pas au prÃ©sent contrat et ne peuvent en aucun cas Ãªtre invoquÃ©es par le souscripteur et/ou l'assurÃ©`, bold: true, fontSize: "6", alignment: 'justify' },
                                        ]
                                    },
                                ],
                            ],
                        },
                        layout: 'noBorders'
                    } : {},

                { text: `\n\nDÃCLARATION DU SOUSCRIPTEUR \n`, bold: true, fontSize: "8", alignment: 'justify', pageBreak: isContratVoyage || contrat.produit.codeProduit ? '':'before'  },
                contrat?.produit.codeProduit == "95" ?
                    {
                        text: `Je reconnais avoir reÃ§u un exemplaire des Conditions GÃ©nÃ©rales et des prÃ©sentes Conditions ParticuliÃ¨res et dÃ©clare avoir pris connaissance des textes y figurant.
                Je reconnais que les prÃ©sentes Conditions ParticuliÃ¨res ont Ã©tÃ© Ã©tablies conformÃ©ment aux rÃ©ponses que jâai donnÃ©es aux questions posÃ©es par la Compagnie lors de la souscription du contrat.
                Je reconnais avoir Ã©tÃ© prÃ©alablement informÃ©(e) du montant de la prime et des garanties du prÃ©sent contrat.
                Je reconnais avoir Ã©tÃ© informÃ©(e), au moment de la collecte dâinformations que les consÃ©quences qui pourraient rÃ©sulter dâune omission ou dâune dÃ©claration inexacte sont celles prÃ©vues par lâarticle 19 de lâordonnance nÂ°95/07 du 25 janvier 1995 relative aux assurances modifiÃ©e et complÃ©tÃ©e par la loi nÂ°06/04 du 20 fÃ©vrier 2006.
                Je reconnais Ã©galement avoir Ã©tÃ© informÃ©(e), que les informations saisies dans ce document soient, utilisÃ©es, exploitÃ©es, traitÃ©es par AXA Assurances AlgÃ©rie Dommage, transfÃ©rÃ©es Ã  lâÃ©tranger et Ã  ses sous-traitants, dans le cadre de l'exÃ©cution des finalitÃ©s de la relation commerciale, conformÃ©ment Ã  la Loi nÂ° 18-07 du 10 juin 2018 relative Ã  la protection des personnes physiques dans le traitement des donnÃ©es Ã  caractÃ¨re personnel.
                Jâautorise, Ã©galement AXA Assurances AlgÃ©rie de mâenvoyer des messages et des appels de prospections commerciales quel quâen soit le support ou la nature.
                Pour toute demande concernant le traitement et vos droits relatifs Ã  vos donnÃ©es Ã  caractÃ¨re personnel, merci de nous contacter sur lâadresse : dpo@axa.dz \n\n` , fontSize: "8", alignment: 'justify'
            } :contrat?.produit.codeProduit == "97" ?
            {
                text: `Je reconnais que les prÃ©sentes Conditions ParticuliÃ¨res ont Ã©tÃ© Ã©tablies conformÃ©ment aux rÃ©ponses que jâai donnÃ©es aux questions posÃ©es par
                 la Compagnie lors de la souscription du contrat.\n 
                   Je reconnais Ã©galement avoir Ã©tÃ© prÃ©alablement informÃ©(e) du montant de la prime et des garanties du prÃ©sent contrat.
                 Jâautorise AXA Assurances AlgÃ©rie Dommage Ã  communiquer ces informations Ã  ses mandataires, rÃ©assureurs, organismes professionnels 
                 habilitÃ©s et sous-traitants missionnÃ©s.\n
                  Je reconnais avoir Ã©tÃ© informÃ©(e), au moment de la collecte dâinformations, des consÃ©quences qui pourraient rÃ©sulter dâune omission 
                  ou dâune dÃ©claration inexacte. Application de lâarticle 19 de lâordonnance nÂ°95/07 du 25 janvier 1995 relative aux assurances modifiÃ©e et complÃ©tÃ©e par la loi 
                  nÂ°06/04 du 20 fÃ©vrier 2006. \n
                 En signant ce document, jâaccepte que les informations saisies dans ce document soient, utilisÃ©e, exploitÃ©es, traitÃ©es par AXA Assurances AlgÃ©rie Dommage, transfÃ©rÃ©es Ã  lâÃ©tranger et Ã  ses sous-traitants, dans le cadre de lâexÃ©cution des finalitÃ©s de la relation commerciale, conformÃ©ment Ã  la Loi nÂ° 18-07 du 10 juin 2018 relative Ã  la protection des personnes physiques dans le traitement des donnÃ©es Ã  caractÃ¨re personnel. Jâautorise, Ã©galement AXA Assurances AlgÃ©rie Dommage de mâenvoyer des messages et des appels de prospections commerciales quel quâen soit le support ou la nature. Pour toute demande concernant le traitement de vos donnÃ©es Ã  caractÃ¨re personnel, merci de nous contacter sur lâadresse : 
                   : dpo@axa.dz \n\n` , fontSize: "8", alignment: 'justify'
            } 

                    :isContratVoyage?[{
                        text:`Je reconnais avoir reÃ§u un exemplaire des Conditions GÃ©nÃ©rales et des prÃ©sentes Conditions ParticuliÃ¨res.
                        Je reconnais que les prÃ©sentes Conditions ParticuliÃ¨res ont Ã©tÃ© Ã©tablies conformÃ©ment aux rÃ©ponses que jâai donnÃ©es aux questions posÃ©es par la Compagnie lors de la souscription du contrat.
                        Je reconnais Ã©galement avoir Ã©tÃ© prÃ©alablement informÃ©(e) du montant de la prime et des garanties du prÃ©sent contrat.
                        Jâautorise AXA Assurances AlgÃ©rie Vie Ã  communiquer ces informations Ã  ses mandataires, rÃ©assureurs, organismes professionnels habilitÃ©s et sous-traitants missionnÃ©s.
                        Je reconnais enfin avoir Ã©tÃ© informÃ©(e), au moment de la collecte dâinformations, que les consÃ©quences qui pourraient rÃ©sulter dâune omission ou dâune dÃ©claration inexacte sont celles prÃ©vues par lâarticle 19 de lâordonnance nÂ°95/07 du 25 janvier 1995 relative aux assurances modifiÃ©e et complÃ©tÃ©e par la loi nÂ°06/04 du 20 fÃ©vrier 2006. 
                        
                        En signant ce document, jâaccepte que les informations saisies dans ce document soient, utilisÃ©e, exploitÃ©es, traitÃ©es par AXA Assurances AlgÃ©rie, transfÃ©rÃ©es Ã  lâÃ©tranger et Ã  ses sous-traitants, dans le cadre de l'exÃ©cution des finalitÃ©s de la relation commerciale, conformÃ©ment Ã  la Loi nÂ° 18-07 du 10 juin 2018 relative Ã  la protection des personnes physiques dans le traitement des donnÃ©es Ã  caractÃ¨re personnel. Jâautorise, Ã©galement AXA Assurances AlgÃ©rie de mâenvoyer des messages et des appels de prospections commerciales quel quâen soit le support ou la nature. Pour toute demande concernant le traitement de vos donnÃ©es Ã  caractÃ¨re personnel, merci de nous contacter sur lâadresse : dpo@axa.dz.
                         \n`,fontSize:8, alignment: 'justify'
                    },
            
                contrat?.produit.codeProduit == "97" ?
                {
                    text:`CLAUSE SANCTION  : `,style:'axaBold'
                }:

                    {
                        text:`Dispositif des Sanction : `,style:'axaBold'
                    },
                       contrat?.produit.codeProduit == "97" ?
                    {
                        text: `Les garanties dÃ©finies dans le prÃ©sent contrat sont rÃ©putÃ©es sans effet et lâassureur nâest pas tenu de fournir une couverture ou de verser une 
                        indemnitÃ© ou dâexÃ©cuter une prestation en vertu des prÃ©sentes dans la mesure oÃ¹ la fourniture d'une telle couverture, le paiement dâune telle indemnitÃ©
                         ou lâexÃ©cution de telles prestations exposerait lâassureur Ã  toute sanction, interdiction ou restriction en vertu des rÃ©solutions des Nations Unies ou
                          des sanctions commerciales ou Ã©conomiques, des lois et/ou des rÃ¨glements applicables en AlgÃ©rie et Ã  lâinternational notamment les lois/rÃ¨glements de
                           l'Union europÃ©enne, Royaume-Uni ou Ãtats-Unis d'AmÃ©rique en la matiÃ¨re ou toute loi applicable. \n\n` , fontSize: "8", alignment: 'justify'
                    } :

                    {
                        text:`Les garanties dÃ©finies dans le prÃ©sent contrat sont rÃ©putÃ©es sans effet et lâassureur nâest pas tenu de fournir une couverture ou de verser une indemnitÃ© ou dâexÃ©cuter une prestation en vertu des prÃ©sentes dans la mesure oÃ¹ la fourniture d'une telle couverture, le paiement dâune telle indemnitÃ© ou lâexÃ©cution de telles prestations exposerait lâassureur Ã  toute sanction, interdiction ou restriction en vertu des rÃ©solutions des Nations Unies ou des sanctions commerciales ou Ã©conomiques, des lois et/ou des rÃ¨glements applicables en AlgÃ©rie et Ã  lâinternational notamment les lois/rÃ¨glements de l'Union europÃ©enne, Royaume-Uni ou Ãtats-Unis d'AmÃ©rique en la matiÃ¨re ou toute loi applicable\n`,
                        alignment:'justify',fontSize:8
                    },
                    {text:`IMPORTANT :\n`,bold:true,fontSize:8,decoration: 'underline',},
                    {text:`LE BENEFICIAIRE EST COUVERT DANS LES MEMES CONDITIONS ET LIMITES, EN CAS DE MALADIE DâORIGINE INFECTIEUSE, DONT LA COVID 19, SOUS RESERVE DES EXCLUSIONS SPECIFIQUES PREVUES DANS LES CONDITIONS GENERALES. \n`,fontSize:8},
                    {text:`LE BÃNÃFICIARE NE POURRA PRÃTENDRE Ã AUCUN REMBOURSEMENT DE FRAIS S'IL N'A PAS, AU PRÃALABLE, REÃU L'ACCORD EXPRESS DE L'ASSISTEUR (COMMUNICATION D'UN NUMÃRO DE DOSSIER). 
                    TOUTE ANNULATION DANS UN DELAI INFERIEUR A 72 HEURES AVANT LA PRISE DâEFFET DU CONTRAT ENGENDRERA UNE PENALITE EQUIVALENTE A 25% DU MONTANT DE LA PRIME NETTE.
                    \n`,bold:true,fontSize:8},


                ]: {
                        text: `Je reconnais avoir reÃ§u un exemplaire des Conditions GÃ©nÃ©rales et des prÃ©sentes Conditions ParticuliÃ¨res et dÃ©clare avoir pris connaissance des textes y figurant.
                Je reconnais que les prÃ©sentes Conditions ParticuliÃ¨res ont Ã©tÃ© Ã©tablies conformÃ©ment aux rÃ©ponses que j'ai donnÃ©es aux questions posÃ©es par la Compagnie lors de la souscription du contrat.
                Je reconnais avoir Ã©tÃ© informÃ©(e), au moment de la collecte d'informations que les consÃ©quences qui pourraient rÃ©sulter d'une omission ou d'une dÃ©claration inexacte sont celles prÃ©vues par l'article 19 de l'ordonnance nÂ°95/07 du 25 janvier 1995 relative aux assurances modifiÃ©e et complÃ©tÃ©e par la loi nÂ°06/04 du 20 fÃ©vrier 2006.
                Je reconnais Ã©galement avoir Ã©tÃ© informÃ©(e), que les informations saisies dans ce document soient, utilisÃ©es, exploitÃ©es, traitÃ©es par AXA Assurances AlgÃ©rie Dommage, transfÃ©rÃ©es Ã  l'Ã©tranger et Ã  ses sous-traitants, dans le cadre de l'exÃ©cution des finalitÃ©s de la relation commerciale, conformÃ©ment Ã  la Loi nÂ° 18-07 du 10 juin 2018 relative Ã  la protection des personnes physiques dans le traitement des donnÃ©es Ã  caractÃ¨re personnel.
                En signant ce document, j'accepte que les informations saisies dans ce document soient, utilisÃ©e, exploitÃ©es, traitÃ©es par AXA Assurances AlgÃ©rie, transfÃ©rÃ©es Ã  l'Ã©tranger et Ã  ses sous-traitants, dans le cadre de l'exÃ©cution des finalitÃ©s de la relation commerciale, conformÃ©ment Ã  la Loi nÂ° 18-07 du 10 juin 2018 relative Ã  la protection des personnes physiques dans le traitement des donnÃ©es Ã  caractÃ¨re personnel. 
                J'autorise, Ã©galement AXA Assurances AlgÃ©rie de m'envoyer des messages et des appels de prospections commerciales quel qu'en soit le support ou la nature.
                Pour toute demande concernant le traitement et vos droits relatifs Ã  vos donnÃ©es Ã  caractÃ¨re personnel, merci de nous contacter sur l'adresse : dpo@axa.dz \n\n`, fontSize: "8", alignment: 'justify'
                    },
                    sessionStorage.getItem("roles")?.includes("COURTIER") ? 
                    {
                        text: [
                          'Je donne par le prÃ©sent mandat Ã  ',
                          { text: `${contrat.agence.raisonSocial}`, bold: true },
                          ' En tant que SociÃ©tÃ© de Courtage en assurances, Ã  lâeffet de nÃ©gocier et gÃ©rer pour mon compte auprÃ¨s des compagnies dâassurances aux meilleures conditions de garanties et de tarifs, en veillant Ã  la dÃ©fense de mes intÃ©rÃªts pendant toute la durÃ©e de lâassurance depuis la confection du contrat, quâÃ  lâoccasion des rÃ¨glements des sinistres. Le prÃ©sent mandat prend effet Ã  la date de signature du prÃ©sent, et demeure valable tant quâil nâa pas Ã©tÃ© dÃ©noncÃ© expressÃ©ment par mes soins conformÃ©ment Ã  la lÃ©gislation en vigueur \n\n'
                        ],
                        fontSize: 8,
                        alignment: 'justify'
                      }:{},
                risqueListVehicule?.length != 0 ?
                    { text: `BÃNÃFICIAIRES DESIGNES EN CAS DE DÃCÃS \n\n`, bold: true, fontSize: "8", alignment: 'justify' } : {},
                    isContratVoyage || contrat.produit.codeProduit == "20G"?{}:risqueListVehicule?.length != 0 ?
                    { text: `Noms et PrÃ©noms des bÃ©nÃ©ficiaires`, bold: true, fontSize: "8", alignment: 'justify' } : {
                        text: `Etant assurÃ©(e) je dÃ©clare ce qui suit :`, bold: true, fontSize: "8", alignment: 'justify'
                    },
                    isContratVoyage || contrat.produit.codeProduit == "20G"?{}: risqueListVehicule?.length != 0 ?
                    {
                        style: "table",
                        table: {
                            widths: ["*", "*"],
                            body: [
                                [
                                    {
                                        text: [
                                            { text: `BÃ©nÃ©ficiaire A :  ________________________\n`, fontSize: "8" },
                                            { text: `BÃ©nÃ©ficiaire B :  ________________________\n`, fontSize: "8" },
                                            { text: `BÃ©nÃ©ficiaire C :  ________________________\n`, fontSize: "8" },
                                            { text: `BÃ©nÃ©ficiaire D :  ________________________`, fontSize: "8" },
                                        ]
                                    },
                                    {
                                        text: [
                                            { text: `BÃ©nÃ©ficiaire E :   ________________________\n`, fontSize: "8" },
                                            { text: `BÃ©nÃ©ficiaire F :   ________________________\n`, fontSize: "8" },
                                            { text: `BÃ©nÃ©ficiaire G :   ________________________\n`, fontSize: "8" },
                                            { text: `BÃ©nÃ©ficiaire H :   ________________________`, fontSize: "8" },
                                        ]
                                    }
                                ],
                            ],
                        },
                        layout: 'noBorders'
                    } : contrat?.produit.codeProduit == "95" ?
                        {
                            text: `â¢ Les locaux assurÃ©s sont exclusivement Ã  usage dâactivitÃ©.
                    â¢ La durÃ©e dâinoccupation des locaux durant lâannÃ©e est infÃ©rieure Ã  45 jours (en une ou plusieurs pÃ©riodes).
                    â¢ Les locaux sont construits et couverts pour plus de 75% en matÃ©riaux durs.
                    â¢ La superficie des locaux assurÃ©s nâexcÃ¨de pas 2500 mÂ².
                    â¢ Dans les locaux assurÃ©s, il nâest pas entreposÃ© plus de 500 litres de liquides inflammables ou de gaz combustibles.
                    â¢ Le nombre dâemployÃ©s ne dÃ©passe pas quarante-neuf (49) personnes, y compris le chef dâentreprise.
                    â¢ Les marchandises entreposÃ©es ne sont pas constituÃ©es de produits dangereux ou hautement inflammables.
                    NB : Tout sinistre jugÃ© antÃ©rieur Ã  la souscription Ã  dire de notre expert, sera soit exclu de lâindemnitÃ©, soit rÃ©glÃ© proportionnellement aux
                    dommages causÃ©s ultÃ©rieurement Ã  la date dâeffet du contrat.`,
                            fontSize: "8",
                            color: 'black',
                        }
                        : contrat?.produit.codeProduit != "97" ?{
                            text: "â¢ Les locaux assurÃ©s sont exclusivement Ã  usage d'habitation.\n â¢ La durÃ©e d'inoccupation des locaux durant l'annÃ©e est infÃ©rieure Ã  90 jours (en une ou plusieurs pÃ©riodes).\n  â¢ Les locaux sont construits et couverts pour plus de 85% en matÃ©riaux durs.\n NB : Tout sinistre jugÃ© antÃ©rieur Ã  la souscription Ã  la suite d'une expertise Ã©tablie par un expert mandatÃ© par la compagnie , sera soit exclu de l'indemnitÃ©, soit rÃ©glÃ© proportionnellement aux dommages causÃ©s ultÃ©rieurement Ã  la date d'effet du contrat.",
                            fontSize: "8",
                            color: 'black',
                        }:{},
                        {
                            text: contrat?.produit.codeProduit == "97" ? 
                                `CLAUSE SANCTION :\n
                                Les garanties dÃ©finies dans le prÃ©sent contrat sont rÃ©putÃ©es sans effet et lâassureur nâest pas tenu de fournir une couverture ou de
                                verser une indemnitÃ© ou dâexÃ©cuter une prestation en vertu des prÃ©sentes dans la mesure oÃ¹ la fourniture d'une telle couverture, le
                                paiement dâune telle indemnitÃ© ou lâexÃ©cution de telles prestations exposerait lâassureur Ã  toute sanction, interdiction ou restriction
                                en vertu des rÃ©solutions des Nations Unies ou des sanctions commerciales ou Ã©conomiques, des lois et/ou des rÃ¨glements
                                applicables en AlgÃ©rie et Ã  lâinternational notamment les lois/rÃ¨glements de l'Union europÃ©enne, Royaume-Uni ou Ãtats-Unis
                                d'AmÃ©rique en la matiÃ¨re ou toute loi applicable.\n\n` :
                                '',
                            fontSize: "8",
                            color: 'black'
                        },


                { text: `\n\nFait Ã  ${contrat?.agence?.wilaya} Le ${moment(contrat?.auditDate)?.format('DD/MM/YYYY')}\n\n`, bold: true, fontSize: "8" },
                {
                    layout: 'noBorders',
                    table: {
                        widths: ["*", "*"],
                        alignment: "center",
                        body: [
                            [
                                contrat?.produit.codeProduit == "97" ?
                                {
                                    text: [
                                        { text:isContratVoyage?`Signature du souscripteur(trice) : \n`: `\n`, bold: true, fontSize: "8" },
                                        { text: `PrÃ©cÃ©dÃ©e de la mention Â« Lu et approuvÃ© Â»\n`, fontSize: "8" },
                                    ],
                                    alignment: 'left'
                                }:

                                {
                                    text: [
                                        { text:isContratVoyage?`Signature du souscripteur(trice) : \n`: `Signature de l'assurÃ©(e)\n`, bold: true, fontSize: "8" },
                                        { text: `PrÃ©cÃ©dÃ©e de la mention Â« Lu et approuvÃ© Â»\n`, fontSize: "8" },
                                    ],
                                    alignment: 'left'
                                },
                                contrat?.produit.codeProduit == "97" ?

                                {
                                    text: `Pour l'agence:`, bold: true, fontSize: "8",
                                    alignment: 'right'
                                }:
                                {
                                    text: `Pour la Compagnie:`, bold: true, fontSize: "8",
                                    alignment: 'right'
                                }
                            ]
                        ],
                    },
                }
, sessionStorage.getItem("roles")?.includes("COURTIER")?{
    image: SignatureCourtier,
    alignment:'right',
    width: widthSignature,
    height: heightSignature
  }:{}
            
            ],
            styles: {
                sectionHeader: {
                    bold: true,
                    color: "#d14723",
                    fontSize: 10,
                    alignment: "right"
                },
                BG: {
                    fontSize: 8
                },
                table: {
                    margin: [0, 10, 0, 0]
                },
                axaBold:{
                    alignment: "left",
                    bold: true,
                    fontSize: 10,
                    color: "#00008F", 
                },
                headerTable: {
                    alignment: "center",
                    bold: true,
                    fontSize: 10,
                    color: "#00008F",
                  
                }
            }
        }
        pdfMake.createPdf(docDefinitionContrat).download("CP_" + contrat?.idContrat);
    }

    outputContratFlotte(contrat: any, dataParam: any) {

        let risqueListVehicule: any = [];
        let risques: any = [];
        let vehicules: any = [];
        let risquegarantiesList: any = [];
        let groupeGarantiesList: any = [];
        let groupeGarantiesList2: any = [];
        let groupeGarantiesList3: any = [];
        let garantiesList: any = [];
        let garanties: any = [];
        let garantiesPrime: any = [];
        let headersRisque = ["NÂº ORDRE", "MARQUE", "IMMATRICULATION", "CHASSIS", "VALEUR_VENALE"]
        let headersGarantieList = ["NÂº ORDRE", "Prime_RC", "Prime_DR", "Prime_DTA", "Prime_DCVV", "Prime_DC", "Prime_Vol", "Prime_Vol_Auo_radio", "Prime_Incendie",
            "Prime_BDG", "Prime_Assistance", "Prime_PCP", "Prime_Nette"]

        let valeur0: any = false
        let valeur5: any = false
        let valeur15: any = false
        let valeur25: any = false
        let valeur100: any = false
        let valeur200: any = false
        let valeur300: any = false

        const dateEffet = contrat?.dateEffet;
        const dateTimeEffet = new Date(dateEffet);

        // Extracting time components
        const hoursEffet = dateTimeEffet.getUTCHours();
        const minutesEffet = dateTimeEffet.getUTCMinutes();

        const dateExpire = contrat?.dateEffet;
        const dateTimeExpire = new Date(dateExpire);

        // Extracting time components
        const hoursExpire = dateTimeExpire.getUTCHours();
        const minutesExpire = dateTimeExpire.getUTCMinutes();

        if (contrat && contrat.groupeList !== undefined && contrat.groupeList !== null) {
            risquegarantiesList = contrat?.groupeList.filter((groupe: any) => groupe?.garantieList)
        } else {
            risquegarantiesList = contrat?.groupesList.filter((groupe: any) => groupe?.garantieList)
        }
        risquegarantiesList.forEach((element: any) => {
            garantiesList.push(element.garantieList)
        })


        let index = 0;
        while (index < garantiesList?.length - 1) {
            garantiesList?.forEach((element: any) => {
                garanties.push(element[index])

            })
            index++;
        }

        index = 0;
        while (index < dataParam?.length) {

            let tmp = {
                "NÂº ORDRE": [
                    { text: dataParam[index].risque + '/' + dataParam?.length, fontSize: "8" },
                ],
                Prime_RC: [
                    { text: '', fontSize: "8" },
                ],
                Prime_DR: [
                    { text: '', fontSize: "8" },
                ],
                Prime_DTA: [
                    { text: '', fontSize: "8" },
                ],
                Prime_DCVV: [
                    { text: '', fontSize: "8" },
                ],
                Prime_DC: [
                    { text: '', fontSize: "8" },
                ],
                Prime_Vol: [
                    { text: '', fontSize: "8" },
                ],
                Prime_Vol_Auo_radio: [
                    { text: '', fontSize: "8" },
                ],
                Prime_Incendie: [
                    { text: '', fontSize: "8" },
                ],

                Prime_BDG: [
                    { text: '', fontSize: "8" },
                ],
                Prime_Assistance: [
                    { text: '', fontSize: "8" },
                ],
                Prime_PCP: [
                    { text: '', fontSize: "8" },
                ],

                Prime_Nette: [
                    { text: dataParam[index].primeList.find((element: any) => element.risque == dataParam[index].risque)?.prime.toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD", fontSize: "8" },

                ],

            };
            dataParam[index].garantieList?.map((ele: any) => {
                switch (ele.codeGarantie) {
                    case "G00":
                        tmp.Prime_RC[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;
                    case "G08":
                        tmp.Prime_DR[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;
                    case "G02":
                        tmp.Prime_DTA[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;
                    case "G13":
                        tmp.Prime_DCVV[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;
                    case "G07":
                        tmp.Prime_DC[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;
                    case "G03":
                        tmp.Prime_Vol[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;
                    case "G05":
                        tmp.Prime_Vol_Auo_radio[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;

                    case "G04":
                        tmp.Prime_Incendie[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;

                    case "G06":
                        tmp.Prime_BDG[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;

                    case "G11":
                        tmp.Prime_Assistance[0].text = Number(ele.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;

                    case "G18":

                        let pr1 = dataParam[index].garantieList?.find((element: any) => element.codeGarantie == "G17")?.prime
                        let pr2 = dataParam[index].garantieList?.find((element: any) => element.codeGarantie == "G16")?.prime
                        let pr3 = dataParam[index].garantieList?.find((element: any) => element.codeGarantie == "G18")?.prime
                        tmp.Prime_PCP[0].text = (Number(pr1) + Number(pr2) + Number(pr3)).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;

                    default:
                        break;
                }



            })
            garantiesPrime.push(tmp);
            index = index + 1;
        }

        if (contrat && contrat.groupeList !== undefined && contrat.groupeList !== null) {
            risqueListVehicule = contrat?.groupeList.filter((groupe: any) => groupe?.risques)
        } else {
            risqueListVehicule = contrat?.groupesList.filter((groupe: any) => groupe?.risques)
        }
        risqueListVehicule?.forEach((groupe: any) => {
            if (groupe?.risques) {
                groupe.risques.forEach((risque: any) => {
                    risques.push(risque);
                });
            }
        });



        index = 0;
        while (index < risques?.length) {

            let tmp = {
                "NÂº ORDRE": [
                    { text: risques[index].idRisque + '/' + risques?.length, fontSize: "8" },
                ],
                MARQUE: [
                    { text: '', fontSize: "8" },
                ],
                IMMATRICULATION: [
                    { text: '', fontSize: "8" },
                ],
                CHASSIS: [
                    { text: '', fontSize: "8" },
                ],

                VALEUR_VENALE: [
                    { text: '', fontSize: "8" },
                ],

            };

            risques[index].risque?.map((ele: any) => {
                switch (ele.colonne) {
                    case "Marque":
                        tmp.MARQUE[0].text = ele.valeur
                        break;
                    case "NÂ° d'Immatriculation":
                        tmp.IMMATRICULATION[0].text = ele.valeur
                        break;
                    case "ChÃ¢ssis ":
                        tmp.CHASSIS[0].text = ele.valeur
                        break;

                    case "Valeur AssurÃ©":
                        
                        tmp.VALEUR_VENALE[0].text =  isNaN(Number(ele.valeur)) ? ele.valeur + " DZD" : Number(ele.valeur).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                        break;

                    default:
                        break;
                }

            })
            vehicules.push(tmp);
            index = index + 1;

        }


        dataParam.map((garantie: any) => garantie.garantieList?.some((param: any) => param?.codeGarantie == "G02"))[0] ?
            groupeGarantiesList = dataParam.find((garantie: any) => garantie.garantieList?.find((param: any) => param?.codeGarantie == "G02")).garantieList : groupeGarantiesList = []


        dataParam.map((garantie: any) => garantie.garantieList?.some((param: any) => param?.codeGarantie == "G13"))[0] ?
            groupeGarantiesList2 = dataParam.find((garantie: any) => garantie.garantieList?.find((param: any) => param?.codeGarantie == "G13")).garantieList : groupeGarantiesList2 = []

        dataParam.map((garantie: any) => garantie.garantieList?.some((param: any) => param?.codeGarantie == "G07"))[0] ?
            groupeGarantiesList3 = dataParam.find((garantie: any) => garantie.garantieList?.find((param: any) => param?.codeGarantie == "G07")).garantieList : groupeGarantiesList2 = []



        let assistance = dataParam.map((garantie: any) => garantie.garantieList?.find((param: any) => param?.codeGarantie == "G11"))


        //////console.log("assistance -----------", assistance);
        /////////////
        assistance.filter((param: any) => param?.codeGarantie == "G11")?.map((garantie: any) => {

            if (garantie.categorieList?.some((cat: any) => cat?.valeur == "0")) {
                valeur0 = true
            }
            if (garantie.categorieList?.some((cat: any) => cat?.valeur == "5")) {
                valeur5 = true
            }
            if (garantie.categorieList?.some((cat: any) => cat?.valeur == "15")) {
                valeur15 = true
            }
            if (garantie.categorieList?.some((cat: any) => cat?.valeur == "25")) {
                valeur25 = true
            }
            if (garantie.categorieList?.some((cat: any) => cat?.valeur == "100")) {
                valeur100 = true
            }
            if (garantie.categorieList?.some((cat: any) => cat?.valeur == "200")) {
                valeur200 = true
            }
            if (garantie.categorieList?.some((cat: any) => cat?.valeur == "300")) {
                valeur300 = true
            }


        })
        const docDefinitionContrat: any = {
            watermark: { text: '', color: 'blue', opacity: 0.1 },
            pageMargins: [35, 110, 35, 90],
            border: [false, false, false, false],
            header: function (currentPage: any, pageCount: any) {
                // Common header for all pages
                const commonHeader = {
                    text: 'Police NÂ° : ' + contrat?.idContrat,
                    style: 'sectionHeader',
                    margin: [0, 30],
                    color: 'black'
                };
                if (currentPage == 1) {
                    return {
                        stack: [

                            {
                                text: 'AXA ' + contrat?.produit?.description.toUpperCase(),
                                style: 'sectionHeader'
                            },

                            {
                                text: 'Police NÂ° : ' + contrat?.idContrat,
                                style: 'sectionHeader',
                                color: 'black'
                            },
                            contrat?.convention != null && contrat.produit.codeProduit != '45F' ?
                                {
                                    text: 'Convention: ' + contrat?.convention,
                                    style: 'sectionHeader',
                                    color: 'black'
                                } : contrat?.reduction != null && contrat.produit.codeProduit != '45F' ?
                                    {
                                        text: 'RÃ©duction: ' + contrat?.reduction,
                                        style: 'sectionHeader',
                                        color: 'black'
                                    } : {},
                            { qr: 'https://www.axa.dz/wp-content/uploads/2023/10/Conditions-generales-Assurance-Automobile.pdf', alignment: "right", fit: '65' },
                        ],
                        margin: [35, 30, 35, 0]
                    }
                } else {
                    // Header for subsequent pages
                    return {
                        stack: [commonHeader],
                        margin: [35, 10, 35, 0]
                    };
                }
            },
            content: [
                {

                    text: 'Contrat FLOTTE AUTOMOBILE',
                    bold: true,
                    color: "#00008F",
                    fontSize: 60,
                    alignment: "center",
                    margin: [0, 150]

                },
                {
                    text: contrat?.personnesList.map((peronne: any) => peronne?.personne.raisonSocial)[0],
                    bold: true,
                    color: "#00008F",
                    fontSize: 30,
                    alignment: "center",

                    pageBreak: 'after'
                },
                {

                    text: `\n\nCONDITIONS PARTICULIERES\n`,
                    bold: true,
                    color: "#00008F",
                    fontSize: 12,
                    alignment: 'justify'

                },
                {
                    text: 'Le prÃ©sent contrat est conclu entre :',
                    color: "black",
                    fontSize: 10,

                },
                {
                    text: 'AXA Assurances AlgÃ©rie Dommage SPA, sociÃ©tÃ© de droit algÃ©rien inscrite au registre de commerce dâAlger sous le numÃ©ro 16/00- 1005172 B 11 au capital de 3.150.000.000,00 de Dinars AlgÃ©riens, dont le siÃ¨ge social est sis au lotissement 11 dÃ©cembre 1960 lots 08 et 12, 16030 El Biar Alger',
                    color: "black",
                    fontSize: 10,

                },
                {
                    text: '\nReprÃ©sentÃ©e par son directeur gÃ©nÃ©ral, ayant tous pouvoirs Ã  lâeffet des prÃ©sentes.',
                    color: "black",
                    fontSize: 10,

                },
                {
                    text: 'Ci-aprÃ¨s dÃ©nommÃ©e Â« LâAssureur Â»\n\t\tDâune part, ',
                    color: "black",
                    fontSize: 10,

                },
                {
                    text: '\nEt\n ',
                    color: "black",
                    fontSize: 10,

                },
                {
                    text: 'La sociÃ©tÃ© :  ' + contrat?.personnesList.map((peronne: any) => peronne?.personne.raisonSocial)[0] + ', dont le siÃ¨ge est situÃ© Ã : ' + contrat?.personnesList.map((peronne: any) => peronne?.personne.adressesList[0].description),
                    color: "black",
                    fontSize: 10,

                },
                {
                    text: '\nReprÃ©sentÃ©e par son gÃ©rant, ayant tous pouvoirs Ã  lâeffet des prÃ©sentes. ',
                    color: "black",
                    fontSize: 10,

                },
                {
                    text: '\nCi-aprÃ¨s dÃ©nommÃ©e Â« LâassurÃ© Â». ',
                    color: "black",
                    fontSize: 10,

                },
                {
                    text: '\nDâautre part, ',
                    color: "black",
                    fontSize: 10,
                    alignment: "right",

                },
                {
                    text: '\nIl est convenu ce qui suit : ',
                    color: "black",
                    fontSize: 10,
                    pageBreak: 'after'

                },

                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `PRÃAMBULE`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: 'Le prÃ©sent contrat dâassurance est rÃ©gi par le Code Civil, lâordonnance nÂ°95/07 du 25 Janvier 1995 modifiÃ©e par la loi nÂ°06/04 du 20 FÃ©vrier 2006, relative aux Assurances, lâordonnance nÂ°74/15 du 30 Janvier 1974 modifiÃ©e et complÃ©tÃ©e par la loi nÂ°88/31 du 19/07/1988 et les dÃ©crets nÂ°80/34 - nÂ°80/35 - nÂ°80/36 et nÂ°80/37 du 16 FÃ©vrier 1980. ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nLe prÃ©sent contrat qui matÃ©rialise les engagements respectifs des parties intervenantes, se compose des Ã©lÃ©ments suivants : ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\n1.	- Les Conditions gÃ©nÃ©rales du contrat d\'assurance, qui dÃ©finissent les droits et obligations rÃ©ciproques des parties. ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '- Les prÃ©sentes Conditions particuliÃ¨res dÃ©crivant les rÃ¨gles de fonctionnement du contrat ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: 'â Les annexes : ANNEXE A â DÃ©tail des garanties ; ANNEXE B â DÃ©tail des primes et garanties ; ANNEXE C â DÃ©tail des vÃ©hicules assurÃ©s ; ANNEXE D â Notice dâinformation. ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: 'Aux conditions gÃ©nÃ©rales qui prÃ©cÃ©dent et Ã  celles particuliÃ¨res qui suivent lâAssureur garantit lâAssurÃ© contre les risques dÃ©finis ci-aprÃ¨s :  ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 1 : OBJECT DU CONTRAT`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: '\nLe prÃ©sent contrat dâassurance est rÃ©gi par le Code Civil, lâordonnance nÂ°95/07 du 25 Janvier 1995 modifiÃ©e par la loi nÂ°06/04 du 20 FÃ©vrier 2006, relative aux Assurances, lâordonnance nÂ°74/15 du 30 Janvier 1974 modifiÃ©e et complÃ©tÃ©e par la loi nÂ°88/31 du 19/07/1988 et les dÃ©crets nÂ°80/34 - nÂ°80/35 - nÂ°80/36 et nÂ°80/37 du 16 FÃ©vrier 1980. ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nToute modification des risques couverts Ã  lâANNEXE Â« A â DÃ©tail des garanties Â» doit faire lâobjet dâun avenant signÃ© par les deux parties. ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nToute modification de la liste des vÃ©hicules dÃ©signÃ©s dans lâANNEXE Â« C â DÃ©tail des vÃ©hicules assurÃ©s Â» doit faire lâobjet dâun avenant signÃ© par les deux parties.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 2 : RISQUES ASSURES`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: '\nSont assurÃ©es, par le prÃ©sent contrat dâassurance, les vÃ©hicules identifiÃ©s dans le tableau intitulÃ© Â« ANNEXE C â DÃ©tail des vÃ©hicules assurÃ©sÂ». joint aux prÃ©sentes conditions particuliÃ¨res. ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 3 : LIEU DU RISQUE (TERRITORIALITE)`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: 'L\'assurance du prÃ©sent contrat produit ses effets exclusivement en AlgÃ©rie.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 4 : USAGE VEHICULE`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: 'Le souscripteur dÃ©clare que les vÃ©hicules, objets de l\'assurance sont utilisÃ©s Ã  titre commercial.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 5 : MONTANTS DES GARANTIES`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: 'Les garanties sont accordÃ©es pour les vÃ©hicules assurÃ©s dans les limites des sommes fixÃ©es dans le tableau intitulÃ© : Â« ANNEXE A â DÃ©tail des garanties Â» ainsi que dans le tableau intitule : Â« ANNEXE B â DÃ©tail des primes et garanties Â» joint aux prÃ©sentes conditions particuliÃ¨res. ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 6 : FRANCHISE`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: 'Par dÃ©rogation Ã  toute disposition contraire, l\'AssurÃ© conserve Ã  sa charge une partie de lâindemnitÃ© due aprÃ¨s sinistre, telle quâelle est fixÃ©e par garantie dans le tableau intitulÃ© Â« ANNEXE A â DÃ©tail des garantiesÂ» joint aux prÃ©sentes conditions particuliÃ¨res.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 7 : PRIME D'ASSURANCE`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: '\n7.1 DÃ©compte de la Prime.\n',
                    color: "black",
                    fontSize: 10,

                },
                {
                    columns: [

                        {
                            style: "table",
                            table: {

                                widths: ["*", "*", "*", "*", "*", "*"],
                                body: [
                                    [
                                        {
                                            text: `Prime nette`,
                                            style: "headerTable"
                                        },
                                        contrat?.idHistorique == undefined ?
                                            {
                                                text: `CoÃ»t de police`,
                                                style: "headerTable"
                                            }
                                            : {
                                                text: `Frais de gestion`,
                                                style: "headerTable"
                                            },
                                        {
                                            text: `T.V.A`,
                                            style: "headerTable"
                                        },

                                        {
                                            text: `F.G.A`,
                                            style: "headerTable"
                                        },
                                        {
                                            text: `Timbre de dimension`,
                                            style: "headerTable"
                                        },

                                        {
                                            text: `Timbre graduÃ©`,
                                            style: "headerTable"
                                        },
                                    ],
                                    [
                                        {
                                            text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" + " DZD",
                                            fontSize: 8
                                        },
                                        contrat?.idHistorique == undefined ?
                                            {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" + " DZD",
                                                fontSize: 8
                                            }
                                            : {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T08')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" + " DZD",
                                                fontSize: 8
                                            },
                                        {
                                            text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T04')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" + " DZD",
                                            fontSize: 8
                                        },
                                        {
                                            text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T07')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" + " DZD",
                                            fontSize: 8
                                        },
                                        {
                                            text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T03')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" + " DZD",
                                            fontSize: 8
                                        },

                                        {
                                            text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T02')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" + " DZD",
                                            fontSize: 8
                                        },
                                    ],
                                    [
                                        { text: '', colSpan: 4 },
                                        {},
                                        {},
                                        {},
                                        {
                                            text: `Prime Totale`,
                                            style: "headerTable",
                                        },
                                        {
                                            text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.prime).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" ,
                                            fontSize: 8
                                        },
                                    ],
                                ],
                            }
                        }
                    ],
                },
                {
                    text: '\n7.2 Paiement de la Prime\n',
                    color: "black",
                    fontSize: 10,

                },
                {
                    text: 'La prime totale (toutes taxes comprises) du prÃ©sent contrat est de ' + Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.primeProrata).toFixed(2).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ".DZD" + '. Elle est payable Ã  la date de souscription du contrat.',
                    color: "black",
                    fontSize: "8",
                    pageBreak: 'after'

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 8 : DUREE DU CONTRAT`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: 'Le contrat est souscrit pour une durÃ©e ferme allant du ' + contrat?.dateEffet?.split("T")[0] + ' Ã  ' + hoursEffet + 'H' + minutesEffet + ' au ' + contrat?.dateExpiration?.split("T")[0],
                    color: "black",
                    fontSize: "8",

                },

                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 9 : DISPOSITIONS RELATIVES A LâINDEMNISATION DES SINISTRES`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: '\nEn cas de sinistres lâassurÃ© devra se conformer aux obligations dÃ©crites en Â«ANNEXE D â Notice dâinformation Â»  des prÃ©sentes conditions particuliÃ¨res.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 10 : DISPOSITIONS DIVERSES`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: '\nâ¢	FiscalitÃ© : Il sera fait application de la lÃ©gislation fiscale en la matiÃ¨re en vigueur en AlgÃ©rie.\nâ¢	Modifications du contrat : Toutes modifications dans les termes et conditions de la prÃ©sente assurance seront constatÃ©es par avenant signÃ© par les deux parties annexÃ©es au prÃ©sent contrat pour en faire partie intÃ©grante.\nâ¢	Le prÃ©sent contrat est conclu entre les parties pour Ãªtre exÃ©cutÃ© de bonne foi\nâ¢	Limite annuelle dâindemnisation : Au titre des garanties suivantes : Bris de glaces, Vol, Incendie, Dommages tous accidents, Dommages collision, Protection du conducteur & des passagers, le total annuel des indemnisations ne peut excÃ©der 1,5 fois la limite maximum par sinistre.',
                    color: "black",
                    fontSize: "8",
                    alignment: 'justify'

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ARTICLE 11 : DÃCLARATION DE LâASSURE`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {
                    text: '\nâ¢	LâassurÃ© reconnait avoir reÃ§u un exemplaire des Conditions GÃ©nÃ©rales et des prÃ©sentes Conditions ParticuliÃ¨res et dÃ©clare avoir pris connaissance des textes y figurant.\nâ¢	LâassurÃ© reconnait que les prÃ©sentes Conditions ParticuliÃ¨res ont Ã©tÃ© Ã©tablies conformÃ©ment aux rÃ©ponses donnÃ©es de lâassurÃ© aux questions posÃ©es par la Compagnie lors de la souscription du contrat.\nâ¢	LâassurÃ© reconnais Ã©galement avoir Ã©tÃ© prÃ©alablement informÃ©(e) du montant de la prime et des garanties du prÃ©sent contrat.\nâ¢	LâassurÃ© reconnais avoir Ã©tÃ© informÃ©(e), au moment de la collecte dâinformations que les consÃ©quences qui pourraient rÃ©sulter dâune omission ou dâune dÃ©claration inexacte sont celles prÃ©vues par lâarticle 19 de lâordonnance nÂ°95/07 du 25 janvier 1995 relative aux assurances modifiÃ©e et complÃ©tÃ©e par la loi nÂ°06/04 du 20 fÃ©vrier 2006.\nâ¢	En signant ce document, lâassurÃ© accepte que les informations saisies dans ce document soient, utilisÃ©e, exploitÃ©es, traitÃ©es par AXA Assurances AlgÃ©rie Dommage spa, transfÃ©rÃ©es Ã  lâÃ©tranger et Ã  ses sous-traitants, dans le cadre de l\'exÃ©cution des finalitÃ©s de la relation commerciale, conformÃ©ment Ã  la Loi nÂ° 18-07 du 10 juin 2018 relative Ã  la protection des personnes physiques dans le traitement des donnÃ©es Ã  caractÃ¨re personnel.\nâ¢	LâassurÃ© autorise Ã©galement AXA Assurances AlgÃ©rie Dommage dâenvoyer des messages et des appels de prospections commerciales quel quâen soit le support ou la nature.\nâ¢	Pour toute demande concernant le traitement de vos donnÃ©es Ã  caractÃ¨re personnel, merci de nous contacter sur lâadresse : dpo@axa.dz.',
                    color: "black",
                    fontSize: "8",
                    alignment: 'justify'

                },
                { text: `\n\nFait Ã  ${contrat?.agence?.commune} - ${contrat?.agence?.wilaya} Le ${contrat?.auditDate?.split("T")[0]}\n\n`, bold: true, fontSize: "8" },
                {
                    layout: 'noBorders',
                    table: {
                        widths: ["*", "*"],
                        alignment: "center",
                        body: [
                            [
                                {
                                    text: [
                                        { text: `Signature de l'assurÃ©(e)\n`, bold: true, fontSize: "8" },
                                        { text: `PrÃ©cÃ©dÃ©e de la mention Â« Lu et approuvÃ© Â»\n`, fontSize: "8" },
                                    ],
                                    alignment: 'left'
                                },
                                {
                                    text: `Pour la Compagnie:`, bold: true, fontSize: "8",
                                    alignment: 'right',
                                   
                                }
                            ]
                        ],
                    },
                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            pageBreak: 'before',
                                            text: `ANNEXE A â DÃ©tail des garanties`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {

                    text: `\nGaranties Souscrites\n`,
                    bold: true,
                    color: "#00008F",
                    fontSize: 12,
                    alignment: 'justify',

                },
                {
                    columns: [

                        {
                            style: "table",
                            table: {

                                widths: ["*", "*", "*", "*"],
                                body: [
                                    [
                                        {
                                            text: `Garanties Souscrites`,
                                            fontSize: 8,
                                            style: "headerTable"
                                        },
                                        {
                                            text: `Limites des Garanties par Sinistre / DA`,
                                            fontSize: 8,
                                            style: "headerTable"
                                        },
                                        {
                                            text: `Franchise `,
                                            fontSize: 8,
                                            style: "headerTable"
                                        },
                                        {
                                            text: `RÃ¨gle Proportionnelle `,
                                            fontSize: 8,
                                            style: "headerTable"
                                        },

                                    ],
                                    [
                                        {
                                            text: "ResponsabilitÃ© Civile en et hors circulation (article 4 des conditions gÃ©nÃ©rales)",
                                            fontSize: "8",
                                        },

                                        {
                                            text: "IllimitÃ©s",
                                            fontSize: "8",
                                        },
                                        {
                                            text: "Sans Franchise",
                                            fontSize: "8",
                                        },
                                        {
                                            text: "Non applicable",
                                            fontSize: "8",
                                        },

                                    ],
                                    //  dataParam.find((garantie:any)=>garantie.garantieList?.find((param: any) => param?.codeGarantie == "G02"))?
                                    [
                                        {
                                            text: "Dommages Tous Accident (DTA) (article 13 des conditions gÃ©nÃ©rales)",
                                            alignment: 'justify',
                                            fontSize: "8",
                                        },

                                        {
                                            text: "En cas de perte totale : Valeur de remplacement estimÃ©e par l'expert sans excÃ©der la valeur vÃ©nale du vÃ©hicule dÃ©clarÃ©e par l'assurÃ© figurant dans l'ANNEXE C.\nEn cas de dommages partiels : CoÃ»t des rÃ©parations ou de remplacement des piÃ¨ces dÃ©tÃ©riorÃ©es dans la limite de la valeur de remplacement estimÃ©e par l'expert en application du barÃ¨me de l'UAR pour le cout de la main d'Åuvre.",
                                            fontSize: "8",
                                            alignment: 'justify',
                                        },

                                        {

                                            text: groupeGarantiesList.find((param: any) => param?.codeGarantie == "G02")?.categorieList?.find((cat: any) => cat?.code == "C15")?.valeur ?
                                                Number(groupeGarantiesList.find((param: any) => param?.codeGarantie == "G02")?.categorieList?.find((cat: any) => cat?.code == "C15")?.valeur).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                                                : "/",
                                            fontSize: "8",
                                        }
                                        ,

                                        {
                                            text: "",
                                            fontSize: "8",
                                        },

                                    ],
                                    // dataParam.find((garantie:any)=>garantie.garantieList?.find((param: any) => param?.codeGarantie == "G13"))?
                                    [
                                        {
                                            text: "Dommages Collision a valeur vÃ©nale (article 15 des conditions gÃ©nÃ©rales)",
                                            fontSize: "8",
                                            alignment: 'justify',
                                        },

                                        {
                                            text: "En cas de dommages partiels : CoÃ»t des rÃ©parations ou de remplacement des piÃ¨ces dÃ©tÃ©riorÃ©es dans la limite de la valeur de remplacement estimÃ©e par lâexpert en application du barÃ¨me de l'UAR pour le cout de la main d'Åuvre.\n\nLa DC VV est accordÃ©e pour les vÃ©hicules Ã¢gÃ©s de 9 Ã  10 ans.",
                                            fontSize: "8",
                                            alignment: 'justify',
                                        },
                                        {

                                            text: groupeGarantiesList2.find((param: any) => param?.codeGarantie == "G13")?.categorieList?.find((cat: any) => cat?.code == "C15")?.valeur ?
                                                Number(groupeGarantiesList2.find((param: any) => param?.codeGarantie == "G13")?.categorieList?.find((cat: any) => cat?.code == "C15")?.valeur).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                                                : "/",
                                            fontSize: "8",

                                        },
                                        {
                                            text: "Applicable",
                                            fontSize: "8",
                                        },

                                    ],
                                    [
                                        {
                                            text: "Dommages Collision Ã  hauteur de 100 000.00 DA",
                                            fontSize: "8",
                                            alignment: 'justify',
                                        },

                                        {
                                            text: "En cas de perte totale ou de dommages partiels : la valeur de remplacement estimÃ©e par lâexpert est plafonnÃ©e Ã  100 000.00 DA.\n\nLa DC 100 000 DA est accordÃ©e pour les vÃ©hicules Ã¢gÃ©s de 11 Ã  14 ans.",
                                            fontSize: "8",
                                            alignment: 'justify',
                                        },
                                        {
                                            text: groupeGarantiesList3.find((param: any) => param?.codeGarantie == "G07")?.categorieList?.find((cat: any) => cat?.code == "C15")?.valeur ?
                                                Number(groupeGarantiesList3.find((param: any) => param?.codeGarantie == "G07")?.categorieList?.find((cat: any) => cat?.code == "C15")?.valeur).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                                                : "/",
                                            fontSize: "8",
                                        },
                                        {
                                            text: "Applicable",
                                            fontSize: "8",
                                        },

                                    ],
                                    [
                                        {
                                            text: "Bris de Glaces (article 21 des conditions gÃ©nÃ©rales)",
                                            fontSize: "8",
                                        },

                                        {
                                            text: "CoÃ»t des rÃ©parations ou de remplacement des glaces sans toutefois dÃ©passer le plafond de 70 000.00 DA",
                                            alignment: 'justify',
                                            fontSize: "8",
                                        },
                                        {
                                            text: groupeGarantiesList.find((param: any) => param?.codeGarantie == "G07")?.categorieList?.find((cat: any) => cat?.code == "C15")?.valeur ?
                                                Number(groupeGarantiesList.find((param: any) => param?.codeGarantie == "G07")?.categorieList?.find((cat: any) => cat?.code == "C15")?.valeur).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD"
                                                : "/",
                                        },
                                        {
                                            text: "",
                                            fontSize: "8",
                                        },

                                    ],
                                    [
                                        {
                                            text: "Vol de vÃ©hicules (article 19 des conditions gÃ©nÃ©rales)",
                                            alignment: 'justify',
                                            fontSize: "8",
                                        },

                                        {
                                            text: "En cas de perte totale : Valeur de remplacement estimÃ©e par l'expert sans excÃ©der la valeur vÃ©nale du vÃ©hicule dÃ©clarÃ©e par l'assurÃ© figurant dans l'ANNEXE C. En cas de dommages partiels : CoÃ»t des rÃ©parations ou de remplacement des piÃ¨ces dÃ©tÃ©riorÃ©es dans la limite de la valeur de remplacement estimÃ©e par l'expert en application du barÃ¨me de l'UAR pour le cout de la main d'Åuvre.",
                                            fontSize: "8",
                                            alignment: 'justify',
                                        },

                                        {
                                            /* text: groupeGarantiesList.find((param: any) => param?.codeGarantie == "G03").categorieList?.find((cat: any) => cat?.code == "C15").valeur?
                                             Number(groupeGarantiesList.find((param: any) => param?.codeGarantie == "G03").categorieList?.find((cat: any) => cat?.code == "C15").valeur).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" : " makach",
                                             fontSize: "8",
                                             */
                                            text: "Sans Franchise",
                                            fontSize: "8",
                                        },

                                        {
                                            text: "Applicable",
                                            fontSize: "8",
                                        },

                                    ],
                                    [
                                        {
                                            text: "Incendie (article 17 des conditions gÃ©nÃ©rales)",
                                            fontSize: "8",
                                        },

                                        {
                                            text: "En cas de perte totale : Valeur de remplacement estimÃ©e par l'expert sans excÃ©der la valeur vÃ©nale du vÃ©hicule dÃ©clarÃ©e par l'assurÃ© figurant dans l'ANNEXE C.\nEn cas de dommages partiels : CoÃ»t des rÃ©parations ou de remplacement des piÃ¨ces dÃ©tÃ©riorÃ©es dans la limite de la valeur de remplacement estimÃ©e par l'expert en application du barÃ¨me de l'UAR pour le cout de la main d'Åuvre.",
                                            fontSize: "8",
                                            alignment: 'justify',
                                        },
                                        {
                                            /* text: groupeGarantiesList.find((param: any) => param?.codeGarantie == "G04").categorieList?.find((cat: any) => cat?.code == "C15").valeur?
                                             Number(groupeGarantiesList.find((param: any) => param?.codeGarantie == "G04").categorieList?.find((cat: any) => cat?.code == "C15").valeur).toLocaleString('fi-FI', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD" : " makach",
                                             fontSize: "8",
                                             */
                                            text: "Sans Franchise",
                                            fontSize: "8",
                                        },
                                        {
                                            text: "Applicable",
                                            fontSize: "8",
                                        },

                                    ],
                                    [
                                        {
                                            text: "Vol Auto Radio",
                                            fontSize: "8",
                                        },

                                        {
                                            text: "",
                                            fontSize: "8",
                                        },
                                        {
                                            text: "Sans Franchise",
                                            fontSize: "8",
                                        },
                                        {
                                            text: "Non applicable",
                                            fontSize: "8",
                                        },

                                    ],


                                    [
                                        {
                                            text: "Protection du conducteur et des passagers",
                                            fontSize: "8",
                                            alignment: 'justify',
                                        },

                                        {
                                            text: "DÃ©cÃ¨s- invaliditÃ© absolue et dÃ©finitive / Limite :\n\n2 000 000 DA \n\nI.P.P (IncapacitÃ© Permanente partielle) / Limite :\n\n2 000 000 DA\n\nFrais mÃ©dicaux et dâhospitalisation / Limite : \n\n300 000 DA",
                                            fontSize: "8",
                                            alignment: 'justify',
                                        },
                                        {
                                            text: "Sans Franchise",
                                            fontSize: "8",
                                        },
                                        {
                                            text: "Non applicable",
                                            fontSize: "8",
                                        },

                                    ],

                                ],
                            },
                        },

                    ],
                },
                valeur0 ?
                    {
                        columns: [
                            {
                                style: "table",
                                table: {
                                    widths: ["*", "*", "*", "*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: "Assistance automobile â Plus Auto",
                                                fontSize: "8",
                                                border: [true, true, false, true],
                                            },
                                            {
                                                text: "Assistance aux vÃ©hicules\n1. DÃ©pannage / Remorquage en cas de panne ou d'accident dans la limite de 15 000.00 DZD. \n2. Extraction du vÃ©hicule assurÃ© Ã  l'aide d'une grue dans la limite de 7 000.00 DZD. \n3. Retour des bÃ©nÃ©ficiaires / Poursuite du voyage : inclus. \n4. Prise en charge des frais d'hÃ©bergement Ã  l'hÃ´tel (par nuitÃ©e et par personne) dans la limite de 10 000.00 DZD/nuitÃ©e, sans dÃ©passer 02 nuitÃ©es par personne. \n5. SÃ©jour et dÃ©placement des bÃ©nÃ©ficiaires suite au vol du vÃ©hicule assurÃ© dans la limite de 10 000.00 DZD/nuitÃ©e sans dÃ©passer 02 nuitÃ©es par personne. \n6. Gardiennage et rÃ©cupÃ©ration du vÃ©hicule aprÃ¨s rÃ©paration dans la limite de 3 000.00 DZD. \n7. Service d'un chauffeur professionnel : Inclus\nAssistance aux Personnes\nFranchise KilomÃ©trique : 50 KilomÃ¨tres\n1. Transport sanitaire : Inclus\n2. Transport des bÃ©nÃ©ficiaires accompagnateurs: Inclus\n3. Rapatriement de corps : 60 000 DZD\n4. Visite d'un proche parent en cas d'hospitalisation de plus de sept jours du bÃ©nÃ©ficiaire (02 nuitÃ©es maximum/personne) : 20 000 DZD\n5. Interruption de voyage Ã  la suite du dÃ©cÃ¨s d'un proche parent en AlgÃ©rie : Inclus\n6. Transmission de messages urgents : Inclus",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "25 KilomÃ¨tres",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Non applicable",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                        ],
                                    ],
                                }
                            },

                        ]


                    } : {},

                valeur5 ?
                    {

                        columns: [
                            {
                                style: "table",
                                table: {
                                    widths: ["*", "*", "*", "*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: "Assistance automobile â Essentiel Auto",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Assistance aux vÃ©hicules\n1. DÃ©pannage / Remorquage en cas de panne ou d'accident dans la limite de 15 000.00 DZD. \n2. Extraction du vÃ©hicule assurÃ© Ã  l'aide d'une grue dans la limite de 7 000.00 DZD. \n3. Retour des bÃ©nÃ©ficiaires / Poursuite du voyage : inclus. \n4. Prise en charge des frais d'hÃ©bergement Ã  l'hÃ´tel (par nuitÃ©e et par personne) dans la limite de 10 000.00 DZD/nuitÃ©e, sans dÃ©passer 02 nuitÃ©es par personne. \n5. SÃ©jour et dÃ©placement des bÃ©nÃ©ficiaires suite au vol du vÃ©hicule assurÃ© dans la limite de 10 000.00 DZD/nuitÃ©e sans dÃ©passer 02 nuitÃ©es par personne. \n6. Gardiennage et rÃ©cupÃ©ration du vÃ©hicule aprÃ¨s rÃ©paration dans la limite de 3 000.00 DZD. \n7. Service d'un chauffeur professionnel : Inclus\nAssistance aux Personnes\nFranchise KilomÃ©trique : 50 KilomÃ¨tres\n1. Transport sanitaire : Inclus\n2. Transport des bÃ©nÃ©ficiaires accompagnateurs: Inclus\n3. Rapatriement de corps : 40 000 DZD\n4. Visite d'un proche parent en cas d'hospitalisation de plus de sept jours du bÃ©nÃ©ficiaire (02 nuitÃ©es maximum/personne) : 10 000 DZD",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "5 KilomÃ¨tres",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Non applicable",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                        ],
                                    ],
                                }
                            },
                        ]


                    } : {},
                valeur15 ?
                    {

                        columns: [
                            {
                                style: "table",
                                table: {
                                    widths: ["*", "*", "*", "*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: "Assistance automobile - Classic Auto",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Assistance aux vÃ©hicules1. DÃ©pannage / Remorquage en cas de panne ou d'accident dans la limite de 10 000.00 DZD. 2. Extraction du vÃ©hicule assurÃ© Ã  l'aide d'une grue dans la limite de 7 000.00 DZD. 3. Retour des bÃ©nÃ©ficiaires / Poursuite du voyage : inclus. 4. Prise en charge des frais d'hÃ©bergement Ã  l'hÃ´tel (par nuitÃ©e et par personne) dans la limite de 5 000.00 DZD/nuitÃ©e, sans dÃ©passer 02 nuitÃ©es par personne. 5. SÃ©jour et dÃ©placement des bÃ©nÃ©ficiaires suite au vol du vÃ©hicule assurÃ© dans la limite de 5 000.00 DZD/nuitÃ©e sans dÃ©passer 02 nuitÃ©es par personne. 6. Gardiennage et rÃ©cupÃ©ration du vÃ©hicule aprÃ¨s rÃ©paration dans la limite de 3 000.00 DZD. 7. Service d'un chauffeur professionnel : Inclus",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "15 KilomÃ¨tres",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Non applicable",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                        ],
                                    ],
                                }
                            },

                        ]


                    } : {},
                valeur25 ?
                    {

                        columns: [
                            {
                                style: "table",
                                table: {
                                    widths: ["*", "*", "*", "*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: "Assistance automobile - Basic Auto",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Assistance aux vÃ©hicules1. DÃ©pannage / Remorquage en cas de panne ou d'accident dans la limite de 7 000.00 DZD. 2. Extraction du vÃ©hicule assurÃ© Ã  l'aide d'une grue dans la limite de 7 000.00 DZD. 3. Retour des bÃ©nÃ©ficiaires / Poursuite du voyage : inclus. 4. Prise en charge des frais d'hÃ©bergement Ã  l'hÃ´tel (par nuitÃ©e et par personne) dans la limite de 5 000.00 DZD/nuitÃ©e, sans dÃ©passer 02 nuitÃ©es par personne. 5. SÃ©jour et dÃ©placement des bÃ©nÃ©ficiaires suite au vol du vÃ©hicule assurÃ© dans la limite de 5 000.00 DZD/nuitÃ©e sans dÃ©passer 02 nuitÃ©es par personne. 6. Gardiennage et rÃ©cupÃ©ration du vÃ©hicule aprÃ¨s rÃ©paration dans la limite de 3 000.00 DZD 7. Service d'un chauffeur professionnel : Inclus",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },


                                            {
                                                text: "25 KilomÃ¨tres",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Non applicable",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                        ],
                                    ],
                                }
                            },

                        ]



                    } : {},
                valeur100 ?
                    {

                        columns: [
                            {
                                style: "table",
                                table: {
                                    widths: ["*", "*", "*", "*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: "Formule Poids Lourd - 100Km",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Assistance aux vÃ©hicules. 1. Franchise kilomÃ©trique en cas de panne (en km) : 0. 2. DÃ©pannage/remorquage en cas de panne : Au garage le plus proche. 3. DÃ©pannage/remorquage en cas dâaccident : 100 Km. 4. Retour des bÃ©nÃ©ficiaires/ Poursuite du voyage/ Frais dâhÃ´tel : 6 000 DZD/nuit/personne (02 nuits maximum).",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },


                                            {
                                                text: "100 KilomÃ¨tres",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Non applicable",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                        ],
                                    ],
                                }
                            },

                        ]



                    } : {},
                valeur200 ?
                    {

                        columns: [
                            {
                                style: "table",
                                table: {
                                    widths: ["*", "*", "*", "*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: "Formule Poids Lourd - 200Km",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Assistance aux vÃ©hicules. 1. Franchise kilomÃ©trique en cas de panne (en km) : 0. 2. DÃ©pannage/remorquage en cas de panne : Au garage le plus proche. 3. DÃ©pannage/remorquage en cas dâaccident : 200 Km. 4. Retour des bÃ©nÃ©ficiaires/ Poursuite du voyage/ Frais dâhÃ´tel : 6 000 DZD/nuit/personne (02 nuits maximum).",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },


                                            {
                                                text: "200 KilomÃ¨tres",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Non applicable",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                        ],
                                    ],
                                }
                            },

                        ]



                    } : {},
                valeur300 ?
                    {

                        columns: [
                            {
                                style: "table",
                                table: {
                                    widths: ["*", "*", "*", "*"],
                                    alignment: "left",
                                    body: [
                                        [
                                            {
                                                text: "Formule Poids Lourd - 300Km",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Assistance aux vÃ©hicules. 1. Franchise kilomÃ©trique en cas de panne (en km) : 0. 2. DÃ©pannage/remorquage en cas de panne : Au garage le plus proche. 3. DÃ©pannage/remorquage en cas dâaccident : 300 Km. 4. Retour des bÃ©nÃ©ficiaires/ Poursuite du voyage/ Frais dâhÃ´tel : 6 000 DZD/nuit/personne (02 nuits maximum).",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },


                                            {
                                                text: "300 KilomÃ¨tres",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                            {
                                                text: "Non applicable",
                                                fontSize: "8",
                                                border: [true, true, true, true],
                                            },
                                        ],
                                    ],
                                }
                            },

                        ]



                    } : {},
                {
                    text: '\n',
                    pageBreak: 'after'

                },
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ANNEXE C â DÃ©tail des vÃ©hicules assurÃ©s`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                { text: '\n' },
                vehicules.length != 0 ? this.table(vehicules, headersRisque) : {},
              
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            pageBreak: 'before',
                                            text: `ANNEXE D â Notice dâinformation `,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                {

                    text: `\nNotice dâInformation Ã  lâusage des assurÃ©s en assurance automobile\n`,

                    fontSize: "8",
                    alignment: 'justify',

                },
                {

                    text: `\nAfin de vous faciliter la procÃ©dure de dÃ©claration dâun sinistre et permettre Ã  nos gestionnaires des sinistres de rÃ©pondre  dans les meilleurs dÃ©lais Ã  vos demandes dâindemnisation, nous vous conseillons de suivre les recommandations suivantes :`,

                    fontSize: "8",
                    alignment: 'justify',

                },
                {

                    text: `\nCette prÃ©sente notice est dÃ©diÃ©e au cas des sinistres de la branche automobile, notamment la gestion des risques flottes. Les garanties concernÃ©es sont les RC, Dommages tout accident ou dommages collision, incendie, vol et BDG. Les cas de dommages corporels seront pris au cas par cas du fait de sa sensibilitÃ©.`,

                    fontSize: "8",
                    alignment: 'justify',

                },
                {
                    text: '\n1.	DÃ©claration du sinistre\n',
                    color: "black",
                    fontSize: "8",

                },
                {

                    text: `\nAprÃ¨s la rÃ©alisation dâun risque, lâassurÃ© est tenu de dÃ©clarer le sinistre dans les dÃ©lais prescrits par le contrat notamment aux conditions gÃ©nÃ©rales des polices dâassurances.`,
                    bold: true,
                    color: "#00008F",
                    fontSize: "8",
                    alignment: 'justify',

                },
                {
                    text: '\nLes dÃ©lais sont de sept (07) jours ouvrables ou de trois (03) jours en cas de vol, sauf cas de force majeur. Le dÃ©lai coure Ã  partir du moment oÃ¹ lâassurÃ© a eu connaissance de lâÃ©vÃ©nement.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nCette dÃ©claration de sinistre doit comporter les informations suivantes :',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nCette dÃ©claration de sinistre doit comporter les informations suivantes :\nâ¢	Le numÃ©ro de police et/ou de lâavenant en court de validitÃ©. \nâ¢	Marque et type du vÃ©hicule ainsi que son immatriculation. \nâ¢	Date et lieu de survenance du sinistre avec prÃ©cision sur lâheure pour les accidents de circulation. \nâ¢	Toute information ayant trait Ã  dâautres intervenants (tiers.)\nâ¢	Nature du sinistre ou des dommages. \nâ¢	Causes et circonstances. \nâ¢	EnumÃ©ration approximative des dommages et des Ã©lÃ©ments endommagÃ©s. ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: 'il est indispensable de vous rappeler que la dÃ©claration doit obligatoirement se faire sur le formulaire du constat amiable de dÃ©claration dâaccident adoptÃ© par les compagnies dâassurance. ',
                    color: "black",
                    fontSize: "8",
                    bold: true,

                },
                {
                    text: '\nLes coordonnÃ©es du tiers Ã  recueillir sont :',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nâ¢	Nom, prÃ©nom et adresse du tiers. \nâ¢	NÂ° de police, sa validitÃ© et la domiciliation de son assurance (compagnie et agence). \nâ¢	Marque et type du vÃ©hicule ainsi que son immatriculation. \nâ¢	Nom, prÃ©nom et NÂ° de permis du conducteur et validitÃ© de son permis. ',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\n2.	Documents Ã  remettre en cas de sinistre :\n',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nAfin dâappuyer les vÃ©racitÃ©s des informations fournies Ã  lâassureur et dans la mesure du possible, il est recommandÃ© de fournir les documents justificatifs suivants :',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nâ¢	Carte grise du vÃ©hicule\nâ¢	Permis de conduire du conducteur au moment du sinistre.\nâ¢	Attestation de lâassurance en cours de validitÃ©.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nLes copies des mÃªmes documents concernant le tiers sont souhaitables en cas de sinistre ayant celui- ci comme partie.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\n3.	Cas particulier du Vol :\n',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: 'Comme prÃ©cÃ©demment mentionnÃ© le DÃ©lai de dÃ©claration en cas de vol, quâil soit partiel ou total, est de 3 jours ouvrable avec la mention sur lâobligation de dÃ©poser plainte auprÃ¨s des autoritÃ©s territorialement compÃ©tente (police ou gendarmerie) dans les 24 heures suivant la constations du vol.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nâ¢	Certificat de dÃ©pÃ´ts de plainte.\nâ¢	Carte grise du vÃ©hicule.\nâ¢	Double du jeu de clefs.\nâ¢	DÃ©claration formelle de vol signÃ©e par lâassurÃ©.',
                    color: "black",
                    fontSize: "8",

                },
                {
                    text: '\nAprÃ¨s instruction du dossier : \n',
                    color: "black",
                    bold: true,
                    fontSize: "8",

                },
                {
                    text: '\nâ¢	Formule dâopposition aux autoritÃ©s et Ã  la direction de wilaya des services des cartes grises et rÃ© immatriculation. \nâ¢	Acte de cession de vÃ©hicule au profil dâAXA assurances. ',
                    color: "black",
                    fontSize: "8",

                },

            ],

            styles: {
                sectionHeader: {
                    bold: true,
                    color: "#d14723",
                    fontSize: 10,
                    alignment: "right"
                },
                BG: {
                    fontSize: 8
                },
                table: {
                    margin: [0, 10, 0, 0]
                },
                headerTable: {
                    alignment: "center",
                    bold: true,
                    fontSize: 10,
                    color: "#00008F",
                  
                }
            }
        }


        const docDefinitionPrimesGaranties: any = {
            watermark: { text: '', color: 'blue', opacity: 0.1 },
            pageMargins: [35, 110, 35, 90],
            border: [false, false, false, false],
            pageOrientation: 'landscape',
            header: function (currentPage: any, pageCount: any) {
                // Common header for all pages
                const commonHeader = {
                    text: 'Police NÂ° : ' + contrat?.idContrat,
                    style: 'sectionHeader',
                    margin: [0, 30],
                    color: 'black'
                };
                if (currentPage == 1) {

                    // Header for subsequent pages
                    return {
                        stack: [commonHeader],
                        margin: [35, 10, 35, 0]
                    };
                }
            },
            content: [
                {
                    columns: [
                        {
                            style: "table",
                            table: {
                                widths: ["*"],
                                alignment: "left",
                                body: [
                                    [
                                        {
                                            text: `ANNEXE B â DÃ©tail des primes et garanties`,
                                            style: "headerTable"
                                        },
                                    ],
                                ],
                            }
                        },
                    ],
                },
                { text: '\n' },
                garantiesPrime.length != 0 ? this.table(garantiesPrime, headersGarantieList) : {},
            ],
            styles: {
                sectionHeader: {
                    bold: true,
                    color: "#d14723",
                    fontSize: 10,
                    alignment: "right"
                },
                BG: {
                    fontSize: 8
                },
                table: {
                    margin: [0, 2, 0, 0]
                },
                headerTable: {
                    alignment: "center",
                    bold: true,
                    fontSize: 10,
                    color: "#00008F",
                    
                }
            }
        }

        pdfMake.createPdf(docDefinitionContrat).download("CP_" + contrat?.idContrat);
        pdfMake.createPdf(docDefinitionPrimesGaranties).download("CP_Garanties" + contrat?.idContrat);
    }

    outputLeasing(contrat: any, quittance: any, dataParam: any) {

        let risqueListVehicule: any = []
        let risques: any = []
        let headersGarantie = ["Garantie(s)", "Primes"]


        if (contrat && contrat.groupeList !== undefined && contrat.groupeList !== null) {
            risqueListVehicule = contrat?.groupeList.filter((groupe: any) => groupe?.garantieList)
        } else {
            risqueListVehicule = contrat?.groupesList.filter((groupe: any) => groupe?.garantieList)
        }
        risqueListVehicule?.forEach((groupe: any) => {
            if (groupe?.risques) {
                groupe.risques.forEach((risque: any) => {
                    risques.push(risque);
                });
            }
        });


        const docDefinitionContrat: any = {
            watermark: { text: '', color: 'blue', opacity: 0.1 },
            pageMargins: [35, 110, 35, 90],
            border: [false, false, false, false],
            header: function (currentPage: any, pageCount: any) {
                // Common header for all pages
                const commonHeader = {
                    text: 'Police NÂ° : ' + contrat?.idContrat,
                    style: 'sectionHeader',
                    margin: [0, 30],
                    color: 'black'
                };
                if (currentPage == 1) {
                    return {
                        stack: [

                            {
                                text: 'AXA ' + contrat?.produit?.description.toUpperCase(),
                                style: 'sectionHeader'
                            },

                            {
                                text: 'Police NÂ° : ' + contrat?.idContrat,
                                style: 'sectionHeader',
                                color: 'black'
                            },
                            { qr: 'https://www.axa.dz/wp-content/uploads/2023/10/Conditions-generales-Assurance-Automobile.pdf', alignment: "right", fit: '65' },
                        ],
                        margin: [35, 30, 35, 0]
                    }
                } else {
                    // Header for subsequent pages
                    return {
                        stack: [commonHeader],
                        margin: [35, 10, 35, 0]
                    };
                }
            },
            content: risques.map((risq: any) => ({
                stack: [
                    {
                        style: "table",
                        table: {
                            widths: ["*"],
                            alignment: "left",
                            body: [
                                [
                                    {
                                       
                                        text: `DÃ©compte de Prime Flotte Automobile`,
                                        style: "headerTable"
                                    },
                                ],
                            ],
                        }
                    },

                    {
                        style: "table",
                        table: {
                            widths: ["*"],
                            alignment: "left",
                            body: [
                                [
                                    {
                                        text: `RÃ©fÃ©rence du contrat`,
                                        style: "headerTable"
                                    },
                                ],
                            ],
                        }
                    },
                    {
                        style: "table",
                        table: {
                            widths: ["*", "*"],
                            alignment: "left",
                            body: [


                                [
                                    {
                                        text: `Client : `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: contrat?.personnesList.map((peronne: any) => peronne?.personne.raisonSocial)[0],
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                ],
                                [
                                    {
                                        text: `CrÃ©dit Preneur :`,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: risq?.risque.find((risque: any) => risque.colonne == "Nom & PrÃ©nom CrÃ©dit Preneur/Raison Social").valeur,
                                        fontSize: "8",
                                        color: 'black',

                                    },
                                ],
                                [
                                    {
                                        text: `Adresse du CrÃ©dit Preneur : `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: risq?.risque.find((risque: any) => risque.colonne == "Adresse CrÃ©dit Preneur").valeur,
                                        fontSize: "8",
                                        color: 'black',

                                    },
                                ],

                                [
                                    {
                                        text: `Date d'effet  `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: contrat?.dateEffet?.split("T")[0],
                                        fontSize: "8",
                                        color: 'black',

                                    },
                                ],
                                [
                                    {
                                        text: `Date dâÃ©chÃ©ance  `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: contrat?.dateExpiration?.split("T")[0],
                                        fontSize: "8",
                                        color: 'black',

                                    },
                                ],
                                [
                                    {
                                        text: `Agence : `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: contrat?.agence?.codeAgence + " " + contrat?.agence?.raisonSocial,
                                        fontSize: "8",
                                        color: 'black',

                                    },
                                ],
                                [
                                    {
                                        text: `Contrat NÂ° : : `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: risq?.risque.find((risque: any) => risque.colonne == "Numero de contrat").valeur,
                                        fontSize: "8",
                                        color: 'black',

                                    },
                                ],
                                [
                                    {
                                        text: `MatÃ©riel NÂ° : `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: risq?.risque.find((risque: any) => risque.colonne == "NumÃ©ro de MatÃ©riel").valeur,
                                        fontSize: "8",
                                        color: 'black',

                                    },
                                ],
                            ],

                        }
                    },

                    {
                        style: "table",
                        table: {
                            widths: ["*"],
                            alignment: "left",
                            body: [
                                [
                                    {
                                        text: `VÃ©hicule`,
                                        style: "headerTable"
                                    },
                                ],
                            ],
                        }
                    },

                    {
                        style: "table",
                        table: {
                            widths: ["*", "*"],
                            alignment: "left",
                            body: [


                                [
                                    {
                                        text: `Marque  : `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: risq?.risque.find((risque: any) => risque.colonne == "Marque").valeur,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                ],
                                [
                                    {
                                        text: `modÃ¨le  : `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: risq?.risque.find((risque: any) => risque.colonne == "ModÃ¨le").valeur,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                ],
                                [
                                    {
                                        text: `Genre  : `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: risq?.risque.find((risque: any) => risque.colonne == "classe de vehicule").valeur,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                ],
                                [
                                    {
                                        text: `Immatriculation  : `,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                    {
                                        text: risq?.risque.find((risque: any) => risque.colonne == "NÂ° d'Immatriculation").valeur,
                                        fontSize: "8",
                                        color: 'black',
                                    },
                                ],
                            ],
                        }
                    },
                    {
                        style: "table",
                        table: {
                            widths: ["*"],
                            alignment: "left",
                            body: [
                                [
                                    {
                                        text: `Primes nettes`,
                                        style: "headerTable"
                                    },
                                ],
                            ],
                        }
                    },

                    {
                        style: "table",
                        table: {
                            widths: ["*", "*"],

                            body: [headersGarantie].concat(
                                dataParam?.find((element: any) => element.risque == risq?.idRisque).garantieList.map((item: any) => {

                                    let garantie: any;
                                    let prime: any = [];

                                    garantie = item.description
                                    // prime = item.prime
                                    prime = item.primeProrata

                                    return [
                                        [{ text: garantie, fontSize: "8" }],
                                        [{ text: Number(prime).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD", fontSize: "8" }],
                                    ]
                                }),
                            )
                        }
                    },


                    {
                        columns: [

                            {
                                style: "table",
                                table: {

                                    widths: ["*", "*", "*", "*", "*", "*"],
                                    body: [
                                        [
                                            {
                                               
                                                text: `Prime nette`,
                                                style: "headerTable"
                                            },
                                            contrat?.idHistorique == undefined ?
                                                {
                                                    text: `CoÃ»t de police`,
                                                    style: "headerTable"
                                                }
                                                : {
                                                    text: `Frais de gestion`,
                                                    style: "headerTable"
                                                },
                                            {
                                                text: `T.V.A`,
                                                style: "headerTable"
                                            },

                                            {
                                                text: `F.G.A`,
                                                style: "headerTable"
                                            },
                                            {
                                                text: `Timbre de dimension`,
                                                style: "headerTable"
                                            },

                                            {
                                                text: `Timbre graduÃ©`,
                                                style: "headerTable"
                                            },
                                        ],
                                        [
                                            {
                                                text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP101')?.prime).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            contrat?.idHistorique == undefined ?
                                                {
                                                    text: Number(quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01')?.prime ?
                                                        quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01')?.prime
                                                        : quittance?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T01')?.taxe.valeur).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                }
                                                : {
                                                    text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T08')?.prime).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                    fontSize: 10
                                                },
                                            {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T04')?.prime).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T07')?.prime).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                            {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T03')?.prime).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },

                                            {
                                                text: Number(contrat?.taxeList?.find((taxe: any) => taxe?.taxe?.code == 'T02')?.prime).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10
                                            },
                                        ],
                                        [
                                            { text: '', colSpan: 4 },
                                            {},
                                            {},
                                            {},
                                            {
                                                text: `Prime Totale`,
                                                style: "headerTable",
                                            },
                                            {
                                                text: Number(contrat?.primeList?.find((prime: any) => prime?.typePrime?.code == 'CP186')?.prime).toLocaleString('en-US', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + " DZD",
                                                fontSize: 10,
                                             
                                            },   
                                           
                                            
                                        ],
                                        
                                    ],
                                }
                            }
                        ],
                    },
                    {
                        text:'',
                         pageBreak: risq.idRisque != risques[risques.length - 1].idRisque ? 'after' : null,
                       
                  
                    }

                ],

            })),











            styles: {
                sectionHeader: {
                    bold: true,
                    color: "#d14723",
                    fontSize: 10,
                    alignment: "right"
                },
                BG: {
                    fontSize: 8
                },
                table: {
                    margin: [0, 10, 0, 0]
                },
                headerTable: {
                    alignment: "center",
                    bold: true,
                    fontSize: 10,
                    color: "#00008F",
                    
                }
            }
        }
        pdfMake.createPdf(docDefinitionContrat).download("CP_" + contrat?.idContrat);
    }

    buildTableBody(data: any, columns: any) {
        var body = [];

        if (columns.includes("text1"))
            body.push()
        else {
            if (columns.includes("prime")) {
                columns = columns.map((col: any) => {
                    col.text = col
                    col.style = "headerTable"
                })
                body.push(columns);
            }
            else {
                let column: any = [];
                columns.map((col: any) => {
                    let column1 = {
                        text: '',
                        style: ''
                    }
                    column1.text = col.replace(/_/g, ' ');
                    column1.style = "headerTable"


                    column.push(column1);
                })

                body.push(column);
            }
        }

        data.forEach(function (row: any) {
            const dataRow: any = [];

            columns.forEach(function (column: any) {
                dataRow.push(row[column]);
            })

            body.push(dataRow);
        });

        return body;
    }

    table(data: any, columns: any) {
        let pourcentage = 100 / columns?.length;
        let width: any = []
        columns.map((col: any) => {
            width.push(pourcentage + "%")
        })

        return [{
            layout: '',
            table: {
                headerRows: 1,
                widths: width,
                body: this.buildTableBody(data, columns)
            }
        }];
    }

    private logs(response: any) {
    }
}
