<div class="container ">
    <div class="header">

        <h2 class="title-table">Listes des contrats commercial</h2>

        <button class="btn btn-secondary" style="display: flex;

            align-items: center;" (click)="redirectToCreation()">

            <mat-icon aria-hidden="false" aria-label="ajouter pack "
                class="material-symbols-outlined">add_circle</mat-icon>

            Soumettre un contrat

        </button>

    </div>

    <table mat-table [dataSource]="dataSource" class="
        gestion-table">

        <!-- idDevis Column -->
        <ng-container matColumnDef="idContrat">
            <th mat-header-cell *matHeaderCellDef> N°. police </th>
            <td mat-cell *matCellDef="let element"> {{element.id}} </td>
        </ng-container>
        <!-- dateDevis Column -->
        <ng-container matColumnDef="produit">
            <th mat-header-cell *matHeaderCellDef> Produit </th>
            <td mat-cell *matCellDef="let element"> {{element.descriptionProduit }} </td>
        </ng-container>
        <!-- sousProduit Column -->
        <ng-container matColumnDef="sousProduit">
            <th mat-header-cell *matHeaderCellDef>Sous produit</th>
            <td mat-cell *matCellDef="let element"> {{element.descriptionSousProduit}}
            </td>
        </ng-container>
        <!-- Mouvemant Column -->
        <ng-container matColumnDef="mouvemant">
            <th mat-header-cell *matHeaderCellDef> Mouvemant </th>
            <td mat-cell *matCellDef="let element"> {{element.mouvement}} </td>
        </ng-container>
        <!-- date debut Column -->
        <ng-container matColumnDef="dateDebut">
            <th mat-header-cell *matHeaderCellDef> Date début </th>
            <td mat-cell *matCellDef="let element"> {{element.dateDebut |
                dateFormatPipe}}
            </td>
        </ng-container>
        <!-- dateFin Column -->
        <ng-container matColumnDef="dateFin">
            <th mat-header-cell *matHeaderCellDef> Date fin </th>
            <td mat-cell *matCellDef="let element"> {{element.dateFin |
                dateFormatPipe}}
            </td>
        </ng-container>
        <!-- Action Column -->
        <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef> Action </th>

            <td mat-cell *matCellDef="let element">
                <button mat-icon-button
                    type="button"
                    [matMenuTriggerFor]="menu"
                    aria-label="menu devis list">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu="matMenu"
                    xPosition="after"
                    class="menu-devis">
                    <button mat-menu-item
                        type="button"  (click)="consultContrat(element.id)">
                        <mat-icon>zoom_in</mat-icon>
                        <span>Consulter</span>
                    </button>
                    <button mat-menu-item
                        type="button"  (click)="addSite(element.id)">
                        <mat-icon>zoom_in</mat-icon>
                        <span>Ajouter</span>
                    </button>
                </mat-menu>                   
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"
            class="example-second-header-row">
        </tr>

        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    <mat-paginator [length]="personneTable.totalElements" *ngIf="dataSource.data.length!=0" [pageSize]="10"  (page)="onPageChange($event)">
    </mat-paginator>

</div>