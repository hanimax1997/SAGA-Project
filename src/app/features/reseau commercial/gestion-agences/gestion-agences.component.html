<div class="container ">

    <div class="header">

        <h2 class="title-table">Listes des agences</h2>

        <button class="btn btn-secondary" style="display: flex;

            align-items: center;" (click)="navigateToAllCreate()">

            <mat-icon aria-hidden="false" aria-label="ajouter pack "

                class="material-symbols-outlined">add_circle</mat-icon>

            Ajouter une nouvelle agence 



        </button>



    </div>

    <mat-divider></mat-divider>

    <div class="filter">

        <form #formDirective="ngForm" [formGroup]="formFilter" class="row"

            style="margin-left: 1rem;" (ngSubmit)="submitFilter()">

            <mat-form-field class="col-md-2" appearance="outline">

                <mat-label>Code agence</mat-label>

                <input type="text" matInput placeholder=""

                    formControlName="codeAgence">

            </mat-form-field>

            <!-- type reseau-->



            <mat-form-field class="col-md-2" appearance="outline">

                <mat-label>Réseau de distribution</mat-label>

                <mat-select formControlName="reseauDistribution">

                    <mat-option>-- Aucun --</mat-option>

                    <ng-container *ngFor="let reseau of reseauDist">

                        <mat-option

                            [value]="reseau.idReseau">

                            {{reseau.description}}

                        </mat-option>

                    </ng-container>

                </mat-select>

            </mat-form-field>

            <!-- zone-->

            <mat-form-field class="col-md-2" appearance="outline">

                <mat-label>Zones</mat-label>

                <mat-select formControlName="zone">

                    <mat-option>-- Aucune --</mat-option>

                    <ng-container *ngFor="let zone of zones">

                        <mat-option

                            [value]="zone.idParam">

                            {{zone.description}}

                        </mat-option>

                    </ng-container>

                </mat-select>

            </mat-form-field>



            <!-- zone-->

            <mat-form-field class="col-md-2" appearance="outline">

                <mat-label>Statut</mat-label>

                <mat-select formControlName="statut">

                    <mat-option>-- Aucune --</mat-option>

                    <ng-container>

                        <mat-option value="active">Active</mat-option>

                        <mat-option value="desactive">Désactivé</mat-option>

                    </ng-container>

                </mat-select>

            </mat-form-field>

            <div class="col-md-12 row-button">
                <button class="btn btn-outline" (click)="uploadAgences()" type="button">Upload agences a SAP</button>
                <button class="btn btn-action " type="submit">Filtrer</button>

            </div>



        </form>

    </div>



    <table mat-table [dataSource]="dataSourceAllAgences" class="

        table">

        <ng-container matColumnDef="codeAgence">

            <th mat-header-cell *matHeaderCellDef> Code </th>

            <td mat-cell *matCellDef="let element"> {{element.codeAgence}} </td>
        </ng-container>

        <!-- Nom Column -->

        <ng-container matColumnDef="nomAgence">

            <th mat-header-cell *matHeaderCellDef> Nom </th>

            <td mat-cell *matCellDef="let element">

                {{element.nomAgence}}

            </td>

        </ng-container>



        <!-- type de réseau Column -->

        <ng-container matColumnDef="typeReseau">

            <th mat-header-cell *matHeaderCellDef> type de réseau </th>

            <td mat-cell *matCellDef="let element">

                {{element.reseauDistribution }} </td>

        </ng-container>

        <!-- Zone Column -->

        <ng-container matColumnDef="zone">

            <th mat-header-cell *matHeaderCellDef> Zone </th>

            <td mat-cell *matCellDef="let element">{{element.zone}}

            </td>

        </ng-container>

        <!-- statut Column -->

        <ng-container matColumnDef="status">

            <th mat-header-cell *matHeaderCellDef> Statut </th>

            <td mat-cell *matCellDef="let element">{{element.statut }} </td>

        </ng-container>

        <!-- Action Column -->

        <ng-container matColumnDef="action">

            <th mat-header-cell *matHeaderCellDef> Action </th>

            <td mat-cell *matCellDef="let element">

                <button mat-icon-button

                    type="button"

                    [matMenuTriggerFor]="menu"

                    aria-label="menu pack list">

                    <mat-icon>more_vert</mat-icon>

                </button>

                <mat-menu #menu="matMenu"

                    xPosition="after"

                    class="menu-pack">

                    <button mat-menu-item

                        (click)="editAgence(element.idAgence)"

                        type="button"

                        [disabled]="element.statut=='désactivé'">

                        <mat-icon>edit</mat-icon>

                        <span>Modifier Agence</span>

                    </button>

                    <button mat-menu-item

                        (click)="desactivateAgence(element.idAgence,element.idPersonneMorale?.raisonSocial)"

                        [disabled]="element.statut=='désactivé'"

                        type="button">

                        <mat-icon>delete</mat-icon>

                        <span>Désactiver Agence</span>

                    </button>

                </mat-menu>

            </td>

        </ng-container>




        <!-- <tr mat-header-row *matHeaderRowDef="['header-taxe']"

            class="example-first-header-row">

        </tr> -->

        <tr mat-header-row *matHeaderRowDef="displayedAgenceColumns"

            class="example-second-header-row">

        </tr>




        <tr mat-row *matRowDef="let row; columns: displayedAgenceColumns;"></tr>

    </table>

    <mat-paginator [pageSize]="10" [pageSizeOptions]="[5, 10]"

        aria-label="Select page of users"></mat-paginator>



</div>