"use strict";(self.webpackChunkcoreSystem=self.webpackChunkcoreSystem||[]).push([[208],{3208:(Nn,J,f)=>{f.r(J),f.d(J,{AppDateAdapter:()=>w,GestionDevisCommercialLineModule:()=>An});var A=f(6895),I=f(3238),G=f(4479),V=f(3567),N=f(2510),O=f(9523),Z=f(5861),F=f(5017),x=f(7155),u=f(4006),q=f(2644),B=f(7470),$=f(5226),P=f.n($),Q=f(5439),H=f(6666),T=f(7340),j=f(6274),z=f(8692),K=f(7489),e=f(4650),W=f(6436),X=f(5412),ee=f(7009),te=f(5617),ie=f(2473),oe=f(1351),ae=f(3388),ne=f(852),re=f(6944),se=f(8153),le=f(8056),me=f(6127),ce=f(3776),_e=f(7392),k=f(7084),R=f(8255),D=f(9549),ue=f(284),pe=f(8739),M=f(9602),de=f(4385),fe=f(4859),S=f(6257),ge=f(6709),Ce=f(2768);const he=["stepper"],xe=["fileInput"],ve=["innerTables"],Pe=["innerSort"];function be(i,a){1&i&&e._uU(0,"Information de l'assur\xe9(e) ")}function qe(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",38),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit,o=e.oxw();e.xp6(1),e.Q6J("disabled","45F"==o.codeProduit&&"PH"==t.code)("value",t),e.xp6(1),e.hij(" ",t.description," ")}}function Te(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function Le(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,Te,2,0,"div",30),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.typeClient.errors.required)}}function Ze(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function Ae(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,Ze,2,0,"div",30),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.nom.errors.required)}}function Ne(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function De(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,Ne,2,0,"div",30),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.prenom.errors.required)}}function ke(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Pr\xe9nom"),e.qZA(),e._UZ(3,"input",40),e.YNc(4,De,2,1,"mat-error",13),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.formInfosAssure.controls.prenom.errors)}}function ye(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function Ie(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," L'age de l'assur\xe9 doit etre sup\xe9rieur \xe0 18 ans"),e.qZA())}function Re(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," L'age de l'assur\xe9 doit etre inf\xe9rieur \xe0 107 ans"),e.qZA())}function Me(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,ye,2,0,"div",30),e.YNc(2,Ie,2,0,"div",30),e.YNc(3,Re,2,0,"div",30),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.dateNaissance.errors.required),e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.dateNaissance.errors.ageInf18),e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.dateNaissance.errors.ageSup107)}}function Se(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Date Naissance"),e.qZA(),e._UZ(3,"input",41)(4,"mat-datepicker-toggle",42)(5,"mat-datepicker",null,43),e.YNc(7,Me,4,3,"mat-error",13),e.qZA()),2&i){const t=e.MAs(6),o=e.oxw();e.xp6(3),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",o.formInfosAssure.controls.dateNaissance.errors)}}function Je(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function Oe(i,a){1&i&&(e.TgZ(0,"div",39),e._uU(1,"adresse email non conforme. "),e.qZA())}function Qe(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,Je,2,0,"div",30),e.YNc(2,Oe,2,0,"div",13),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.email.errors.required),e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.email.errors.pattern)}}function Ye(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}function Ue(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function Ee(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,Ue,2,0,"div",30),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.typeContact.errors.required)}}function we(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function Ge(i,a){1&i&&(e.TgZ(0,"div",39),e._uU(1,"cet num\xe9ro est invalide "),e.qZA())}function Ve(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,we,2,0,"div",30),e.YNc(2,Ge,2,0,"div",13),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.tel.errors.required),e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.tel.errors.pattern)}}function Fe(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.duree.id_duree),e.xp6(1),e.hij(" ",t.duree.description," ")}}function Be(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function $e(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,Be,2,0,"div",30),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.duree.errors.required)}}function He(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Dur\xe9e"),e.qZA(),e.TgZ(3,"mat-select",45),e.YNc(4,Fe,3,2,"ng-container",12),e.qZA(),e.YNc(5,$e,2,1,"mat-error",13),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.durees),e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.duree.errors)}}function je(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.idAgence),e.xp6(1),e.hij(" ",t.nomAgence," ")}}function ze(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function Ke(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,ze,2,0,"div",30),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.agence.errors.required)}}function We(i,a){if(1&i&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.code),e.xp6(1),e.hij(" ",t.description," ")}}function Xe(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Type du Bien"),e.qZA(),e.TgZ(3,"mat-select",46),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onSousProduitSelected(n.value))}),e.YNc(4,We,2,2,"mat-option",47),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.sousProduits)}}function et(i,a){if(1&i&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.code),e.xp6(1),e.hij(" ",t.description," ")}}function tt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Sous produit"),e.qZA(),e.TgZ(3,"mat-select",46),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onSousProduitSelected(n.value))}),e.YNc(4,et,2,2,"mat-option",47),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.sousProduits)}}function it(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t.description," ")}}function ot(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Type police"),e.qZA(),e.TgZ(3,"mat-select",48),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onTypePoliceSelecteted(n.value))}),e.YNc(4,it,3,2,"ng-container",12),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.typePolice)}}function at(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.duree.id_duree),e.xp6(1),e.hij(" ",t.duree.description," ")}}function nt(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function rt(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,nt,2,0,"div",30),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.duree.errors.required)}}function st(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Dur\xe9e"),e.qZA(),e.TgZ(3,"mat-select",45),e.YNc(4,at,3,2,"ng-container",12),e.qZA(),e.YNc(5,rt,2,1,"mat-error",13),e.qZA()),2&i){const t=e.oxw();e.xp6(4),e.Q6J("ngForOf",t.durees),e.xp6(1),e.Q6J("ngIf",t.formInfosAssure.controls.duree.errors)}}function lt(i,a){1&i&&e._uU(0,"Information du risque")}function mt(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t.description," ")}}function ct(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function _t(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.hij(" ",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.msg," ")}}function ut(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",61),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw().$implicit,_=e.oxw(3);return e.KtG(_.getRelation(null==r.typeChamp?null:r.typeChamp.code,r.isParent,r.idParamRisque,n.value.idParam,r.formName,r.codeParam))}),e.YNc(4,mt,3,2,"ng-container",12),e.qZA(),e.YNc(5,ct,2,0,"mat-error",13),e.YNc(6,_t,2,1,"mat-error",13),e.qZA()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.hij("",t.libelle,"1 "),e.xp6(1),e.s9C("formControlName",t.formName),e.xp6(1),e.Q6J("ngForOf",t.reponses),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.bloquant)}}function pt(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t.description," ")}}function dt(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function ft(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.hij(" ",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.msg," ")}}function gt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",61),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw().$implicit,_=e.oxw(3);return e.KtG(_.getRelation(null==r.typeChamp?null:r.typeChamp.code,r.isParent,r.idParamRisque,n.value.id,r.formName,r.codeParam))}),e.YNc(4,pt,3,2,"ng-container",12),e.qZA(),e.YNc(5,dt,2,0,"mat-error",13),e.YNc(6,ft,2,1,"mat-error",13),e.qZA()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.hij("",t.libelle,"2 "),e.xp6(1),e.s9C("formControlName",t.formName),e.xp6(1),e.Q6J("ngForOf",t.reponses),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.bloquant)}}function Ct(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function ht(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est non conforme "),e.qZA())}function xt(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est non conforme "),e.qZA())}function vt(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs n'est pas conforme "),e.qZA())}function Pt(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.hij(" ",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.msg," ")}}function bt(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",62),e.YNc(4,Ct,2,0,"mat-error",13),e.YNc(5,ht,2,0,"mat-error",13),e.YNc(6,xt,2,0,"mat-error",13),e.YNc(7,vt,2,0,"mat-error",13),e.YNc(8,Pt,2,1,"mat-error",13),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.hij("",t.libelle,"3"),e.xp6(1),e.s9C("formControlName",t.formName),e.Q6J("readonly","97"==o.codeProduit&&("P241"==t.codeParam||"P270"==t.codeParam||"P318"==t.codeParam))("value","P318"==t.codeParam?o.zone_sis:""),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.max),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.min),e.xp6(1),e.Q6J("ngIf",(null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.pattern)||(null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.maxlength)||(null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.minlength)),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.bloquant)}}function qt(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function Tt(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est non conforme "),e.qZA())}function Lt(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est non conforme "),e.qZA())}function Zt(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs n'est pas conforme "),e.qZA())}function At(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.hij(" ",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.msg," ")}}function Nt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"input",63),e.NdJ("ngModelChange",function(n){e.CHM(t);const r=e.oxw().$implicit,_=e.oxw(3);return e.KtG(_.onInput(n,r.codeParam))}),e.qZA(),e.YNc(4,qt,2,0,"mat-error",13),e.YNc(5,Tt,2,0,"mat-error",13),e.YNc(6,Lt,2,0,"mat-error",13),e.YNc(7,Zt,2,0,"mat-error",13),e.YNc(8,At,2,1,"mat-error",13),e.qZA()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.hij("",t.libelle,"4"),e.xp6(1),e.s9C("formControlName",t.formName),e.Q6J("readonly","P198"==t.codeParam||"P223"==t.codeParam||"P224"==t.codeParam||"97"==o.codeProduit&&"CTI"==o.selectedSousProduit&&("P241"==t.codeParam||"P270"==t.codeParam||"P245"==t.codeParam&&0==o.isBOUser))("value","P223"==t.codeParam?o.longitude:"P224"==t.codeParam?o.latitude:""),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.max),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.min),e.xp6(1),e.Q6J("ngIf",(null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.pattern)||(null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.maxlength)||(null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.minlength)),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.bloquant)}}function Dt(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function kt(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.hij(" ",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.msg," ")}}function yt(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",64)(4,"mat-datepicker-toggle",42)(5,"mat-datepicker",null,65),e.YNc(7,Dt,2,0,"mat-error",13),e.YNc(8,kt,2,1,"mat-error",13),e.qZA()),2&i){const t=e.MAs(6),o=e.oxw().$implicit,n=e.oxw(3);e.xp6(2),e.Oqu(o.libelle),e.xp6(1),e.s9C("formControlName",o.formName),e.Q6J("matDatepicker",t),e.xp6(1),e.Q6J("for",t),e.xp6(3),e.Q6J("ngIf",null==n.formParamRisque.get(o.formName).errors?null:n.formParamRisque.get(o.formName).errors.required),e.xp6(1),e.Q6J("ngIf",null==n.formParamRisque.get(o.formName).errors?null:n.formParamRisque.get(o.formName).errors.bloquant)}}function It(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t.marque," ")}}function Rt(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function Mt(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,Rt,2,0,"div",30),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required)}}function St(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",61),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw(4);return e.KtG(r.getModeleByMarque(n.value))}),e.YNc(4,It,3,2,"ng-container",12),e.qZA(),e.YNc(5,Mt,2,1,"mat-error",13),e.qZA()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.hij(" ",t.libelle," "),e.xp6(1),e.s9C("formControlName",t.formName),e.xp6(1),e.Q6J("ngForOf",o.marques),e.xp6(1),e.Q6J("ngIf",o.formParamRisque.get(t.formName).errors)}}function Jt(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t.modele," ")}}function Ot(i,a){1&i&&(e.TgZ(0,"div"),e._uU(1," ce champs est obligatoire"),e.qZA())}function Qt(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e.YNc(1,Ot,2,0,"div",30),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required)}}function Yt(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",66),e.YNc(4,Jt,3,2,"ng-container",12),e.qZA(),e.YNc(5,Qt,2,1,"mat-error",13),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.hij(" ",t.libelle," "),e.xp6(1),e.s9C("formControlName",t.formName),e.xp6(1),e.Q6J("ngForOf",o.modeles),e.xp6(1),e.Q6J("ngIf",o.formParamRisque.get(t.formName).errors)}}const Ut=function(){return["P25","P26"]},Et=function(){return["P281","P282","P245","P152"]};function wt(i,a){if(1&i&&(e.ynx(0),e.YNc(1,ut,7,5,"mat-form-field",16),e.YNc(2,gt,7,5,"mat-form-field",16),e.YNc(3,bt,9,9,"mat-form-field",16),e.YNc(4,Nt,9,9,"mat-form-field",16),e.YNc(5,yt,9,6,"mat-form-field",17),e.YNc(6,St,6,4,"mat-form-field",16),e.YNc(7,Yt,6,4,"mat-form-field",16),e.BQk()),2&i){const t=a.$implicit,o=e.oxw(3);e.xp6(1),e.Q6J("ngIf",(null==t.sousProduit||(null==t.sousProduit?null:t.sousProduit.code)==o.selectedSousProduit)&&"L01"==(null==t.typeChamp?null:t.typeChamp.code)&&"P25"!=t.codeParam&&"P26"!=t.codeParam),e.xp6(1),e.Q6J("ngIf",(null==(null==t.sousProduit?null:t.sousProduit.code)||(null==t.sousProduit?null:t.sousProduit.code)==o.selectedSousProduit)&&"L08"==(null==t.typeChamp?null:t.typeChamp.code)),e.xp6(1),e.Q6J("ngIf","97"!=o.codeProduit&&("L02"==(null==t.typeChamp?null:t.typeChamp.code)||"L07"==(null==t.typeChamp?null:t.typeChamp.code))&&"P25"!=t.codeParam&&"P26"!=t.codeParam||"97"==o.codeProduit&&("L02"==(null==t.typeChamp?null:t.typeChamp.code)||"L07"==(null==t.typeChamp?null:t.typeChamp.code))&&"P25"!=t.codeParam&&"P26"!=t.codeParam&&(null==(null==t.sousProduit?null:t.sousProduit.code)||(null==t.sousProduit?null:t.sousProduit.code)==o.selectedSousProduit)),e.xp6(1),e.Q6J("ngIf",!(null!=(null==t.sousProduit?null:t.sousProduit.code)&&(null==t.sousProduit?null:t.sousProduit.code)!=o.selectedSousProduit||"L03"!=(null==t.typeChamp?null:t.typeChamp.code)||e.DdM(7,Ut).includes(t.codeParam)||"CTH"==o.selectedSousProduit&&e.DdM(8,Et).includes(t.codeParam))),e.xp6(1),e.Q6J("ngIf",(null==(null==t.sousProduit?null:t.sousProduit.code)||(null==t.sousProduit?null:t.sousProduit.code)==o.selectedSousProduit)&&"date"==(null==t.typeChamp?null:t.typeChamp.description)),e.xp6(1),e.Q6J("ngIf",(null==(null==t.sousProduit?null:t.sousProduit.code)||(null==t.sousProduit?null:t.sousProduit.code)==o.selectedSousProduit)&&"P25"==t.codeParam),e.xp6(1),e.Q6J("ngIf",(null==(null==t.sousProduit?null:t.sousProduit.code)||(null==t.sousProduit?null:t.sousProduit.code)==o.selectedSousProduit)&&"P26"==t.codeParam)}}function Gt(i,a){if(1&i&&(e.TgZ(0,"mat-expansion-panel",58)(1,"mat-expansion-panel-header")(2,"mat-panel-title",59),e._uU(3),e.qZA()(),e.TgZ(4,"div",60),e.YNc(5,wt,8,9,"ng-container",12),e.qZA()()),2&i){const t=e.oxw(2);e.Q6J("expanded",!0),e.xp6(3),e.hij(" ",t.produitInfo.description,"1 "),e.xp6(2),e.Q6J("ngForOf",t.tableauxParCategorie)}}function Vt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",67)(1,"mat-expansion-panel-header")(2,"mat-panel-title",59),e._uU(3," Informations risque "),e.qZA()(),e.ynx(4,68),e.TgZ(5,"p"),e._uU(6,"Veuillez choisir le nombre de vehicule "),e.qZA(),e.TgZ(7,"mat-form-field",10)(8,"mat-label"),e._uU(9,"Nombre vehicule"),e.qZA(),e._UZ(10,"input",69),e.qZA(),e.TgZ(11,"div",70)(12,"div",14)(13,"p"),e._uU(14,"Veuillez choisir entre remplir un formulaire ou importer un fichier."),e.qZA()(),e.TgZ(15,"div",14)(16,"div",71)(17,"button",72),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.formWay("form"))}),e._uU(18,"Formulaire"),e.qZA(),e.TgZ(19,"button",72),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.formWay("file"))}),e._uU(20,"Fichier "),e.qZA()()()(),e.BQk(),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("expanded",!0),e.xp6(10),e.Q6J("formControl",t.nmbVehicule)}}function Ft(i,a){1&i&&(e.TgZ(0,"mat-expansion-panel-header")(1,"mat-panel-title",59),e._uU(2," vehicule "),e.qZA()())}function Bt(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",t.description," ")}}function $t(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function Ht(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.hij(" ",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.msg," ")}}function jt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",61),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw().$implicit,_=e.oxw(3);return e.KtG(_.getRelation(null==r.typeChamp?null:r.typeChamp.code,r.isParent,r.idParamRisque,n.value.idParam,r.formName,r.codeParam))}),e.YNc(4,Bt,3,2,"ng-container",12),e.qZA(),e.YNc(5,$t,2,0,"mat-error",13),e.YNc(6,Ht,2,1,"mat-error",13),e.qZA()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.hij("",t.libelle," "),e.xp6(1),e.s9C("formControlName",t.formName),e.xp6(1),e.Q6J("ngForOf",t.reponses),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.bloquant)}}function zt(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit,o=e.oxw(2).$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ","P215"===o.codeParam?t.nationalite:t.description," ")}}function Kt(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function Wt(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.hij(" ",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.msg," ")}}function Xt(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e.TgZ(3,"mat-select",61),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw().$implicit,_=e.oxw(3);return e.KtG(_.getRelation(null==r.typeChamp?null:r.typeChamp.code,r.isParent,r.idParamRisque,n.value.idParam,r.formName,r.codeParam))}),e.YNc(4,zt,3,2,"ng-container",12),e.qZA(),e.YNc(5,Kt,2,0,"mat-error",13),e.YNc(6,Wt,2,1,"mat-error",13),e.qZA()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.hij("",t.libelle," "),e.xp6(1),e.s9C("formControlName",t.formName),e.xp6(1),e.Q6J("ngForOf",t.reponses),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.bloquant)}}function ei(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function ti(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.hij(" ",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.msg," ")}}function ii(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",73),e.YNc(4,ei,2,0,"mat-error",13),e.YNc(5,ti,2,1,"mat-error",13),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.Oqu(t.libelle),e.xp6(1),e.s9C("formControlName",t.formName),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.bloquant)}}function oi(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function ai(i,a){if(1&i&&(e.TgZ(0,"mat-error",39),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit,o=e.oxw(3);e.xp6(1),e.hij(" ",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.msg," ")}}function ni(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",74),e.YNc(4,oi,2,0,"mat-error",13),e.YNc(5,ai,2,1,"mat-error",13),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.Oqu(t.libelle),e.xp6(1),e.s9C("formControlName",t.formName),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.required),e.xp6(1),e.Q6J("ngIf",null==o.formParamRisque.get(t.formName).errors?null:o.formParamRisque.get(t.formName).errors.bloquant)}}function ri(i,a){if(1&i&&(e.ynx(0),e.YNc(1,jt,7,5,"mat-form-field",16),e.YNc(2,Xt,7,5,"mat-form-field",16),e.YNc(3,ii,6,4,"mat-form-field",16),e.YNc(4,ni,6,4,"mat-form-field",16),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf","L01"==(null==t.typeChamp?null:t.typeChamp.code)),e.xp6(1),e.Q6J("ngIf","L08"==(null==t.typeChamp?null:t.typeChamp.code)),e.xp6(1),e.Q6J("ngIf",("L02"==(null==t.typeChamp?null:t.typeChamp.code)||"L07"==(null==t.typeChamp?null:t.typeChamp.code))&&"P25"!=t.codeParam&&"P26"!=t.codeParam),e.xp6(1),e.Q6J("ngIf","L03"==(null==t.typeChamp?null:t.typeChamp.code))}}function si(i,a){if(1&i&&(e.TgZ(0,"mat-expansion-panel",67),e.YNc(1,Ft,3,0,"mat-expansion-panel-header",30),e.YNc(2,ri,5,4,"ng-container",12),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("expanded",!0),e.xp6(1),e.Q6J("ngIf",t.displayFormRisque),e.xp6(1),e.Q6J("ngForOf",t.tableauxParCategorieRisque)}}function li(i,a){if(1&i&&(e.TgZ(0,"mat-option",44),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t,"")}}function mi(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function ci(i,a){1&i&&(e.TgZ(0,"mat-error",39),e._uU(1," ce champs est obligatoire "),e.qZA())}function _i(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",10)(1,"mat-label"),e._uU(2,"Nouveau groupe"),e.qZA(),e._UZ(3,"input",80),e.YNc(4,ci,2,0,"mat-error",13),e.qZA()),2&i){const t=e.oxw(4);let o;e.xp6(4),e.Q6J("ngIf",null==(o=t.formParamRisque.get("newGroupe"))||null==o.errors?null:o.errors.required)}}function ui(i,a){if(1&i&&(e.TgZ(0,"div",14)(1,"mat-form-field",77)(2,"mat-label"),e._uU(3,"Groupes"),e.qZA(),e.TgZ(4,"mat-select",78)(5,"mat-option",79),e._uU(6,"Nouveau groupe"),e.qZA(),e.YNc(7,li,2,2,"mat-option",47),e.qZA(),e.YNc(8,mi,2,0,"mat-error",13),e.qZA(),e.YNc(9,_i,5,1,"mat-form-field",16),e.qZA()),2&i){const t=e.oxw(3);let o,n;e.xp6(7),e.Q6J("ngForOf",t.groupArray),e.xp6(1),e.Q6J("ngIf",null==(o=t.formParamRisque.get("groupe"))||null==o.errors?null:o.errors.required),e.xp6(1),e.Q6J("ngIf","new"==(null==(n=t.formParamRisque.get("groupe"))?null:n.value))}}function pi(i,a){1&i&&(e.TgZ(0,"div",14)(1,"mat-form-field",10)(2,"mat-label"),e._uU(3,"groupe"),e.qZA(),e._UZ(4,"input",81),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("readonly",!0))}function di(i,a){if(1&i&&(e.TgZ(0,"mat-expansion-panel",51)(1,"mat-expansion-panel-header")(2,"mat-panel-title"),e._uU(3," Groupe "),e.qZA()(),e.YNc(4,ui,10,3,"div",75),e.YNc(5,pi,5,1,"ng-template",null,76,e.W1O),e.qZA()),2&i){const t=e.MAs(6),o=e.oxw(2);e.Q6J("expanded",!0),e.xp6(4),e.Q6J("ngIf","T"!=o.codeProduit)("ngIfElse",t)}}function fi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",82),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.submitParamRisque())}),e._uU(1,"Ajouter"),e.qZA()}}function gi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.goBack())}),e._uU(1,"Retour"),e.qZA()}}function Ci(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Risque N\xb0 "),e.qZA())}function hi(i,a){if(1&i&&(e.TgZ(0,"td",92),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.risqueNum," ")}}function xi(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Groupe "),e.qZA())}function vi(i,a){if(1&i&&(e.TgZ(0,"td",92),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.groupe," ")}}function Pi(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Action"),e.qZA())}function bi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",92)(1,"button",93)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",94,95)(6,"button",96),e.NdJ("click",function(){const r=e.CHM(t).$implicit,_=e.oxw(3);return e.KtG(_.openDialog(r.risqueNum))}),e.TgZ(7,"mat-icon"),e._uU(8,"zoom_in"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"Consulter risque"),e.qZA()()()()}if(2&i){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function qi(i,a){1&i&&e._UZ(0,"tr",97)}function Ti(i,a){1&i&&e._UZ(0,"tr",98)}function Li(i,a){if(1&i&&(e.TgZ(0,"table",83),e.ynx(1,84),e.YNc(2,Ci,2,0,"th",85),e.YNc(3,hi,2,1,"td",86),e.BQk(),e.ynx(4,87),e.YNc(5,xi,2,0,"th",85),e.YNc(6,vi,2,1,"td",86),e.BQk(),e.ynx(7,88),e.YNc(8,Pi,2,0,"th",85),e.YNc(9,bi,11,1,"td",86),e.BQk(),e.YNc(10,qi,1,0,"tr",89),e.YNc(11,Ti,1,0,"tr",90),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("dataSource",t.dataSourceRisque),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumnsRisque),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsRisque)}}function Zi(i,a){if(1&i&&(e.TgZ(0,"li"),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t," ")}}function Ai(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"div",102)(2,"ul",103)(3,"span"),e._uU(4),e.qZA(),e.YNc(5,Zi,2,1,"li",12),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.hij("ligne ",t.ligne," "),e.xp6(1),e.Q6J("ngForOf",t.description)}}function Ni(i,a){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,Ai,6,2,"ng-container",30),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",0!=t.description.length)}}function Di(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",67)(1,"mat-expansion-panel-header")(2,"mat-panel-title",59),e._uU(3," impoter fichier "),e.qZA()(),e.TgZ(4,"div",14)(5,"p"),e._uU(6,"Veuillez importer le mod\xe8le."),e.qZA()(),e.TgZ(7,"div",14)(8,"div",99)(9,"input",100,101),e.NdJ("change",function(n){e.CHM(t);const r=e.oxw(2);return e.KtG(r.onFileSelected(n))}),e.qZA(),e.YNc(11,Ni,2,1,"div",12),e.qZA()()()}if(2&i){const t=e.oxw(2);e.Q6J("expanded",!0),e.xp6(11),e.Q6J("ngForOf",t.fileControle)}}function ki(i,a){if(1&i&&(e.TgZ(0,"form",49,50)(2,"mat-accordion",7)(3,"mat-expansion-panel",51)(4,"mat-expansion-panel-header")(5,"mat-panel-title"),e._uU(6," Information du risque "),e.qZA()(),e.YNc(7,Gt,6,3,"mat-expansion-panel",52),e.YNc(8,Vt,21,2,"mat-expansion-panel",53),e.YNc(9,si,3,3,"mat-expansion-panel",53),e.YNc(10,di,7,3,"mat-expansion-panel",54),e.TgZ(11,"div",55),e.YNc(12,fi,2,0,"button",56),e.YNc(13,gi,2,0,"button",28),e.qZA(),e.YNc(14,Li,12,3,"table",57),e.YNc(15,Di,12,2,"mat-expansion-panel",53),e.qZA()()()),2&i){const t=e.oxw();e.Q6J("formGroup",t.formParamRisque),e.xp6(3),e.Q6J("expanded",!0),e.xp6(4),e.Q6J("ngIf",t.multiRisque),e.xp6(1),e.Q6J("ngIf",t.multiRisque),e.xp6(1),e.Q6J("ngIf",1==t.risqueStep),e.xp6(1),e.Q6J("ngIf",t.multiRisque),e.xp6(2),e.Q6J("ngIf",t.multiRisque&&2!=t.risqueStep),e.xp6(1),e.Q6J("ngIf",2!=t.risqueStep),e.xp6(1),e.Q6J("ngIf",t.multiRisque&&0!=t.dataSourceRisque.data.length),e.xp6(1),e.Q6J("ngIf",2==t.risqueStep)}}function yi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",104),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.generateCalcul())}),e._uU(1,"Suivant3"),e.qZA()}}function Ii(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.risqueStep=0)}),e._uU(1,"Retour"),e.qZA()}}function Ri(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",105)(1,"button",104),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.checkVehiculeNumber())}),e._uU(2,"Suivant4"),e.qZA()()}}function Mi(i,a){1&i&&e._uU(0,"Pack et garanties00")}function Si(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.idPack0),e.xp6(1),e.hij(" ",t.description," ")}}function Ji(i,a){if(1&i&&(e.TgZ(0,"mat-form-field",77)(1,"mat-label"),e._uU(2,"Nombre de pages output"),e.qZA(),e._UZ(3,"input",69),e.qZA()),2&i){const t=e.oxw(2);e.xp6(3),e.Q6J("formControl",t.nbrPages)}}function Oi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",115)(1,"mat-checkbox",116),e.NdJ("change",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.applyTVA())}),e._uU(2," Exon\xe9ration de TVA"),e.qZA()()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("checked",!1)("formControl",t.checkedTVA)}}function Qi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",117),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.generateCalcul())}),e.TgZ(1,"mat-icon",118),e._uU(2," autorenew "),e.qZA(),e._uU(3," Calculer"),e.qZA()}}function Yi(i,a){if(1&i&&(e.TgZ(0,"div",102),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorTarif.msg)}}function Ui(i,a){if(1&i&&(e.TgZ(0,"div",102),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorHandler.msg)}}function Ei(i,a){1&i&&(e.TgZ(0,"div",102),e._uU(1,"Veuillez remplir tous les champs des garanties obligatoires/coch\xe9es"),e.qZA())}function wi(i,a){1&i&&e._UZ(0,"th",91)}function Gi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",92)(1,"mat-checkbox",131),e.NdJ("click",function(n){const _=e.CHM(t).$implicit,p=e.oxw(3);return n.stopPropagation(),e.KtG(p.garantieSelectedIds.push(_.idGarantie))})("change",function(n){const _=e.CHM(t).$implicit,p=e.oxw(3);return e.KtG(p.checkGarantie(_,n))}),e.qZA()()}if(2&i){const t=a.$implicit,o=a.dataIndex,n=e.oxw(3);e.xp6(1),e.Q6J("checked",t.checked)("formControl",n.getControl(o,"checked"))}}function Vi(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1,"Garantie "),e.qZA())}function Fi(i,a){if(1&i&&(e.TgZ(0,"td",92),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function Bi(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Plafond"),e.qZA())}function $i(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function Hi(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.ALo(3,"money"),e.ALo(4,"number"),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(3,2,e.xi3(4,4,t.valeur,"1.0-0"))," ")}}function ji(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",136),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.tarifReady=!1)}),e.TgZ(1,"mat-label"),e._uU(2,"Plafond"),e.qZA(),e.TgZ(3,"mat-select",137),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.tarifReady=!1)}),e.YNc(4,Hi,5,7,"ng-container",12),e.qZA()()}if(2&i){const t=e.oxw(2),o=t.dataIndex,n=t.$implicit,r=e.oxw(3);e.xp6(3),e.Q6J("formControl",r.getControl(o,"plafond")),e.xp6(1),e.Q6J("ngForOf",n.plafond)}}function zi(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",136),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(6);return e.KtG(n.tarifReady=!1)}),e.TgZ(1,"mat-label"),e._uU(2,"Plafond"),e.qZA(),e.TgZ(3,"input",139),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(6);return e.KtG(n.tarifReady=!1)}),e.qZA()()}if(2&i){const t=e.oxw(3).dataIndex,o=e.oxw(3);e.xp6(3),e.Q6J("formControl",o.getControl(t,"plafond"))}}function Ki(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(4).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.xi3(3,3,t.plafond[0].valeur,"1.0-0")))}}function Wi(i,a){1&i&&e._uU(0," - ")}function Xi(i,a){if(1&i&&(e.YNc(0,Ki,4,6,"span",132),e.YNc(1,Wi,1,0,"ng-template",null,140,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw(3).$implicit;e.Q6J("ngIf","0"!=o.plafond[0].valeur)("ngIfElse",t)}}function eo(i,a){if(1&i&&(e.YNc(0,zi,4,1,"mat-form-field",134),e.YNc(1,Xi,3,2,"ng-template",null,138,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw(2).$implicit;e.Q6J("ngIf","input"==o.plafond[0].descriptionvVal)("ngIfElse",t)}}function to(i,a){if(1&i&&(e.YNc(0,ji,5,2,"mat-form-field",134),e.YNc(1,eo,3,2,"ng-template",null,135,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",o.plafond.length>1)("ngIfElse",t)}}function io(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,$i,2,0,"span",132),e.YNc(2,to,3,2,"ng-template",null,133,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0==t.plafond.length)("ngIfElse",o)}}function oo(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Taux "),e.qZA())}function ao(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function no(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.ALo(3,"money"),e.ALo(4,"number"),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(3,2,e.xi3(4,4,t.valeur,"1.0-0"))," ")}}function ro(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",136),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.tarifReady=!1)}),e.TgZ(1,"mat-label"),e._uU(2,"taux"),e.qZA(),e.TgZ(3,"mat-select",137),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.tarifReady=!1)}),e.YNc(4,no,5,7,"ng-container",12),e.qZA()()}if(2&i){const t=e.oxw(2),o=t.dataIndex,n=t.$implicit,r=e.oxw(3);e.xp6(3),e.Q6J("formControl",r.getControl(o,"taux")),e.xp6(1),e.Q6J("ngForOf",n.taux)}}function so(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"taux "),e.qZA(),e._UZ(3,"input",144),e.qZA()),2&i){const t=e.oxw(3).dataIndex,o=e.oxw(3);e.xp6(3),e.Q6J("formControl",o.getControl(t,"taux"))("readonly",o.isReadonly())}}function lo(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.xi3(3,3,t.taux[0].valeur,"1.0-0")))}}function mo(i,a){if(1&i&&(e.YNc(0,so,4,2,"mat-form-field",132),e.YNc(1,lo,4,6,"ng-template",null,143,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw(2).$implicit;e.Q6J("ngIf","input"==o.taux[0].descriptionvVal)("ngIfElse",t)}}function co(i,a){if(1&i&&(e.YNc(0,ro,5,2,"mat-form-field",134),e.YNc(1,mo,3,2,"ng-template",null,142,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",o.taux.length>1)("ngIfElse",t)}}function _o(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,ao,2,0,"span",132),e.YNc(2,co,3,2,"ng-template",null,141,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0==t.taux.length)("ngIfElse",o)}}function uo(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Franchise "),e.qZA())}function po(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function fo(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.ALo(3,"money"),e.ALo(4,"number"),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(3,2,e.xi3(4,4,t.valeur,"1.0-0"))," ")}}function go(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",136),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.tarifReady=!1)}),e.TgZ(1,"mat-label"),e._uU(2,"Franchise"),e.qZA(),e.TgZ(3,"mat-select",137),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.tarifReady=!1)}),e.YNc(4,fo,5,7,"ng-container",12),e.qZA()()}if(2&i){const t=e.oxw(2),o=t.dataIndex,n=t.$implicit,r=e.oxw(3);e.xp6(3),e.Q6J("formControl",r.getControl(o,"franchise")),e.xp6(1),e.Q6J("ngForOf",n.franchise)}}function Co(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",148),e.qZA()),2&i){const t=e.oxw(3),o=t.$implicit,n=t.dataIndex,r=e.oxw(3);e.xp6(2),e.hij("Franchise00 ",o,""),e.xp6(1),e.Q6J("formControl",r.getControl(n,"franchise"))}}function ho(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.xi3(3,3,t.franchise[0].valeur,"1.0-0")))}}function xo(i,a){if(1&i&&(e.YNc(0,Co,4,2,"mat-form-field",132),e.YNc(1,ho,4,6,"ng-template",null,147,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw(2).$implicit;e.Q6J("ngIf","input"==o.franchise[0].descriptionvVal)("ngIfElse",t)}}function vo(i,a){if(1&i&&(e.YNc(0,go,5,2,"mat-form-field",134),e.YNc(1,xo,3,2,"ng-template",null,146,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",o.franchise.length>1)("ngIfElse",t)}}function Po(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,po,2,0,"span",132),e.YNc(2,vo,3,2,"ng-template",null,145,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0==t.franchise.length)("ngIfElse",o)}}function bo(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Formule "),e.qZA())}function qo(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"-"),e.qZA())}function To(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.ALo(3,"money"),e.ALo(4,"number"),e.ALo(5,"money"),e.ALo(6,"number"),e.ALo(7,"money"),e.ALo(8,"number"),e.qZA(),e.BQk()),2&i){const t=a.$implicit,o=e.oxw(6);e.xp6(1),e.Q6J("value",t),e.xp6(1),e.AsE(" ","95"!=o.codeProduit&&0==e.lcZ(3,3,e.xi3(4,5,t.valeur,"1.0-0"))?e.lcZ(5,8,e.xi3(6,10,t.valeur,"1.0-0")):e.lcZ(7,13,e.xi3(8,15,t.valeur,"1.0-0"))," ",null==t?null:t.unite," ")}}function Lo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",136),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.tarifReady=!1)}),e.TgZ(1,"mat-label"),e._uU(2,"Formule"),e.qZA(),e.TgZ(3,"mat-select",137),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(5);return e.KtG(n.tarifReady=!1)}),e.YNc(4,To,9,18,"ng-container",12),e.qZA()()}if(2&i){const t=e.oxw(2),o=t.dataIndex,n=t.$implicit,r=e.oxw(3);e.xp6(3),e.Q6J("formControl",r.getControl(o,"formule")),e.xp6(1),e.Q6J("ngForOf",n.formule)}}function Zo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-form-field",136),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(6);return e.KtG(n.tarifReady=!1)}),e.TgZ(1,"mat-label"),e._uU(2,"Formule"),e.qZA(),e.TgZ(3,"input",139),e.NdJ("ngModelChange",function(){e.CHM(t);const n=e.oxw(6);return e.KtG(n.tarifReady=!1)}),e.qZA()()}if(2&i){const t=e.oxw(3).dataIndex,o=e.oxw(3);e.xp6(3),e.Q6J("formControl",o.getControl(t,"formule"))}}function Ao(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.xi3(3,3,t.formule[0].valeur,"1.0-0")))}}function No(i,a){if(1&i&&(e.YNc(0,Zo,4,1,"mat-form-field",134),e.YNc(1,Ao,4,6,"ng-template",null,151,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw(2).$implicit;e.Q6J("ngIf","input"==o.formule[0].descriptionvVal)("ngIfElse",t)}}function Do(i,a){if(1&i&&(e.YNc(0,Lo,5,2,"mat-form-field",134),e.YNc(1,No,3,2,"ng-template",null,150,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",o.formule.length>1)("ngIfElse",t)}}function ko(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,qo,2,0,"span",132),e.YNc(2,Do,3,2,"ng-template",null,149,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0==t.formule.length)("ngIfElse",o)}}function yo(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Prime nette "),e.qZA())}function Io(i,a){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.TgZ(4,"sup"),e._uU(5,"DZD"),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,e.xi3(3,3,t.prime,"1.0-0"))," ")}}function Ro(i,a){1&i&&e._uU(0,"-")}function Mo(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,Io,6,6,"ng-container",132),e.YNc(2,Ro,1,0,"ng-template",null,152,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3),n=e.oxw(3);e.xp6(1),e.Q6J("ngIf",n.tarifReady&&null!=t.prime)("ngIfElse",o)}}function So(i,a){1&i&&e._UZ(0,"th",91)}function Jo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",155),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,r=e.oxw(3);return e.KtG(r.expandedElement=r.expandedElement===n?null:n)}),e.TgZ(1,"mat-icon"),e._uU(2),e.qZA()()}if(2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.xp6(2),e.Oqu(o.expandedElement===t?"indeterminate_check_box":"add_box")}}function Oo(i,a){if(1&i&&(e.TgZ(0,"td",153),e.YNc(1,Jo,3,1,"button",154),e.qZA()),2&i){const t=a.$implicit,o=e.oxw(3);e.ekj("example-expanded-row",o.expandedElement===t),e.xp6(1),e.Q6J("ngIf",0!=t.sousGarantieList.data.length)}}function Qo(i,a){1&i&&e._UZ(0,"th",91)}function Yo(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",92)(1,"mat-checkbox",131),e.NdJ("click",function(n){const _=e.CHM(t).$implicit,p=e.oxw(5);return n.stopPropagation(),e.KtG(p.sousGarantieSelectedIds.push(_.idSousGarantie))})("change",function(n){const _=e.CHM(t).$implicit,p=e.oxw(5);return e.KtG(n?p.selection.toggle(_):null)}),e.qZA()()}if(2&i){const t=a.dataIndex,o=e.oxw(5);e.xp6(1),e.Q6J("checked",!1)("formControl",o.getSousGarantieControl(t,"checked"))}}function Uo(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1,"Sous garantie "),e.qZA())}function Eo(i,a){if(1&i&&(e.TgZ(0,"td",92),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function wo(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1,"plafond "),e.qZA())}function Go(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"/"),e.qZA())}function Vo(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.ALo(3,"money"),e.ALo(4,"number"),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(3,2,e.xi3(4,4,t.valeur,"1.0-0"))," ")}}function Fo(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Plafond"),e.qZA(),e.TgZ(3,"mat-select",160),e.YNc(4,Vo,5,7,"ng-container",12),e.qZA()()),2&i){const t=e.oxw(2),o=t.dataIndex,n=t.$implicit,r=e.oxw(5);e.xp6(3),e.Q6J("formControl",r.getSousGarantieControl(o,"plafond")),e.xp6(1),e.Q6J("ngForOf",n.plafond)}}function Bo(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Plafond"),e.qZA(),e._UZ(3,"input",161),e.qZA()),2&i){const t=e.oxw(3),o=t.$implicit,n=t.dataIndex,r=e.oxw(5);e.xp6(3),e.Q6J("max",o.valeur)("formControl",r.getSousGarantieControl(n,"plafond"))}}function $o(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.xi3(3,3,t.plafond[0].valeur,"1.0-0")))}}function Ho(i,a){if(1&i&&(e.YNc(0,Bo,4,2,"mat-form-field",132),e.YNc(1,$o,4,6,"ng-template",null,138,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw(2).$implicit;e.Q6J("ngIf","input"==o.plafond[0].descriptionvVal)("ngIfElse",t)}}function jo(i,a){if(1&i&&(e.YNc(0,Fo,5,2,"mat-form-field",132),e.YNc(1,Ho,3,2,"ng-template",null,135,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",o.plafond.length>1)("ngIfElse",t)}}function zo(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,Go,2,0,"span",132),e.YNc(2,jo,3,2,"ng-template",null,133,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0==t.plafond.length)("ngIfElse",o)}}function Ko(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Franchise "),e.qZA())}function Wo(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"/"),e.qZA())}function Xo(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.ALo(3,"money"),e.ALo(4,"number"),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(3,2,e.xi3(4,4,t.valeur,"1.0-0"))," ")}}function ea(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Franchise"),e.qZA(),e.TgZ(3,"mat-select",160),e.YNc(4,Xo,5,7,"ng-container",12),e.qZA()()),2&i){const t=e.oxw(2),o=t.dataIndex,n=t.$implicit,r=e.oxw(5);e.xp6(3),e.Q6J("formControl",r.getSousGarantieControl(o,"franchise")),e.xp6(1),e.Q6J("ngForOf",n.franchise)}}function ta(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Franchise"),e.qZA(),e._UZ(3,"input",148),e.qZA()),2&i){const t=e.oxw(3).dataIndex,o=e.oxw(5);e.xp6(3),e.Q6J("formControl",o.getSousGarantieControl(t,"franchise"))}}function ia(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.xi3(3,3,t.franchise[0].valeur,"1.0-0")))}}function oa(i,a){if(1&i&&(e.YNc(0,ta,4,1,"mat-form-field",132),e.YNc(1,ia,4,6,"ng-template",null,147,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw(2).$implicit;e.Q6J("ngIf","input"==o.franchise[0].descriptionvVal)("ngIfElse",t)}}function aa(i,a){if(1&i&&(e.YNc(0,ea,5,2,"mat-form-field",132),e.YNc(1,oa,3,2,"ng-template",null,146,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",o.franchise.length>1)("ngIfElse",t)}}function na(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,Wo,2,0,"span",132),e.YNc(2,aa,3,2,"ng-template",null,145,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0==t.franchise.length)("ngIfElse",o)}}function ra(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," taux "),e.qZA())}function sa(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"/"),e.qZA())}function la(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.ALo(3,"money"),e.ALo(4,"number"),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(3,2,e.xi3(4,4,t.valeur,"1.0-0"))," ")}}function ma(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"taux"),e.qZA(),e.TgZ(3,"mat-select",160),e.YNc(4,la,5,7,"ng-container",12),e.qZA()()),2&i){const t=e.oxw(2),o=t.dataIndex,n=t.$implicit,r=e.oxw(5);e.xp6(3),e.Q6J("formControl",r.getSousGarantieControl(o,"taux")),e.xp6(1),e.Q6J("ngForOf",n.taux)}}function ca(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"taux"),e.qZA(),e._UZ(3,"input",148),e.qZA()),2&i){const t=e.oxw(3).dataIndex,o=e.oxw(5);e.xp6(3),e.Q6J("formControl",o.getSousGarantieControl(t,"taux"))}}function _a(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.xi3(3,3,t.taux[0].valeur,"1.0-0")))}}function ua(i,a){if(1&i&&(e.YNc(0,ca,4,1,"mat-form-field",132),e.YNc(1,_a,4,6,"ng-template",null,143,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw(2).$implicit;e.Q6J("ngIf","input"==o.taux[0].descriptionvVal)("ngIfElse",t)}}function pa(i,a){if(1&i&&(e.YNc(0,ma,5,2,"mat-form-field",132),e.YNc(1,ua,3,2,"ng-template",null,142,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",o.taux.length>1)("ngIfElse",t)}}function da(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,sa,2,0,"span",132),e.YNc(2,pa,3,2,"ng-template",null,141,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0==t.taux.length)("ngIfElse",o)}}function fa(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Formule "),e.qZA())}function ga(i,a){1&i&&(e.TgZ(0,"span"),e._uU(1,"/"),e.qZA())}function Ca(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.ALo(3,"money"),e.ALo(4,"number"),e.ALo(5,"money"),e.ALo(6,"number"),e.ALo(7,"money"),e.ALo(8,"number"),e.qZA(),e.BQk()),2&i){const t=a.$implicit,o=e.oxw(8);e.xp6(1),e.Q6J("value",t),e.xp6(1),e.AsE(" ","95"!=o.codeProduit&&0==e.lcZ(3,3,e.xi3(4,5,t.valeur,"1.0-0"))?e.lcZ(5,8,e.xi3(6,10,t.valeur,"1.0-0")):e.lcZ(7,13,e.xi3(8,15,t.valeur,"1.0-0"))," ",null==t?null:t.unite," ")}}function ha(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Formule"),e.qZA(),e.TgZ(3,"mat-select",160),e.YNc(4,Ca,9,18,"ng-container",12),e.qZA()()),2&i){const t=e.oxw(2),o=t.dataIndex,n=t.$implicit,r=e.oxw(5);e.xp6(3),e.Q6J("formControl",r.getSousGarantieControl(o,"formule")),e.xp6(1),e.Q6J("ngForOf",n.formule)}}function xa(i,a){if(1&i&&(e.TgZ(0,"mat-form-field")(1,"mat-label"),e._uU(2,"Formule"),e.qZA(),e._UZ(3,"input",148),e.qZA()),2&i){const t=e.oxw(3).dataIndex,o=e.oxw(5);e.xp6(3),e.Q6J("formControl",o.getSousGarantieControl(t,"formule"))}}function va(i,a){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.qZA()),2&i){const t=e.oxw(3).$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,e.xi3(3,3,t.formule[0].valeur,"1.0-0")))}}function Pa(i,a){if(1&i&&(e.YNc(0,xa,4,1,"mat-form-field",132),e.YNc(1,va,4,6,"ng-template",null,151,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw(2).$implicit;e.Q6J("ngIf","input"==o.formule[0].descriptionvVal)("ngIfElse",t)}}function ba(i,a){if(1&i&&(e.YNc(0,ha,5,2,"mat-form-field",132),e.YNc(1,Pa,3,2,"ng-template",null,150,e.W1O)),2&i){const t=e.MAs(2),o=e.oxw().$implicit;e.Q6J("ngIf",o.formule.length>1)("ngIfElse",t)}}function qa(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,ga,2,0,"span",132),e.YNc(2,ba,3,2,"ng-template",null,149,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3);e.xp6(1),e.Q6J("ngIf",0==t.formule.length)("ngIfElse",o)}}function Ta(i,a){1&i&&e._UZ(0,"th",91)}function La(i,a){if(1&i&&(e.ynx(0),e._uU(1),e.ALo(2,"money"),e.ALo(3,"number"),e.TgZ(4,"sup"),e._uU(5,"DZD"),e.qZA(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,e.xi3(3,3,t.prime,"1.0-0"))," ")}}function Za(i,a){1&i&&e._uU(0,"-")}function Aa(i,a){if(1&i&&(e.TgZ(0,"td",92),e.YNc(1,La,6,6,"ng-container",132),e.YNc(2,Za,1,0,"ng-template",null,152,e.W1O),e.qZA()),2&i){const t=a.$implicit,o=e.MAs(3),n=e.oxw(5);e.xp6(1),e.Q6J("ngIf",n.tarifReady&&null!=t.prime)("ngIfElse",o)}}function Na(i,a){1&i&&e._UZ(0,"th",91)}function Da(i,a){1&i&&e._UZ(0,"td",92)}function ka(i,a){1&i&&e._UZ(0,"tr",162)}function ya(i,a){1&i&&e._UZ(0,"tr",98)}function Ia(i,a){if(1&i&&(e.TgZ(0,"table",158),e.ynx(1,120),e.YNc(2,Qo,1,0,"th",85),e.YNc(3,Yo,2,2,"td",86),e.BQk(),e.ynx(4,121),e.YNc(5,Uo,2,0,"th",85),e.YNc(6,Eo,2,1,"td",86),e.BQk(),e.ynx(7,122),e.YNc(8,wo,2,0,"th",85),e.YNc(9,zo,4,2,"td",86),e.BQk(),e.ynx(10,124),e.YNc(11,Ko,2,0,"th",85),e.YNc(12,na,4,2,"td",86),e.BQk(),e.ynx(13,123),e.YNc(14,ra,2,0,"th",85),e.YNc(15,da,4,2,"td",86),e.BQk(),e.ynx(16,125),e.YNc(17,fa,2,0,"th",85),e.YNc(18,qa,4,2,"td",86),e.BQk(),e.ynx(19,88),e.YNc(20,Ta,1,0,"th",85),e.YNc(21,Aa,4,2,"td",86),e.BQk(),e.ynx(22,159),e.YNc(23,Na,1,0,"th",85),e.YNc(24,Da,1,0,"td",86),e.BQk(),e.YNc(25,ka,1,0,"tr",129),e.YNc(26,ya,1,0,"tr",90),e.qZA()),2&i){const t=e.oxw().$implicit,o=e.oxw(3);e.Q6J("dataSource",t.sousGarantieList),e.xp6(25),e.Q6J("matHeaderRowDef",o.DisplayedColumnsSousGarantie),e.xp6(1),e.Q6J("matRowDefColumns",o.DisplayedColumnsSousGarantie)}}function Ra(i,a){if(1&i&&(e.TgZ(0,"td",92)(1,"div",156),e.YNc(2,Ia,27,3,"table",157),e.qZA()()),2&i){const t=a.$implicit,o=e.oxw(3);e.uIk("colspan",o.displayedColumns.length),e.xp6(1),e.Q6J("@detailExpand",t==o.expandedElement?"expanded":"collapsed"),e.xp6(1),e.Q6J("ngIf",o.loadTable)}}function Ma(i,a){1&i&&e._UZ(0,"tr",162)}function Sa(i,a){1&i&&e._UZ(0,"tr",98)}function Ja(i,a){1&i&&e._UZ(0,"tr",163)}const Oa=function(){return["expandedDetail"]};function Qa(i,a){if(1&i&&(e.TgZ(0,"table",119),e.ynx(1,120),e.YNc(2,wi,1,0,"th",85),e.YNc(3,Gi,2,2,"td",86),e.BQk(),e.ynx(4,121),e.YNc(5,Vi,2,0,"th",85),e.YNc(6,Fi,2,1,"td",86),e.BQk(),e.ynx(7,122),e.YNc(8,Bi,2,0,"th",85),e.YNc(9,io,4,2,"td",86),e.BQk(),e.ynx(10,123),e.YNc(11,oo,2,0,"th",85),e.YNc(12,_o,4,2,"td",86),e.BQk(),e.ynx(13,124),e.YNc(14,uo,2,0,"th",85),e.YNc(15,Po,4,2,"td",86),e.BQk(),e.ynx(16,125),e.YNc(17,bo,2,0,"th",85),e.YNc(18,ko,4,2,"td",86),e.BQk(),e.ynx(19,88),e.YNc(20,yo,2,0,"th",85),e.YNc(21,Mo,4,2,"td",86),e.BQk(),e.ynx(22,126),e.YNc(23,So,1,0,"th",85),e.YNc(24,Oo,2,3,"td",127),e.BQk(),e.ynx(25,128),e.YNc(26,Ra,3,3,"td",86),e.BQk(),e.YNc(27,Ma,1,0,"tr",129),e.YNc(28,Sa,1,0,"tr",90),e.YNc(29,Ja,1,0,"tr",130),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("dataSource",t.dataSource),e.xp6(27),e.Q6J("matHeaderRowDef",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",e.DdM(4,Oa))}}function Ya(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," ID "),e.qZA())}function Ua(i,a){if(1&i&&(e.TgZ(0,"td",92),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.idListParamRisque," ")}}function Ea(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Description "),e.qZA())}function wa(i,a){if(1&i&&(e.TgZ(0,"td",92),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function Ga(i,a){1&i&&(e.TgZ(0,"th",91),e._uU(1," Action "),e.qZA())}function Va(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"td",92)(1,"button",170)(2,"mat-icon"),e._uU(3,"more_vert"),e.qZA()(),e.TgZ(4,"mat-menu",94,95)(6,"button",96),e.NdJ("click",function(){const r=e.CHM(t).$implicit,_=e.oxw(4);return e.KtG(_.getListParamRisque(r.idListParamRisque,r.idGarantie))}),e.TgZ(7,"mat-icon"),e._uU(8,"zoom_in"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"Consulter la liste "),e.qZA()()()()}if(2&i){const t=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",t)}}function Fa(i,a){1&i&&e._UZ(0,"tr",97)}function Ba(i,a){1&i&&e._UZ(0,"tr",98)}const $a=function(){return[5,10,20]};function Ha(i,a){if(1&i&&(e.TgZ(0,"div",165)(1,"table",166),e.ynx(2,167),e.YNc(3,Ya,2,0,"th",85),e.YNc(4,Ua,2,1,"td",86),e.BQk(),e.ynx(5,168),e.YNc(6,Ea,2,0,"th",85),e.YNc(7,wa,2,1,"td",86),e.BQk(),e.ynx(8,88),e.YNc(9,Ga,2,0,"th",85),e.YNc(10,Va,11,1,"td",86),e.BQk(),e.YNc(11,Fa,1,0,"tr",89),e.YNc(12,Ba,1,0,"tr",90),e.qZA(),e._UZ(13,"mat-paginator",169),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Q6J("dataSource",t.dataSourceListOfListes),e.xp6(10),e.Q6J("matHeaderRowDef",t.displayedColumnsListOfList),e.xp6(1),e.Q6J("matRowDefColumns",t.displayedColumnsListOfList),e.xp6(1),e.Q6J("pageSize",5)("pageSizeOptions",e.DdM(5,$a))}}function ja(i,a){if(1&i&&(e.TgZ(0,"mat-expansion-panel",58)(1,"mat-expansion-panel-header")(2,"mat-panel-title",59),e._uU(3," Consulter les listes "),e.qZA()(),e.YNc(4,Ha,14,6,"div",164),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("expanded",!0),e.xp6(4),e.Q6J("ngIf",0!=t.dataSourceListOfListes.data.length)}}function za(i,a){if(1&i&&(e.TgZ(0,"div",171)(1,"div",172)(2,"div",173)(3,"span",174),e._uU(4,"Prime nette totale:"),e.qZA(),e.TgZ(5,"span",175),e._uU(6),e.ALo(7,"money"),e.ALo(8,"number"),e.TgZ(9,"sup"),e._uU(10,"DZD"),e.qZA()()()()()),2&i){const t=e.oxw(2);e.xp6(6),e.hij("",e.lcZ(7,1,e.xi3(8,3,t.PrimeTotale,"1.0-0"))," ")}}function Ka(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",176),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.goToResume())}),e._uU(1," Suivant5 "),e.TgZ(2,"mat-icon",177),e._uU(3," chevron_right "),e.qZA()()}if(2&i){const t=e.oxw(2);e.Tol(t.garantieNull?"btn btn-disable":"btn btn-action"),e.Q6J("disabled",t.garantieNull)}}function Wa(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",178),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.goBack())}),e._uU(1,"Retour"),e.qZA()}}function Xa(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-step"),e.YNc(1,Mi,1,0,"ng-template",5),e.TgZ(2,"div",106)(3,"p"),e._uU(4,"Veuillez choisir un pack00 "),e.qZA(),e.TgZ(5,"mat-form-field",10)(6,"mat-label"),e._uU(7,"Pack"),e.qZA(),e.TgZ(8,"mat-select",107),e.NdJ("selectionChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.getPack(n.value))}),e.YNc(9,Si,3,2,"ng-container",12),e.qZA()(),e.YNc(10,Ji,4,1,"mat-form-field",108),e.YNc(11,Oi,3,2,"div",109),e.YNc(12,Qi,4,0,"button",110),e.qZA(),e.YNc(13,Yi,2,1,"div",32),e.YNc(14,Ui,2,1,"div",32),e.YNc(15,Ei,2,0,"div",32),e.YNc(16,Qa,30,5,"table",111),e.YNc(17,ja,5,2,"mat-expansion-panel",52),e.YNc(18,za,11,6,"div",112),e.TgZ(19,"div"),e.YNc(20,Ka,4,3,"button",113),e.YNc(21,Wa,2,0,"button",114),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(9),e.Q6J("ngForOf",t.packs),e.xp6(1),e.Q6J("ngIf","T"==t.codeProduit),e.xp6(1),e.Q6J("ngIf","T"==t.codeProduit),e.xp6(1),e.Q6J("ngIf",t.loadTable),e.xp6(1),e.Q6J("ngIf",t.errorTarif.error),e.xp6(1),e.Q6J("ngIf",t.errorHandler.error),e.xp6(1),e.Q6J("ngIf",t.errorPackForm),e.xp6(1),e.Q6J("ngIf",t.loadTable&&(!t.multiRisque||"T"==t.codeProduit)),e.xp6(1),e.Q6J("ngIf",0!=t.dataSourceListOfListes.data.length&&0!=t.dataSource.data.length),e.xp6(1),e.Q6J("ngIf",t.tarifReady),e.xp6(2),e.Q6J("ngIf",t.tarifReady||t.multiRisque),e.xp6(1),e.Q6J("ngIf","97"==t.codeProduit&&"CTI"==t.selectedSousProduit&&1==t.isBOUser||"97"!=t.codeProduit)}}function en(i,a){1&i&&e._uU(0,"R\xe9duction")}function tn(i,a){if(1&i&&(e.TgZ(0,"div",102),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(t.errorHandler.msg)}}function on(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.idConvention),e.xp6(1),e.hij(" ",t.nomConvention," ")}}function an(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"mat-option",44),e._uU(2),e.qZA(),e.BQk()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("value",t.idReduction),e.xp6(1),e.hij(" ",t.nomReduction," ")}}function nn(i,a){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",25)(2,"span"),e._uU(3,"Suivant6"),e.qZA()(),e.TgZ(4,"button",36),e.NdJ("click",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.goBack())}),e._uU(5,"Retour"),e.qZA(),e.BQk()}}function rn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-step",179),e.YNc(1,en,1,0,"ng-template",5),e.TgZ(2,"p"),e._uU(3,"Veuillez choisir une Convention/R\xe9duction"),e.qZA(),e.YNc(4,tn,2,1,"div",32),e.TgZ(5,"form",180),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.submitReduction())}),e.TgZ(6,"mat-form-field",10)(7,"mat-label"),e._uU(8," Convention"),e.qZA(),e.TgZ(9,"mat-select",181),e.NdJ("valueChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.defaultConvention=n)})("selectionChange",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.getReductionByConvention(n.value))}),e.TgZ(10,"mat-option",44),e._uU(11," Aucune Convention "),e.qZA(),e.YNc(12,on,3,2,"ng-container",12),e.qZA()(),e.TgZ(13,"mat-form-field",10)(14,"mat-select",182)(15,"mat-option",44),e._uU(16," Aucune Reduction "),e.qZA(),e.YNc(17,an,3,2,"ng-container",12),e.qZA()(),e.TgZ(18,"div"),e.YNc(19,nn,6,0,"ng-container",30),e.qZA()()()}if(2&i){const t=e.oxw();e.Q6J("editable",!0),e.xp6(4),e.Q6J("ngIf",t.errorHandler.error),e.xp6(1),e.Q6J("formGroup",t.formReduction),e.xp6(4),e.Q6J("value",t.defaultConvention),e.xp6(1),e.Q6J("value","aucuneConvention"),e.xp6(2),e.Q6J("ngForOf",t.conventions),e.xp6(3),e.Q6J("value","aucuneReduction"),e.xp6(2),e.Q6J("ngForOf",t.reductions),e.xp6(2),e.Q6J("ngIf","97"!=t.codeProduit)}}function sn(i,a){1&i&&e._uU(0,"R\xe9sum\xe9")}function ln(i,a){if(1&i&&(e.TgZ(0,"div",102),e._uU(1),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(t.errorHandler.msg)}}const mn=function(i,a,t){return["/","consultation",i,a,t]};function cn(i,a){if(1&i&&(e.TgZ(0,"div",183),e._uU(1),e.TgZ(2,"a",184),e._uU(3,"cliquez ici."),e.qZA()()),2&i){const t=e.oxw();e.xp6(1),e.hij("Le devis ",t.idDevis," a \xe9t\xe9 cr\xe9\xe9 avec succ\xe8s, pour le consulter veuillez "),e.xp6(1),e.Q6J("routerLink",e.kEZ(2,mn,t.codeProduit,t.produit,t.idDevis))}}function _n(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"money"),e.ALo(6,"number"),e.TgZ(7,"sup"),e._uU(8,"DZD"),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.description),e.xp6(2),e.hij("",e.lcZ(5,2,e.xi3(6,4,t.prime,"1.0-0"))," ")}}function un(i,a){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,_n,9,7,"ng-container",30),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",101==t.idPrime)}}function pn(i,a){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.ALo(5,"money"),e.ALo(6,"number"),e.TgZ(7,"sup"),e._uU(8,"DZD"),e.qZA()()()),2&i){const t=a.$implicit;e.xp6(2),e.Oqu(t.description),e.xp6(2),e.hij("",e.lcZ(5,2,e.xi3(6,4,t.prime,"1.0-0"))," ")}}function dn(i,a){if(1&i&&(e.ynx(0),e.TgZ(1,"td",185),e._uU(2),e.qZA(),e.TgZ(3,"td",185),e._uU(4),e.ALo(5,"money"),e.ALo(6,"number"),e.TgZ(7,"sup"),e._uU(8,"DZD"),e.qZA()(),e.BQk()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.description),e.xp6(2),e.hij("",e.lcZ(5,2,e.xi3(6,4,t.prime,"1.0-0"))," ")}}function fn(i,a){if(1&i&&(e.TgZ(0,"tr"),e.YNc(1,dn,9,7,"ng-container",30),e.qZA()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",186==t.idPrime)}}function gn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",186)(1,"button",187),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.downloadDevis(n.returnedDevis))}),e.TgZ(2,"mat-icon",188),e._uU(3," download "),e.qZA(),e._uU(4,"T\xe9l\xe9charger devis"),e.qZA(),e.TgZ(5,"button",187),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.convertToContract())}),e.TgZ(6,"mat-icon",188),e._uU(7," source_notes "),e.qZA(),e._uU(8,"Convertir en contrat"),e.qZA()()}}const Cn=function(i){return{"button--loading":i}};function hn(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"button",189),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.submitDevis())}),e.TgZ(1,"span",190),e._uU(2,"Enregistrer devis"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("ngClass",e.VKq(2,Cn,t.loaderDevis))("disabled",t.loaderDevis)}}const Y=new Date;function U(i){var a=new Date(i.value);return Y.getFullYear()-a.getFullYear()<18?{ageInf18:!0}:null}function E(i){var a=new Date(i.value);return Y.getFullYear()-a.getFullYear()>106?{ageSup107:!0}:null}function vn(i,a){return t=>({bloquant:i,msg:a})}const bn=[{path:"creation-devis/commercialLine/:codeProduit/:nomProduit",component:(()=>{class i{constructor(t,o,n,r,_,p,s,m,l,d,c,C,g,h,v,b,y){this.vehiculeService=t,this.dialog=o,this.cd=n,this.route=r,this.router=_,this._snackBar=p,this.conventionService=s,this.cryptoService=m,this.devisService=l,this.reductionService=d,this.packService=c,this.agencesService=C,this.personneService=g,this.dureeService=h,this.paramRisqueService=v,this.genericService=b,this.formBuilder=y,this.load=!1,this.loadTable=!1,this.groupArray=[],this.selectedSousProduit=null,this.groupesPacks=[],this.isFieldReadOnly=!1,this.fileSuccess=!1,this.indexGarantieMrp=0,this.indexSousGarantieMrp=0,this.displayedColumns=["select","garantie","plafond","franchise","formule","action","sousGarantie"],this.originalDisplayedColumns=["select","garantie","plafond","franchise","formule","action","sousGarantie"],this.displayedColumnsListOfList=["idList","description","action"],this.displayedColumnsRisque=[],this.innerColumnsRisque=[],this.marques=[],this.modeles=[],this.produitInfo={},this.dataSource=new x.by,this.dataSourceSousGarantie=new x.by,this.dataSourceListOfListes=new x.by,this.selection=new F.Ov(!0,[]),this.tarifReady=!1,this.errorPackForm=!1,this.sousGarantieExist=!1,this.PrimeTotale=0,this.formules=[],this.plafondSlected=[],this.franchises=[],this.idProduit=0,this.loaderControles=!1,this.idDevisWorkFlow=45,this.valeurVenale=0,this.risqueIndex=0,this.risqueIndexBody=0,this.idPack=0,this.paraRisqueProduit=[],this.devis={},this.devisGroupe=[],this.paramList=[],this.paramElement={},this.garantieSelected=[],this.garantieSelectedIds=[],this.sousGarantieSelectedIds=[],this.garantieTab=[],this.sousGarantieTab=[],this.garantieAll=[],this.conventions=[],this.communes=[],this.ines=!0,this.communes_sous=[],this.communes_assure=[],this.filterReduction=H.P,this.controleDevis=[],this.reductions=[],this.successDevis=!1,this.saveDevis=!0,this.loaderTarif=!1,this.loaderDevis=!1,this.tauxExiste=!1,this.franchiseExist=!1,this.plafondExist=!1,this.formuleExist=!1,this.multiRisque=!1,this.risqueArrayReady=!1,this.maxContenue=1e7,this.multiRisqueArray=[],this.risqueConsult={},this.calculCapitaleMRP=5e4,this.DisplayedColumnsSousGarantie=["select","garantie","plafond","franchise","formule","action","more"],this.displayedColumnsListParamRisque=[],this.listParamRisque=[],this.dataSourceListParamRisque=[],this.paramRisqueList=[],this.garantiesNew=[],this.paraRisqueType=[],this.idsListParams=[],this.codesListParams=[],this.idPays=0,this.errorTarif={error:!1,msg:""},this.displayedColumnsGarantie=["garantie","plafond","formule","franchise","prime"],this.dataSourceRisque=new x.by,this.displayedColumnsGroupePack=["groupe","pack"],this.dataReturned=B.q2,this.resumeTable=[],this.returnedTarif=[],this.listExemple=[{id:1,value:"exemple 1 "},{id:2,value:"exemple 2 "},{id:3,value:"exemple 3 "}],this.defaultConvention="aucuneConvention",this.typesContact=["fixe","mobile"],this.wilayas=[],this.durees=[],this.idSousProduits=new u.NI,this.IDSOUSPROD=null,this.typeClients=[],this.agences=[],this.warningMessage=[],this.packs=[],this.labelNom="Nom",this.errorHandler={error:!1,msg:""},this.autditUser="",this.paraRisqueProduitCategory=[],this.multirisqueParam=[],this.nmbVehicule=new u.NI,this.checkedTVA=new u.NI(!1),this.nbrPages=new u.NI,this.risqueStep=0,this.isListParam=!1,this.withFile=!1,this.garantieNull=!1,this.isBOUser=!1,this.displayFormRisque=!1,this.tableauxParCategorie=[],this.tableauxParCategorieRisque=[],this.isCourtier=sessionStorage.getItem("roles")?.includes("COURTIER"),this.agencePersonne=parseInt(sessionStorage.getItem("agence")||"0"),this.tkn=JSON.parse(sessionStorage.getItem("access_token")||"")?.access_token}ngOnInit(){this.devis.list=[],null!==this.codeProduit&&(this.codeProduit=this.route.snapshot.paramMap.get("codeProduit"),this.produit=this.route.snapshot.paramMap.get("produit")),this.devis.groupes=[],this.autditUser=sessionStorage.getItem("userId"),this.autditUser=this.autditUser?.replace(/^"(.+)"$/,"$1"),this.dataSource.data=[],this.getProductId(),this.getIdPays("DZA"),this.getParamRisque(),"T"!=this.codeProduit&&(this.getAllParamRisque(),this.getDureeByProduit()),this.getTypeClient(),this.getAllAgences(),this.getAllConventions(),this.getAllReductions();let t=[],o={},n={},r={},_={};this.dataReturned.paramDevisList.map(s=>{s.categorieList.map(m=>{"forumule"==m.description?o={idCategorie:m.idCategorie,description:m.description,valeur:m.valeur,sousCategorieList:{idSousCategorie:m.sousCategorieList.idSousCategorie,description:m.sousCategorieList.description,valeur:m.sousCategorieList.valeur}}:"plafond"==m.description?r={idCategorie:m.idCategorie,description:m.description,valeur:m.valeur,sousCategorieList:{idSousCategorie:m.sousCategorieList.idSousCategorie,description:m.sousCategorieList.description,valeur:m.sousCategorieList.valeur}}:"franchise"==m.description?n={idCategorie:m.idCategorie,description:m.description,valeur:m.valeur,sousCategorieList:{idSousCategorie:m.sousCategorieList.idSousCategorie,description:m.sousCategorieList.description,valeur:m.sousCategorieList.valeur}}:"taux"==m.description&&(_={idCategorie:m.idCategorie,description:m.description,valeur:m.valeur,sousCategorieList:{idSousCategorie:m.sousCategorieList.idSousCategorie,description:m.sousCategorieList.description,valeur:m.sousCategorieList.valeur}})}),t.push({idGarantie:s.idGarantie,description:s.description,prime:s.prime,plafond:r,formule:o,franchise:n,taux:_}),o={},n={},r={},_={}}),this.dataSourceGarantie=new x.by(t),this.formInfosAssure=this.formBuilder.group({typeClient:["",[u.kI.required]],typeContact:["",[u.kI.required]],nom:["","personne physique"!=this.typeClient?[u.kI.required,u.kI.maxLength(50)]:[u.kI.required,u.kI.maxLength(50),u.kI.pattern(q.e.nom)]],prenom:["",[u.kI.required,u.kI.maxLength(50),u.kI.pattern(q.e.nom)]],dateNaissance:["",[u.kI.required,U,E]],tel:["",[u.kI.required,u.kI.pattern(q.e.mobile)]],email:["",[u.kI.pattern(q.e.email)]],duree:["",[u.kI.required]],agence:[this.isCourtier?this.agencePersonne:"",[u.kI.required]],idSousProduits:[null,u.kI.required],typePolice:[null,u.kI.required],chiffreA:[{value:null,disabled:!0},""]}),this.formInfosAssure.valueChanges.subscribe(()=>{this.tarifReady=!1}),this.formListParamRisque=this.formBuilder.group({}),this.formParamRisque=this.formBuilder.group({}),this.formParamRisque.valueChanges.subscribe(()=>{this.tarifReady=!1}),this.formPackGaranties=this.formBuilder.group({franchiseFormArray:this.formBuilder.array([])}),this.formReduction=this.formBuilder.group({reduction:[0],convention:[0]}),this.formReduction.get("convention").setValue("aucuneConvention"),this.formReduction.get("reduction").setValue("aucuneReduction");const p=sessionStorage.getItem("roles")||"";this.isBOUser=p.includes("BO"),"97"==this.codeProduit&&0==this.isBOUser&&this.nbrPages.setValue(2),this.isCourtier?this.formInfosAssure.get("agence")?.disable():this.formInfosAssure.get("agence")?.enable()}applyTVA(){console.log("Checkbox coch\xe9e ?",this.checkedTVA.value),this.devis.withTVA=1!=this.checkedTVA.value}getIdPays(t){this.genericService.getPays().subscribe({next:o=>{this.idPays=o.find(n=>n.codePays==t).idPays,this.getWilayas()},error:o=>{}})}getProductId(){this.codeProduit=this.route.snapshot.paramMap.get("codeProduit"),this.idProduit=JSON.parse(sessionStorage.getItem("products")||"{}").find(t=>t.codeProduit==this.codeProduit).idProduit,this.getInfoProduit()}getInfoProduit(){this.genericService.getPorduitById(this.idProduit).subscribe({next:t=>{this.produitInfo=t,this.multiRisque="Oui"==t.param_Produit_Reponses.filter(o=>"multirisque"==o.idParamProduit.libelle)[0].reponse.description,this.sousProduits=t.sousProduits},error:t=>{}})}get franchi(){return this.formPackGaranties.get("franchiseFormArray")}newFranchises(){return this.formBuilder.group({idGarantie:"",valeurFranchise:""})}addfranchi(){this.franchi.push(this.newFranchises())}getWilayas(){this.genericService.getAllWilayas(this.idPays).subscribe({next:t=>{this.wilayas=t},error:t=>{}})}getCommune(t){this.genericService.getAllCommuneByWilaya(t).subscribe({next:o=>{this.communes=o},error:o=>{}})}getDureeByProduit(){this.dureeService.getDureeByIdProduit(this.idProduit).subscribe({next:t=>{this.durees=t},error:t=>{}})}onContenatChange(){this.paraRisqueProduit.map(t=>{Object.keys(this.formParamRisque.value).map(o=>{if(o==t.formName){let n=this.formParamRisque.get("ValeurMat\xe9rielEt\xc9quipement").value,r=this.formParamRisque.get("ValeurDeLaMarchandise").value;if(!isNaN(r)&&!isNaN(n)){const _=Number(n)+Number(r);this.formParamRisque.get("ValeurContenant").setValue(_)}}"97"==this.codeProduit&&"P268"==this.formParamRisque.codeParam&&"CTI"==this.selectedSousProduit?this.formParamRisque.get("SMP").setValue(.5*this.Smp):"97"==this.codeProduit&&"P268"==this.formParamRisque.codeParam&&this.formParamRisque.get("SMP").setValue(this.Smp)})})}getParamRisque(){this.paramRisqueService.getParamRisqueList().subscribe(t=>{this.paramRisqueList=t})}getListParamRisque(t,o){this.paramRisqueService.getListParamRisque(t).subscribe(n=>{this.listParamRisque=[],this.displayedColumnsListParamRisque=[],this.idsListParams=[],this.codesListParams=[],this.formListParamRisque=this.formBuilder.group({}),n.map(r=>{this.idListParamList=r.idListParamRisque.idListParamRisque,this.listParamRisque.push(this.paraRisqueType.find(_=>_.idParamRisque==r.idParamRisqueFils.idParamRisque))}),this.listParamRisque.map(r=>{this.formListParamRisque.addControl(r.formName,new u.NI(r.defaultValue,0!=r.sizeChamp&&null!=r.sizeChamp?[u.kI.required,u.kI.minLength(r.sizeChamp),u.kI.maxLength(r.sizeChamp)]:[u.kI.required])),"L08"==r.typeChamp.code&&null==r.paramRisqueParent&&this.paramRisqueService.getTableParamParent(r.idParamRisque).subscribe({next:_=>{r.reponses="P279"==r.codeParam?_.filter(p=>1==p.is_professionnel):_},error:_=>{}}),this.displayedColumnsListParamRisque.push(r.formName),this.idsListParams.push(r.idParamRisque),this.codesListParams.push(r.codeParam)}),this.lengthColumnsListParamRisque=this.displayedColumnsListParamRisque.length,this.openDialogList(o)})}getTypeClient(){this.genericService.getParam(JSON.parse(sessionStorage.getItem("dictionnaire")||"{}").find(t=>"C24"==t.code).idCategorie).subscribe({next:t=>{this.typeClients=t,this.multiRisque&&(this.PMflotte=this.typeClients.find(o=>"PM"===o.code))},error:t=>{}})}getTypePolice(t){console.log("sousProduit le voila",t),this.genericService.getParam(JSON.parse(sessionStorage.getItem("dictionnaire")||"{}").find(o=>"C179"==o.code).idCategorie).subscribe({next:o=>{switch(console.log("la liste intial de type police",o),t){case"48":this.listPolice=[],o.map(n=>{console.log("on est les element du coup type police",n,this.listPolice),("TP01"==n.code||"TP04"==n.code||"TP05"==n.code)&&this.listPolice.push(n)});break;case"57":this.listPolice=[],o.map(n=>{console.log("on est les element du coup type police",n,this.listPolice),("TP01"==n.code||"TP02"==n.code||"TP03"==n.code)&&this.listPolice.push(n)});break;default:this.listPolice=o}console.log("la voila apres le filtre",this.listPolice),this.typePolice=this.listPolice},error:o=>{console.log(o)}})}getdureeTransport(t){console.log("sousProduit le voil\xe0",t),this.dureeService.getDureeByIdProduit(this.idProduit).subscribe({next:o=>{console.log("la liste initiale de dur\xe9e",o),this.listDuree=[];const n=this.selectedSousProduit;this.listDuree=["TP01","TP02","TP03"].includes(t.code)&&"48"===n?o.filter(r=>"D04"===r.duree.code):["TP04","TP05"].includes(t.code)&&"48"===n||["TP01","TP02"].includes(t.code)&&"57"===n?o.filter(r=>"D1"===r.duree.code):"TP03"===t.code&&"57"===n?o.filter(r=>"D04"===r.duree.code):o,console.log("la liste apr\xe8s filtre dur\xe9e",this.listDuree),this.durees=this.listDuree},error:o=>{console.error("Erreur lors de la r\xe9cup\xe9ration des dur\xe9es",o)}})}getAllAgences(){this.agencesService.getAllAgence().subscribe({next:t=>{this.agences=t},error:t=>{}})}getAllPack(){"45A"==this.route.snapshot.paramMap.get("codeProduit")?this.packService.getPackByProduitParam(this.idProduit,{dateMiseEnCirculation:this.dateMiseCirculation,duree:this.duree}).subscribe({next:o=>{this.packs=[],o.map(n=>{this.packs.push(n)})},error:o=>{}}):this.packService.getPackByProduit(this.idProduit).subscribe({next:t=>{this.packs=[],t.map(o=>{this.packs.push(o)})},error:t=>{}})}getPack(t){this.tarifReady=!1,this.errorHandler.error=!1,this.errorHandler.msg="",this.idPack=t,this.indexGarantieMrp=0,this.indexSousGarantieMrp=0,this.packService.getPackById(t).subscribe({next:o=>{if(this.acctuelPack=o,console.log("je suis this.acctuelpack de getpack()",this.acctuelPack),!this.multiRisque||"T"==this.codeProduit){if(this.displayedColumns=["select","garantie","plafond","franchise","formule","action","sousGarantie"],this.DisplayedColumnsSousGarantie=["select","garantie","plafond","franchise","formule","action","more"],"97"==this.codeProduit&&(this.displayedColumns.push("taux"),this.DisplayedColumnsSousGarantie.push("taux")),this.franchiseExist=!1,this.plafondExist=!1,this.formuleExist=!1,this.devis.pack=t,this.garantieTab=[],this.garantieAll=o.garantie,"95"==this.route.snapshot.paramMap.get("codeProduit")&&this.formParamRisque.get("Activit\xe9Professionnelle")?.value?.is_professionnel){let n=this.garantieAll.map(r=>r.codeGarantie).indexOf("G45");-1!==n&&this.garantieAll.splice(n,1)}else{let n=this.garantieAll.map(r=>r.codeGarantie).indexOf("G53");-1!==n&&this.garantieAll.splice(n,1)}if(!this.formParamRisque.get("Activit\xe9Professionnelle")?.value?.is_perte_exploitation||this.formParamRisque.get("ChiffreDaffaire")?.value>5e6){let n=this.garantieAll.map(r=>r.codeGarantie).indexOf("G51");-1!==n&&this.garantieAll.splice(n,1)}this.garantieAll.filter(n=>{let r=[],_=[],p=[],s=[];n.sousGarantieList?.filter(m=>{this.sousGarantieExist=!0;let l=[],d=[],c=[],C=[];m.categorieList.filter(g=>{switch(g.description){case"plafond":"input valeur venale"==g.descriptionvVal&&"45A"==this.route.snapshot.paramMap.get("codeProduit")&&(g.valeur=this.valeurVenale),l.push(g),this.plafondExist=!0;break;case"formule":d.push(g),this.formuleExist=!0;break;case"franchise":c.push(g),this.franchiseExist=!0;break;case"taux":C.push(g),this.tauxExiste=!0}}),this.sousGarantieTab.push({idSousGarantie:m.idSousGarantie,codeSousGarantie:m.codeSousGarantie,idPackComplet:m.idPackComplet,idListParamRisque:m.idListParamRisque,description:m.description,obligatoire:m.obligatoire,prime:"",plafond:l,formule:d,franchise:c,taux:C||"",valeur:m.valeurGarantie})}),n.categorieList.filter(m=>{switch(m.description){case"plafond":"input valeur venale"==m.descriptionvVal&&"45A"==this.route.snapshot.paramMap.get("codeProduit")&&(m.valeur=this.valeurVenale),r.push(m),this.plafondExist=!0;break;case"formule":_.push(m),this.formuleExist=!0;break;case"franchise":p.push(m),this.franchiseExist=!0;break;case"taux":s.push(m),this.tauxExiste=!0}}),this.garantieTab.push({idGarantie:n.idGarantie,idPackComplet:n.idPackComplet,codeGarantie:n.codeGarantie,idListParamRisque:n.idListParamRisque,description:n.description,obligatoire:n.obligatoire,prime:"",plafond:r,formule:_,franchise:p,taux:s||"",sousGarantieList:new x.by(this.sousGarantieTab)}),this.sousGarantieTab=[]}),!this.franchiseExist&&-1!==this.displayedColumns.indexOf("franchise")&&(this.displayedColumns.splice(this.displayedColumns.indexOf("franchise"),1),this.DisplayedColumnsSousGarantie.splice(this.DisplayedColumnsSousGarantie.indexOf("franchise"),1)),!this.plafondExist&&-1!==this.displayedColumns.indexOf("plafond")&&(this.displayedColumns.splice(this.displayedColumns.indexOf("plafond"),1),this.DisplayedColumnsSousGarantie.splice(this.DisplayedColumnsSousGarantie.indexOf("plafond"),1)),!this.formuleExist&&-1!==this.displayedColumns.indexOf("formule")&&(this.displayedColumns.splice(this.displayedColumns.indexOf("formule"),1),this.DisplayedColumnsSousGarantie.splice(this.DisplayedColumnsSousGarantie.indexOf("formule"),1)),!this.tauxExiste&&-1!==this.displayedColumns.indexOf("taux")&&(this.displayedColumns.splice(this.displayedColumns.indexOf("taux"),1),this.DisplayedColumnsSousGarantie.splice(this.DisplayedColumnsSousGarantie.indexOf("taux"),1)),this.sousGarantieExist||(this.displayedColumns.splice(this.displayedColumns.indexOf("sousGarantie"),1),this.DisplayedColumnsSousGarantie.splice(this.DisplayedColumnsSousGarantie.indexOf("sousGarantie"),1)),this.garantieTab.sort(function(n,r){}),this.garantieTab.sort((n,r)=>Number(r.obligatoire)-Number(n.obligatoire)),this.dataSource=new x.by(this.garantieTab),this.Smp=this.devis.groupes?.[0]?.groupeList?.[0]?.risque?.paramList?.find(n=>245==n.idParam)?.reponse?.description,console.log("his.dataSource======>",this.dataSource),this.formPackGaranties=new u.Oe(this.dataSource.data.map(n=>new u.cw({idPackComplet:new u.NI(n.idPackComplet),franchise:new u.NI,idfranchise:new u.NI({value:n.franchise,disabled:"input"!=n.franchise.descriptionvVal}),plafond:new u.NI,idplafond:new u.NI({value:n.plafond,disabled:!0}),formule:new u.NI,idformule:new u.NI({value:n.formule,disabled:!0}),taux:new u.NI({value:"",disabled:!1}),idtaux:new u.NI({value:n.taux,disabled:!1}),checked:new u.NI({value:!0,disabled:n.obligatoire}),souGarantieArray:new u.Oe(n.sousGarantieList.data.map(r=>new u.cw({idPackComplet:new u.NI(r.idPackComplet),franchise:new u.NI,idfranchise:new u.NI({value:r.franchise,disabled:"input"!=r.franchise.descriptionvVal}),plafond:new u.NI,idplafond:new u.NI({value:r.plafond,disabled:!0}),formule:new u.NI,idformule:new u.NI({value:r.formule,disabled:!0}),taux:new u.NI(r.taux||""),idtaux:new u.NI({value:r.taux,disabled:!0}),idSousProduits:new u.NI,checked:new u.NI({value:!0,disabled:r.obligatoire}),valeur:new u.NI("95"==this.codeProduit&&null!=r.valeurGarantie?r.valeurGarantie:"")})))}))),this.formPackGaranties.valueChanges.subscribe(()=>{this.errorPackForm=!1}),this.loadTable=!0,this.objectDevis(!0)}},error:o=>{}})}getPackMulti(t,o){this.packService.getPackById(t).subscribe({next:n=>{this.idPackComplet=n.idPackComplet,this.garantiesNew=n.garantie,this.groupesPacks.push({group:o,pack:n}),this.garantieNull=!1},error:n=>{}})}getControl(t,o){return this.actualControlGarantie=t,this.formPackGaranties.at(t).get(o)}getSousGarantieControl(t,o){return this.formPackGaranties.at(this.actualControlGarantie).get("souGarantieArray").at(t).get(o)}changeTypeClient(t){this.typeClient=t.description,"personne morale"==this.typeClient?(this.formInfosAssure.get("prenom")?.setValidators([]),this.formInfosAssure.get("dateNaissance")?.setValidators([]),this.formInfosAssure.get("email")?.setValidators([u.kI.required,u.kI.pattern(q.e.email)]),this.labelNom="Raison Social"):(this.labelNom="Nom",this.formInfosAssure.get("prenom")?.setValidators([u.kI.required,u.kI.pattern(q.e.nom)]),this.formInfosAssure.get("email")?.setValidators([u.kI.pattern(q.e.email)]),this.formInfosAssure.get("dateNaissance")?.setValidators([u.kI.required,U,E])),this.formInfosAssure.get("prenom").updateValueAndValidity(),this.formInfosAssure.get("dateNaissance").updateValueAndValidity(),this.formInfosAssure.get("email").updateValueAndValidity()}goBack(){this.myStepper.previous()}isAllSelected(){return this.selection.selected.length===this.dataSource.data.length}diselectAll(){this.selection.clear(),this.dataSource.data.forEach(t=>{this.formPackGaranties.controls.map(o=>{t.obligatoire||o.value.idPackComplet==t.idPackComplet&&(o.controls.checked.value=!1)})})}masterToggle(){this.isAllSelected()?this.diselectAll():this.dataSource.data.forEach(t=>{this.formPackGaranties.controls.map(o=>{o.value.idPackComplet==t.idPackComplet&&(o.controls.checked.value=!0)}),this.selection.select(t)})}checkGarantie(t,o){this.tarifReady=!1,this.selection.toggle(t),o.checked&&"G50"==t.codeGarantie&&this.getListParamRisque(t.sousGarantieList.data.find(n=>"SG91"==n.codeSousGarantie).idListParamRisque,t.sousGarantieList.data.find(n=>"SG91"==n.codeSousGarantie).idSousGarantie)}getAllParamRisque(){let t=!1,o=[],n=[];this.paramRisqueService.getParamByProduit(this.idProduit).subscribe({next:_=>{n=_,this.paramRisqueService.getWorkFlowByProduit(this.idProduit,this.idDevisWorkFlow).subscribe({next:p=>{_.map(s=>{let m={},l=null,d=null;if(p.filter(c=>{s.paramRisque.idParamRisque==c.paramRisque.idParamRisque&&(t=!0,l=c.enabled,d=c.obligatoire)}),this.paraRisqueType.push(m),console.log("cherche param",s),m.sousProduit=s.sousProduit,m.idParamRisque=s.paramRisque.idParamRisque,m.libelle=s.paramRisque.libelle,m.formName=s.paramRisque.libelle.split(" ").map(c=>c.charAt(0).toUpperCase()+c.substring(1)).join("").replace(/[\xb0']/g,""),m.orderChamp=s.paramRisque.orderChamp,m.position=s.paramRisque.position,m.typeChamp=s.paramRisque.typeChamp,m.sizeChamp=s.paramRisque.sizeChamp,m.codeParam=s.paramRisque.codeParam,console.log("i wanna dieparamRisque ",m),m.reponses=s.paramRisque.categorie?.paramDictionnaires,m.typeValeur=s.iddictionnaire,m.defaultValue=s.valeur,m.obligatoire=d,m.enable=l,m.category=s.paramRisque.categorieParamRisque?.description,m.parent=s.paramRisque.paramRisqueParent,m.isParent=s.paramRisque.isParent,"valeur minimum"==s?.iddictionnaire?.description&&(m.valeurMin=s.valeur),"valeur maximum"==s?.iddictionnaire?.description&&(m.valeurMax=s.valeur),console.log("yaaaaaaaaaaaaaaaaaaaaaaaaa",m.sousProduit,this.selectedSousProduit,s.sousProduit),null!=this.paraRisqueProduit.find(c=>s.paramRisque.idParamRisque===c.idParamRisque)||!t||m.sousProduit?.code!=this.selectedSousProduit&&null!=s?.sousProduit){if(t){console.log("je suis le paramrisque et son fromnam",this.formParamRisque,m.formName);const c=this.formParamRisque.get(m.formName);console.log("jesuis le controle",c),c&&("valeur minimum"==s?.iddictionnaire?.description?(c.addValidators([u.kI.min(m.valeurMin)]),c.updateValueAndValidity()):"valeur maximum"==s?.iddictionnaire?.description&&(c.addValidators([u.kI.max(m.valeurMax)]),c.updateValueAndValidity()))}}else console.log("oooooooooooooooooooooooooo",m),"P25"==m.codeParam&&this.getMarque(),this.formParamRisque.addControl(m.formName,0==m.sizeChamp||null==m.sizeChamp||s.paramRisque?.sousproduit?.idSousProduit!=this.selectedSousProduit&&null!=s.paramRisque?.sousproduit?m.obligatoire?new u.NI(m.defaultValue,[u.kI.required]):new u.NI(m.defaultValue):new u.NI(m.defaultValue,[u.kI.required,u.kI.minLength(m.sizeChamp),u.kI.maxLength(m.sizeChamp)])),this.paraRisqueProduit.push(m),this.displayedColumnsRisque=["risqueNum","groupe","action"],"L08"==s.paramRisque.typeChamp.code&&null==s.paramRisque.paramRisqueParent&&this.paramRisqueService.getTableParamParent(m.idParamRisque).subscribe({next:c=>{m.reponses=c},error:c=>{}});t=!1,o=[]}),this.multiRisque&&(this.formParamRisque.addControl("groupe",new u.NI("T"==this.codeProduit?"Transport":"",[])),this.formParamRisque.addControl("newGroupe",new u.NI("",[]))),this.paraRisqueProduitCategory=this.paraRisqueProduit.reduce((s,m)=>((s[m.category]=s[m.category]||[]).push(m),s),{}),this.paraRisqueProduitCategory=Object.values(this.paraRisqueProduitCategory),this.paraRisqueProduitCategory.map(s=>{s.sort((m,l)=>m.orderChamp<l.orderChamp?-1:1)}),this.tableauxParCategorie=this.paraRisqueProduitCategory[0],this.tableauxParCategorieRisque=this.paraRisqueProduitCategory[1],console.log("inessssss",this.paraRisqueProduitCategory,this.risqueArray),this.risqueArrayReady=!0},error:p=>{}})},error:_=>{}})}submitInfosAssure(){if(console.log("cond",this.formInfosAssure),this.formInfosAssure.valid)console.log("blble",this.myStepper),this.myStepper.next(),this.duree=this.formInfosAssure.get("duree").value,this.devis.typeClient=this.formInfosAssure.get("typeClient").value.idParam,this.devis.produit=this.idProduit,"personne physique"!=this.typeClient?(this.devis.raisonSocial=this.formInfosAssure.get("nom").value,this.devis.prenom="",this.devis.nom="",this.devis.dateAssure=""):(this.devis.prenom=this.formInfosAssure.get("prenom").value,this.devis.nom=this.formInfosAssure.get("nom").value,this.devis.dateAssure=Q(this.formInfosAssure.get("dateNaissance").value).format("YYYY-MM-DD[T]HH:mm:ss.000Z"),this.devis.raisonSocial=""),console.log("this.devis",this.devis),this.devis.telephone=this.formInfosAssure.getRawValue()?.tel,this.devis.email=this.formInfosAssure.getRawValue()?.email,this.devis.duree=this.formInfosAssure.getRawValue()?.duree,this.devis.agence=this.formInfosAssure.getRawValue()?.agence,this.devis.typePolice=this.formInfosAssure.getRawValue()?.typePolice,this.devis.ChiffreAffaire=this.formInfosAssure.getRawValue()?.chiffreA,this.devis.sousProduit=this.IDSOUSPROD,console.log("aqli da",this.formInfosAssure.get("chiffreA"));else{const o=[],n=this.formInfosAssure.controls;for(const r in n)n[r].invalid&&o.push(r)}const t=sessionStorage.getItem("roles")||"";this.isBOUser=t.includes("BO"),"97"==this.codeProduit&&"CTI"==this.selectedSousProduit&&!this.isBOUser&&(this.devis.tailleRisque=1)}getAllConventions(){this.conventionService.getAllConventions().subscribe({next:t=>{this.conventions=t},error:t=>{}})}getAllReductions(){this.filterReduction.typeReduction=262,this.filterReduction.produit=this.idProduit,this.reductionService.reductionFiltre(this.filterReduction).subscribe({next:t=>{this.reductions=t},error:t=>{}})}getReductionByConvention(t){"aucuneConvention"!=t?(this.formReduction.get("reduction").setValidators([u.kI.required]),this.reductionService.getReductionByConvention(t).subscribe({next:o=>{0!=o.length?(this.reductions=o.filter(n=>n.produit==JSON.parse(sessionStorage.getItem("products")||"{}").find(r=>r.codeProduit==this.route.snapshot.paramMap.get("codeProduit")).description),this.errorHandler.error=!1,this.errorHandler.msg=""):(this.errorHandler.error=!0,this.errorHandler.msg="cette convention n'a aucune r\xc3\xa9duction.")},error:o=>{}})):(this.errorHandler.error=!1,this.errorHandler.msg="",this.formReduction.get("reduction").setValidators([]),this.getAllReductions())}submitReduction(){var t=this;return(0,Z.Z)(function*(){if(t.formReduction.valid&&"aucuneConvention"!=t.formReduction.get("convention").value){if("aucuneReduction"!=t.formReduction.get("reduction").value){t.basicTarif.idConvention=t.formReduction.get("convention").value,t.basicTarif.idReduction=t.formReduction.get("reduction").value,t.basicTarif.nbrPages=t.nbrPages.value,t.basicTarif.auditUser=t.autditUser,t.basicTarif.canal=100;const o=yield t.cryptoService.generateHmac(t.tkn,t.basicTarif),r={stringJson:JSON.stringify(t.basicTarif),signature:o};t.reductionService.applyReduction(r).subscribe({next:_=>{t.returnedTarif=_,t.errorHandler.error=!1,t.errorHandler.msg="",t.myStepper.next()},error:_=>{t.handleError(_)}})}}else if("aucuneConvention"==t.formReduction.get("convention").value&&t.formReduction.valid)if("aucuneReduction"==t.formReduction.get("reduction").value)t.myStepper.next(),t.errorHandler.error=!1,t.errorHandler.msg="",t.basicTarif.idConvention=0,t.basicTarif.idReduction=0,t.basicTarif.nbrPages=t.nbrPages.value;else{t.basicTarif.idConvention=t.formReduction.get("convention").value,t.basicTarif.idReduction=t.formReduction.get("reduction").value,t.basicTarif.auditUser=t.autditUser,t.basicTarif.canal=100;const o=yield t.cryptoService.generateHmac(t.tkn,t.basicTarif),r={stringJson:JSON.stringify(t.basicTarif),signature:o};t.reductionService.applyReduction(r).subscribe({next:_=>{t.returnedTarif=_,t.errorHandler.error=!1,t.errorHandler.msg="",t.myStepper.next()},error:_=>{t.handleError(_)}})}})()}changeTypeContact(t){"fixe"==t?this.formInfosAssure.get("tel").setValidators([u.kI.pattern(q.e.fixe),u.kI.required]):this.formInfosAssure.get("tel").setValidators([u.kI.pattern(q.e.mobile),u.kI.required]),this.formInfosAssure.get("tel").updateValueAndValidity()}clearValidators(t){this.paraRisqueProduit.map(o=>{t==o.formName&&(this.formParamRisque.controls[o.formName].setValidators(o.obligatoire?[u.kI.required]:[]),this.formParamRisque.controls[o.formName].updateValueAndValidity())})}getMarque(){this.vehiculeService.getAllMarque().subscribe({next:t=>{this.marques=t},error:t=>{}})}getModeleByMarque(t){this.vehiculeService.getModelByMarque(t.idParam).subscribe({next:o=>{this.modeles=o},error:o=>{}})}submitParamRisque(t){this.loaderControles=!0,this.erreurFormRisque=!1,this.controleDevis=[],this.warningMessage=[],this.isAssure=!1,this.isCheckboxDisabled=!0;const o=K.cloneDeep(this.formParamRisque);if(console.log("jerentre 01"),console.log("formParamRisque",this.formParamRisque),this.multiRisqueArray.length==this.nmbVehicule.value)P().fire("le nombre de risque a atteint le nombre de risques indiqu\xe9","error");else if(this.formParamRisque.valid){let _,p,m,s="debase",l={paramList:[]},d=[];this.paraRisqueProduit.map(c=>{Object.keys(this.formParamRisque.getRawValue()).map(C=>{C==c.formName&&(_=c.idParamRisque,"L01"==c.typeChamp?.code||"L04"==c.typeChamp?.code?(p=this.formParamRisque.getRawValue()?.[C].idParam,s="",m={idParam:_,valeur:p},Object.assign(this.risqueConsult,{[c.libelle]:this.formParamRisque.getRawValue()?.[C]?.description})):(p=null,"L08"==c.typeChamp?.code?(s=this.formParamRisque.getRawValue()?.[C]?.id,Object.assign(this.risqueConsult,{[c.libelle]:this.formParamRisque.getRawValue()?.[C]?.description})):"L06"!=c.typeChamp?.code?(s=this.formParamRisque.getRawValue()?.[C],Object.assign(this.risqueConsult,{[c.libelle]:s})):(s=Q(this.formParamRisque.getRawValue()?.[C]).format("YYYY-MM-DD[T]HH:mm:ss.000Z"),Object.assign(this.risqueConsult,{[c.libelle]:s})),m={idParam:_,valeur:s}),this.paramElement={idParam:_,reponse:{idReponse:p,description:s}})}),l.paramList.push(this.paramElement),this.controleDevis.push(m)}),l.paramList=l.paramList.filter((c,C,g)=>g.findIndex(h=>h.idParam===c.idParam)===C),this.devisService.controleDevis([this.controleDevis],this.codeProduit).subscribe({next:c=>{this.loaderControles=!1;let C=!1;if(c[0].map(g=>{this.paraRisqueProduit.map(h=>{h.idParamRisque==g.idParam&&(g.bloquant?(this.formParamRisque.controls[h.formName].addValidators([vn(g.bloquant,g.message)]),this.formParamRisque.controls[h.formName].updateValueAndValidity(),C=!0):null!=g.message&&this.warningMessage.push({idParam:h.idParamRisque,msg:g.message}))})}),!C&&(0!=this.warningMessage.length&&P().fire(this.warningMessage[0].msg,"","warning"),0==c.filter(g=>!0===g.bloquant).length)){if(this.devis.groupes=this.devisGroupe,this.multiRisque?this.multiRisqueTab(o):this.myStepper.next(),this.risqueIndexBody=this.risqueIndexBody+1,d.push({numRisque:this.risqueIndexBody,risque:l}),this.multiRisque){let g=!1;if(this.devisGroupe.map(h=>{h.description==this.formParamRisque.get("groupe").value&&(g=!0)}),g?this.devisGroupe.filter(h=>h.description==this.formParamRisque.get("groupe").value)[0]?.groupeList.push({risque:l,numRisque:this.risqueIndexBody}):this.devisGroupe.push({description:"new"==this.formParamRisque.get("groupe").value?this.formParamRisque.get("newGroupe").value:this.formParamRisque.get("groupe").value,idPack:this.idPack,groupeList:d}),this.multiRisque&&"new"==this.formParamRisque.get("groupe")?.value){this.formParamRisque.get("groupe")?.setValue(this.formParamRisque.get("newGroupe")?.value),this.groupArray.push(this.formParamRisque.get("newGroupe")?.value);let h=1==this.groupArray.length?[]:this.dataSourceGroupePack?.data;h.push({group:this.formParamRisque.get("newGroupe")?.value,pack:this.packs[0]}),this.dataSourceGroupePack=new x.by(h)}}this.getAllPack()}},error:c=>{console.log(c)}})}}removeDuplicateParams(t){const o=new Map;for(const n of t)o.set(n.idParam,n);return Array.from(o.values())}checkDoublons(t,o){const n=this.devis.groupes.some(_=>_.groupeList.some(p=>p.risque.paramList.some(s=>s.reponse.description===t))),r=this.devis.groupes.some(_=>_.groupeList.some(p=>p.risque.paramList.some(s=>s.reponse.description===o)));return r&&n?"both":r?"P38":!!n&&"P30"}multiNext(){0!=this.multiRisqueArray.length&&(this.myStepper.next(),this.getAllPack())}multiRisqueTab(t){if(console.log("hghghg depuis multirisUETAVLE",t),t.valid){let o=t.value;"T"===(Object.keys(t.value).map(n=>{o[n]="object"==typeof t.controls[n].value?t.controls[n].value?.description:t.controls[n].value}),this.codeProduit)?t.get("newGroupe"):o.groupe=t.get("newGroupe").value,Object.assign(o,{risqueNum:this.risqueIndex=this.risqueIndex+1}),this.multiRisqueArray.push(o),this.dataSourceRisque=new x.by(this.multiRisqueArray),console.log("je suis dataspourcerisQUE",this.dataSourceRisque),this.formParamRisque.updateValueAndValidity(),this.paraRisqueProduit.map(n=>{0!=n.sizeChamp&&null!=n.sizeChamp?this.formParamRisque.get(n.formName).setValidators([u.kI.required,u.kI.minLength(n.sizeChamp),u.kI.maxLength(n.sizeChamp)]):n.obligatoire?this.formParamRisque.get(n.formName).setValidators([u.kI.required]):this.formParamRisque.get(n.formName).setValidators([])})}}getRelation(t,o,n,r,_,p){if(console.log("prinatge22.0",this.formParamRisque),console.log("response",_,p,r),"48"===this.selectedSousProduit&&"T002"===p){const s=["PointDeD\xe9part","PointDarriv\xe9e","WilayaDeD\xe9part","CommuneDeD\xe9part","WilayaDarriv\xe9e","CommuneDarriv\xe9e","PaysDarriv\xe9e","Provenance(paysDeD\xe9part)"];s.forEach(d=>{this.formParamRisque.get(d)?.enable({emitEvent:!1}),this.formParamRisque.get(d)?.setValidators(u.kI.required),this.formParamRisque.get(d)?.updateValueAndValidity({emitEvent:!1})});const m=["PaysDarriv\xe9e","Provenance(paysDeD\xe9part)"];m.forEach(d=>{this.formParamRisque.get(d)?.enable({emitEvent:!1}),this.formParamRisque.get(d)?.setValidators(u.kI.required),this.formParamRisque.get(d)?.updateValueAndValidity({emitEvent:!1})});const l=["WilayaDeD\xe9part","CommuneDeD\xe9part","WilayaDarriv\xe9e","CommuneDarriv\xe9e"];switch(l.forEach(d=>{this.formParamRisque.get(d)?.enable({emitEvent:!1}),this.formParamRisque.get(d)?.setValidators(u.kI.required),this.formParamRisque.get(d)?.updateValueAndValidity({emitEvent:!1})}),r){case 17323:s.forEach(d=>{this.formParamRisque.get(d)?.disable({emitEvent:!1}),this.formParamRisque.get(d)?.clearValidators(),this.formParamRisque.get(d)?.updateValueAndValidity({emitEvent:!1})});break;case 17324:m.forEach(d=>{this.formParamRisque.get(d)?.disable({emitEvent:!1}),this.formParamRisque.get(d)?.clearValidators(),this.formParamRisque.get(d)?.updateValueAndValidity({emitEvent:!1})});break;case 17325:l.forEach(d=>{this.formParamRisque.get(d)?.disable({emitEvent:!1}),this.formParamRisque.get(d)?.clearValidators(),this.formParamRisque.get(d)?.updateValueAndValidity({emitEvent:!1})})}}if("97"==this.codeProduit&&"P261"==p&&(this.devis.groupes[0]?.groupeList?.map(s=>{s.risque.paramList.find(m=>m.idParam==n).reponse.idParam=this.formParamRisque.get(_).value.idParam}),this.dataSourceRisque.data.map(s=>s["Activit\xe9Exerc\xe9eDevrait-elle\xcatreEnregistr\xe9eAuCNRC\t"]=this.formParamRisque.get(_).value.description)),1==o)if("L01"==t)this.paramRisqueService.getParamRelation(n,r).subscribe({next:s=>{this.paraRisqueProduit.filter(m=>{m.idParamRisque==s[0].idParamRisque&&(m.reponses=s[0].categorie.paramDictionnaires,this.formParamRisque.controls[m.formName].enable())})},error:s=>{}});else{let s=this.paraRisqueProduit.find(m=>m.parent?.idParamRisque==n)?.idParamRisque;s&&this.paramRisqueService.getTableParamChild(s,r).subscribe({next:m=>{this.paraRisqueProduit.filter(l=>{l.idParamRisque==s&&(l.reponses=m,this.formParamRisque.controls[l.formName].enable())})},error:m=>{}})}}objectDevis(t){this.formParamRisque.get("SMP"),console.log("withRemplissage ",t);let n=!1,r=!1,_=[],p=[],s=null;if(this.multiRisque&&"T"!=this.codeProduit)this.groupesPacks.map(m=>{m.pack.garantie.map(l=>{l.categorieList?.map(d=>{s=null,null!=l.sousCategorieList?.length&&0!=l.sousCategorieList?.length&&(s={idSousCategoriePackComplet:d.sousCategorieList[0].idParamSCPackComplet,valeur:d.sousCategorieList[0].valeur}),p.push({idCategoriePackComplet:d.idParamPackComplet,valeur:d.valeur,sousCategorieList:s})}),_.push({idPackComplet:l.idPackComplet,prime:"",categorieList:p}),p=[]}),this.devisGroupe.map(l=>{l.description==m.group&&l.groupeList.map(d=>{d.risque.packCompletList=_,d.risque.primeList=[],d.risque.taxeList=[]})}),_=[]});else if(this.garantieAll.map(m=>{Object.values(this.formPackGaranties.controls).map(l=>{m.idPackComplet==l.value.idPackComplet&&(console.log(" cond01 je suis 1951"),(l.controls.checked.value||("96"==this.route.snapshot.paramMap.get("codeProduit")||"95"==this.route.snapshot.paramMap.get("codeProduit"))&&t)&&(n=!0,0!=l.controls.idtaux.value.length?l.controls.idtaux.value.length>1?(s=null,this.gestionErreurPack(l.value.idPackComplet,"taux",this.formPackGaranties,t),this.errorPackForm||(null!=l.value.taux?.sousCategorieList?.length&&0!=l.value.taux?.sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.value.taux?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.value.taux.valeur}),p.push({idCategoriePackComplet:l.value?.taux?.idParamPackComplet,valeur:t?null:l.value.taux.valeur,sousCategorieList:s}))):(console.log("vvv",l.value),null!=l.value.taux&&(s=null,s={idSousCategoriePackComplet:l.controls.idtaux.value[0].sousCategorieList[0]?.idParamSCPackComplet,valeur:l.controls.idtaux.value[0].valeur},p.push({idCategoriePackComplet:l.controls.idtaux?.value[0]?.idParamPackComplet,valeur:l.value.taux,sousCategorieList:s}),null!=l.controls.idtaux.value[0].sousCategorieList?.length&&0!=l.controls.idtaux.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.controls.idtaux?.value[0]?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.controls.idtaux.value[0].valeur}),p.push({idCategoriePackComplet:l.controls.idtaux?.value[0]?.idParamPackComplet,valeur:t?null:l.controls.idtaux.value[0].valeur,sousCategorieList:s}))):console.log("his.formPackGaranties",this.formPackGaranties),0!=l.controls.idformule.value.length&&(l.controls.idformule.value.length>1?(s=null,this.gestionErreurPack(l.value.idPackComplet,"formule",this.formPackGaranties,t),this.errorPackForm||(null!=l.value.formule?.sousCategorieList?.length&&0!=l.value.formule?.sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.value.formule?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.value.formule.valeur}),p.push({idCategoriePackComplet:l.value?.formule?.idParamPackComplet,valeur:t?null:l.value.formule.valeur,sousCategorieList:s}))):null!=l.value.formule?(s=null,null!=l.controls.idformule.value[0].sousCategorieList?.length&&0!=l.controls.idformule.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.controls.idformule.value[0].sousCategorieList[0]?.idParamSCPackComplet,valeur:l.value.formule}),p.push({idCategoriePackComplet:l.controls.idformule?.value[0]?.idParamPackComplet,valeur:t?null:l.value.formule,sousCategorieList:s})):("input"==l.controls.idformule.value[0].descriptionvVal&&!t&&(this.errorPackForm=!0),s=null,null!=l.controls.idformule.value[0].sousCategorieList?.length&&0!=l.controls.idformule.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.controls.idformule?.value[0]?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.controls.idformule.value[0].valeur}),p.push({idCategoriePackComplet:l.controls.idformule?.value[0]?.idParamPackComplet,valeur:t?null:l.controls.idformule.value[0].valeur,sousCategorieList:s}))),0!=l.controls.idfranchise.value.length&&(console.log(" cond13",l),l.controls.idfranchise.value.length>1?(console.log(" cond14",l),s=null,null!=l.value.franchise?.sousCategorieList?.length&&0!=l.value.franchise.sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.value.franchise?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.value.franchise.valeur}),p.push({idCategoriePackComplet:l.value?.franchise?.idParamPackComplet,valeur:t?null:l.value.franchise?.valeur,sousCategorieList:s}),console.log("categoryOfGaranti",p)):null!=l.value.franchise?(s=null,null!=l.controls.idfranchise.value[0].sousCategorieList?.length&&0!=l.controls.idfranchise.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.controls.idfranchise?.value[0]?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.value.franchise}),p.push({idCategoriePackComplet:l.controls.idfranchise?.value[0]?.idParamPackComplet,valeur:t?null:l.value.franchise,sousCategorieList:s})):("input"==l.controls.idfranchise.value[0].descriptionvVal&&!t&&(this.errorPackForm=!0),s=null,null!=l.controls.idfranchise.value[0].sousCategorieList?.length&&0!=l.controls.idfranchise.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.controls.idfranchise?.value[0]?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.controls.idfranchise.value[0].valeur}),p.push({idCategoriePackComplet:l.controls.idfranchise?.value[0]?.idParamPackComplet,valeur:t?null:l.controls.idfranchise.value[0].valeur,sousCategorieList:s}))),0!=l.controls.idplafond.value.length&&(l.controls.idplafond.value.length>1?(s=null,null!=l.value.plafond?.sousCategorieList?.length&&0!=l.value.plafond?.sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.value.plafond?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.value?.plafond?.valeur}),p.push({idCategoriePackComplet:l.value?.plafond?.idParamPackComplet,valeur:t?null:l.value.plafond.valeur,sousCategorieList:s})):null!=l.value.plafond?(s=null,null!=l.controls.idplafond.value[0].sousCategorieList?.length&&0!=l.controls.idplafond.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.controls.idplafond?.value[0]?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.value.plafond}),p.push({idCategoriePackComplet:l.controls.idplafond?.value[0]?.idParamPackComplet,valeur:t?null:l.value.plafond,sousCategorieList:s})):("input"==l.controls.idplafond.value[0].descriptionvVal&&!t&&(this.errorPackForm=!0),s=null,null!=l.controls.idplafond.value[0].sousCategorieList?.length&&0!=l.controls.idplafond.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:l.controls.idplafond?.value[0]?.sousCategorieList[0]?.idParamSCPackComplet,valeur:l.controls.idplafond.value[0].valeur}),p.push({idCategoriePackComplet:l.controls.idplafond?.value[0]?.idParamPackComplet,valeur:t?null:l.controls.idplafond.value[0].valeur,sousCategorieList:s}))),n&&!this.errorPackForm&&(_.push({idPackComplet:m.idPackComplet,prime:"",categorieList:p}),p=[]),m.sousGarantieList.forEach(d=>{l.get("souGarantieArray").controls.forEach(c=>{if(d.idPackComplet==c.value.idPackComplet&&(c.controls.checked.value||("96"==this.route.snapshot.paramMap.get("codeProduit")||"95"==this.route.snapshot.paramMap.get("codeProduit"))&&t)){r=!0,0!=c.controls.idformule.value.length&&(c.controls.idformule.value.length>1?(s=null,this.gestionErreurPack(c.value.idPackComplet,"formule",l.get("souGarantieArray"),t),this.errorPackForm||(null!=c.value.formule?.sousCategorieList?.length&&0!=c.value.formule?.sousCategorieList?.length&&(s={idSousCategoriePackComplet:c.value?.formule?.sousCategorieList[0]?.idParamSCPackComplet,valeur:c?.value?.formule?.valeur}),p.push({idCategoriePackComplet:c.value?.formule?.idParamPackComplet,valeur:t?null:c.value.formule.valeur,sousCategorieList:s}))):null!=c.value.formule?(s=null,null!=c.controls.idformule.value[0].sousCategorieList?.length&&0!=c.controls.idformule.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:c.controls.idformule?.value[0]?.sousCategorieList[0]?.idParamSCPackComplet,valeur:c.value.formule}),p.push({idCategoriePackComplet:c.controls.idformule?.value[0]?.idParamPackComplet,valeur:t?null:c.value.formule,sousCategorieList:s})):("input"==c.controls.idformule.value[0].descriptionvVal&&!t&&(this.errorPackForm=!0),s=null,null!=l.controls.idformule.value[0].sousCategorieList?.length&&0!=c.idformule.value[0].sousCategorieList?.length&&(c={idSousCategoriePackComplet:c.controls.idformule?.value[0]?.sousCategorieList[0]?.idParamSCPackComplet,valeur:t?null:c.controls.idformule.value[0].valeur}),p.push({idCategoriePackComplet:c.controls.idformule?.value[0]?.idParamPackComplet,valeur:t?null:c.controls.idformule.value[0].valeur,sousCategorieList:s}))),0!=c.controls.idfranchise.value.length&&(c.controls.idfranchise.value.length>1?(s=null,null!=c.value.franchise.sousCategorieList?.length&&0!=l.value.franchise.sousCategorieList?.length&&(s={idSousCategoriePackComplet:c.value.franchise.sousCategorieList[0]?.idParamSCPackComplet,valeur:c.value.franchise.valeur}),p.push({idCategoriePackComplet:c.value.franchise.idParamPackComplet,valeur:c.value.franchise.valeur,sousCategorieList:s})):null!=c.value.franchise?(s=null,null!=c.controls.idfranchise.value[0].sousCategorieList?.length&&0!=c.controls.idfranchise.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:c.controls.idfranchise.value[0].sousCategorieList[0]?.idParamSCPackComplet,valeur:c.value.franchise}),p.push({idCategoriePackComplet:c.controls.idfranchise.value[0].idParamPackComplet,valeur:c.value.franchise,sousCategorieList:s})):("input"==c.controls.idfranchise.value[0].descriptionvVal&&!t&&(this.errorPackForm=!0),s=null,null!=c.controls.idfranchise.value[0].sousCategorieList?.length&&0!=c.controls.idfranchise.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:c.controls.idfranchise.value[0].sousCategorieList[0]?.idParamSCPackComplet,valeur:c.controls.idfranchise.value[0].valeur}),p.push({idCategoriePackComplet:c.controls.idfranchise.value[0].idParamPackComplet,valeur:c.controls.idfranchise.value[0].valeur,sousCategorieList:s}))),0!=c.controls.idplafond.value.length&&(c.controls.idplafond.value.length>1?(s=null,null!=c.value.plafond.sousCategorieList?.length&&0!=c.value.plafond.sousCategorieList?.length&&(s={idSousCategoriePackComplet:c.value.plafond.sousCategorieList[0]?.idParamSCPackComplet,valeur:c.value.plafond.valeur}),p.push({idCategoriePackComplet:c.value.plafond.idParamPackComplet,valeur:c.value.plafond.valeur,sousCategorieList:s})):null!=c.value.plafond?(s=null,null!=c.controls.idplafond.value[0].sousCategorieList?.length&&0!=c.controls.idplafond.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:c.controls.idplafond.value[0].sousCategorieList[0]?.idParamSCPackComplet,valeur:c.value.plafond}),p.push({idCategoriePackComplet:c.controls.idplafond.value[0].idParamPackComplet,valeur:c.value.plafond,sousCategorieList:s})):("input"==c.controls.idplafond.value[0].descriptionvVal&&!t&&(this.errorPackForm=!0),s=null,null!=c.controls.idplafond.value[0].sousCategorieList?.length&&0!=c.controls.idplafond.value[0].sousCategorieList?.length&&(s={idSousCategoriePackComplet:c.controls.idplafond.value[0].sousCategorieList[0]?.idParamSCPackComplet,valeur:c.controls.idplafond.value[0].valeur}),p.push({idCategoriePackComplet:c.controls.idplafond.value[0].idParamPackComplet,valeur:c.controls.idplafond.value[0].valeur,sousCategorieList:s}))),s=null;let C=_.some(g=>g.idPackComplet===d.idPackComplet);r&&!this.errorPackForm&&!C&&(_.push({idPackComplet:d.idPackComplet,prime:"",categorieList:p}),p=[])}})})))}),p=[],n=!1}),!this.errorPackForm){if("97"==this.codeProduit){_.find(l=>1541==l.idPackComplet).categorieList?.filter(l=>2118==l.idCategoriePackComplet&&"0"==l.valeur);const m=_.find(l=>1541===l.idPackComplet);m&&"97"==this.codeProduit&&(m.categorieList=m.categorieList.filter(l=>{if(2118==l.idCategoriePackComplet)return"0"!==l.valeur}))}"97"==this.codeProduit?this.devisGroupe[0]?.groupeList?.map(m=>{m.risque.packCompletList=_}):this.devisGroupe[0].groupeList[0].risque.packCompletList=_,this.devisGroupe[0].groupeList[0].risque.primeList=[],this.devisGroupe[0].groupeList[0].risque.taxeList=[]}("96"==this.route.snapshot.paramMap.get("codeProduit")||"95"==this.route.snapshot.paramMap.get("codeProduit"))&&t&&(this.remplissageTarif(),"95"==this.route.snapshot.paramMap.get("codeProduit")&&this.openDialogMRP())}openDialogMRP(){this.indexSousGarantieMrp=0,this.indexGarantieMrp<this.garantieAll.length&&(this.garantieAll[this.indexGarantieMrp].list&&this.formPackGaranties.controls.find(t=>t.controls.idPackComplet.value==this.garantieAll[this.indexGarantieMrp].idPackComplet)?.controls.checked.value&&("G53"!=this.garantieAll[this.indexGarantieMrp].codeGarantie||this.formParamRisque.get("Activit\xe9Professionnelle")?.value?.is_medical)?this.getListParamRisque(this.garantieAll[this.indexGarantieMrp].idListParamRisque,this.garantieAll[this.indexGarantieMrp].idGarantie):(this.indexSousGarantieMrp=0,this.checkListSousGaranties(this.garantieAll[this.indexGarantieMrp].sousGarantieList,this.formPackGaranties.controls.find(t=>t.controls.idPackComplet.value==this.garantieAll[this.indexGarantieMrp].idPackComplet)?.controls?.souGarantieArray)))}checkListSousGaranties(t,o){this.indexSousGarantieMrp<t.length?t[this.indexSousGarantieMrp].list&&o.controls.find(n=>n.controls.idPackComplet.value==t[this.indexSousGarantieMrp].idPackComplet)?.controls.checked.value?this.getListParamRisque(t[this.indexSousGarantieMrp].idListParamRisque,t[this.indexSousGarantieMrp].idSousGarantie):(this.indexSousGarantieMrp++,this.checkListSousGaranties(t,o)):(this.indexGarantieMrp++,this.openDialogMRP())}remplissageTarif(){this.devisService.remplissageDevis(this.devis).subscribe({next:t=>{this.garantieTab.map(o=>{o.prime=null,t.groupes[0].groupeList[0].risque.packCompletList.map(n=>{o.idPackComplet==n.idPackComplet&&o.plafond.forEach(r=>{n.categorieList.forEach(_=>{r.idParamPackComplet===_.idCategoriePackComplet&&(r.valeur=_.valeur)})}),o.sousGarantieList.data?.map(r=>{r.idPackComplet==n.idPackComplet&&r.plafond.forEach(_=>{n.categorieList.forEach(p=>{_.idParamPackComplet===p.idCategoriePackComplet&&(_.valeur=p.valeur)})})})})})},error:t=>{}})}submitDevis(){var t=this;return(0,Z.Z)(function*(){"97"==t.codeProduit&&(t.formReduction.get("idReduction")?.setValue(0),t.formReduction.get("idConvention")?.setValue(0),t.returnedTarif.idReduction=0),t.returnedTarif.duree=t.formInfosAssure.value.duree,t.returnedTarif.auditUser=t.autditUser,t.loaderDevis=!0;const o=yield t.cryptoService.generateHmac(t.tkn,t.returnedTarif),r={stringJson:JSON.stringify(t.returnedTarif),signature:o};t.devisService.createDevis(r).subscribe({next:_=>{t.successDevis=!0,t.returnedDevis=_,t.errorHandler.error=!1,t.errorHandler.msg="",t.saveDevis=!1,t.idDevis=_.idDevis,t.loaderDevis=!1,t.idDevis=_.idDevis,P().fire(`Le devis N\xb0 ${_.idDevis} a \xe9t\xe9 cr\xe9er avec succ\xe9s.`,"","success"),t.myStepper.next()},error:_=>{t.loaderDevis=!1,t.handleError(_)}})})()}generateCalcul(){var t=this;return(0,Z.Z)(function*(){if("T"==t.codeProduit&&(t.devis.nbrPages=t.nbrPages.value),t.objectDevis(!1),console.log("je suis lobjet devis",t.devis,t.objectDevis),0!==t.devis.tailleRisque&&t.devis.groupes.length>0)for(let n=0;n<t.devis.groupes?.[0].groupeList?.[0]?.risque?.packCompletList?.length;n++){let r=t.devis.groupes?.[0].groupeList?.[0]?.risque?.packCompletList?.[n];for(let _=0;_<t.devis.groupes?.[0]?.groupeList?.[0]?.risque?.paramList?.length;_++){let p=t.devis.groupes?.[0]?.groupeList?.[0]?.risque?.paramList?.[_];t.garantiesNew.forEach(s=>{s.categorieList.forEach(m=>{"C7"===m.code&&s.paramRisquePlafond&&s.paramRisquePlafond.idParamRisque===p.idParam&&r.categorieList.forEach(l=>{l.idCategoriePackComplet==m.idParamPackComplet&&(l.valeur=p.reponse.description)})})})}}const o=t.devis.list.find(n=>1==n.idListParamRisque);if(o&&(o.idGarantie=87),!t.errorPackForm){t.loaderTarif=!0;const n=yield t.cryptoService.generateHmac(t.tkn,t.devis),_={stringJson:JSON.stringify(t.devis),signature:n};console.log("ghfghfjgfjgfjhgfjgfjgfjfg",t.devis,_),t.devisService.generateTarif(_).subscribe({next:p=>{t.errorHandler.error=!1,t.errorHandler.msg="",t.returnedTarif=p,t.basicTarif=p,t.tarifReady=!0,t.loaderTarif=!1,t.saveDevis=!0,t.loaderDevis=!1,t.garantieNull=!1;const s=p.groupes[0]?.groupeList[0]?.risque?.paramList.find(m=>"P152"==m.codeParam);t.valAss=s?.reponse?.description,t.valAss>=5e9&&0==t.isBOUser&&(P().fire("La valeur assur\xe9e d\xe9passe 5 000 000 000 DA , vous ne pouvez pas continuer ","error"),t.goBack(),t.goBack()),t.multiRisque&&p.groupes.some(l=>l.groupeList.some(d=>d.risque.packCompletList.some(c=>0===c.prime)))&&(t.valAss>=5e9&&0==t.isBOUser?(P().fire("La valeur assur\xe9e d\xe9passe 5 000 000 000 DA , vous ne pouvez pas continuer ","error"),t.goBack(),t.goBack()):(t.garantieNull=!0,P().fire("Vous ne pouvez pas continuer. Les primes des garanties ne peuvent pas \xeatre nulles.","","error"))),t.garantieTab.forEach(m=>{let l=p.groupes[0].groupeList[0].risque.packCompletList.find(d=>m.idPackComplet===d.idPackComplet);l&&(0==l.prime?t.valAss>=5e9&&0==t.isBOUser?(P().fire("La valeur assur\xe9e d\xe9passe 5 000 000 000 DA , vous ne pouvez pas continuer ","error"),t.goBack(),t.goBack()):(t.garantieNull=!0,P().fire("Vous ne pouvez pas continuer. Les primes des garanties ne peuvent pas \xeatre nulles.","","error")):m.prime=l.prime),m.sousGarantieList?.data?.forEach((d,c)=>{let C=p.groupes[0].groupeList[0].risque.packCompletList.find(g=>d.idPackComplet===g.idPackComplet);C&&(d.prime=C.prime,0!=C?.categorieList.length&&C?.categorieList.map(g=>{let h=d.formule.find(L=>L.idParamPackComplet==g.idCategoriePackComplet),v=d.franchise.find(L=>L.idParamPackComplet==g.idCategoriePackComplet),b=d.plafond.find(L=>L.idParamPackComplet==g.idCategoriePackComplet),y=d.taux.find(L=>L.idParamPackComplet==g.idCategoriePackComplet);h&&(h.valeur=g.valeur),v&&(v.valeur=g.valeur),b&&(b.valeur=g.valeur),y&&(y.valeur=g.valeur)}))})}),t.PrimeTotale=p.primeList.find(m=>"Prime nette"==m.description)?.prime,t.dataSource=new x.by(t.garantieTab),t.multiRisque&&!t.garantieNull&&t.myStepper.next()},error:p=>{t.loaderTarif=!1,t.handleError(p)}})}})()}goBackReduc(){this.returnedTarif=this.basicTarif,this.myStepper.previous()}buildTableBody(t,o){var n=[];return o.includes("text1")?n.push(["","",""]):(o.includes("prime")&&(o=o.map(r=>{r.text=r,r.style="headerTable"})),n.push(o)),t.forEach(function(r){const _=[];o.forEach(function(p){_.push(r[p])}),n.push(_)}),n}table(t,o){let n=100/o.length,r=[];return o.map(_=>{r.push(n+"%")}),[{layout:o.includes("text1")?"noBorders":"",style:"table",table:{headerRows:1,widths:r,margin:[5,5,5,5],body:this.buildTableBody(t,o)}}]}downloadDevis(t){this.devisService.getDevisById(t.idDevis).subscribe({next:o=>{this.devisOutput=o,this.consultRisque(o.groupes[0].risques[0].idRisque,o.groupes[0].idGroupe)},error:o=>{this.handleError(o)}})}consultRisque(t,o){var r,n=this;this.devisService.getParamDevisByIdRisque(this.devisOutput.idDevis,o,t).subscribe({next:(r=(0,Z.Z)(function*(_){var p;n.devisOutput.risqueList=yield Object.values(_),"45F"==n.devisOutput.produit.codeProduit?yield n.devisService.getPackIdRisque(n.devisOutput.idDevis,t).subscribe({next:(p=(0,Z.Z)(function*(s){n.devisOutput.paramDevisList=s.garantieList,n.devisOutput.pack=s.pack,yield n.devisService.outputDevisFlotte(n.devisOutput)}),function(m){return p.apply(this,arguments)}),error:p=>{}}):yield n.devisService.getPackIdRisque(n.devisOutput.idDevis,t).subscribe({next:function(){var p=(0,Z.Z)(function*(s){n.devisOutput.paramDevisList=s.garantieList,n.devisOutput.pack=s.pack,yield n.devisService.generatePdf(n.devisOutput)});return function(m){return p.apply(this,arguments)}}(),error:p=>{}})}),function(p){return r.apply(this,arguments)}),error:r=>{}})}goToResume(){this.multiRisque?this.generateCalcul():this.myStepper.next()}gestionErreurPack(t,o,n,r){r||n.controls.forEach(_=>{_.value.idPackComplet==t&&("formule"==o&&null==_.value.formule||"plafond"==o&&null==_.value.plafond||"franchise"==o&&null==_.value.franchise)&&(this.errorPackForm=!0)})}convertToContract(){this.router.navigateByUrl("creation-contrat/"+this.route.snapshot.paramMap.get("codeProduit")+"/"+this.route.snapshot.paramMap.get("produit")+"/"+this.idDevis)}openDialog(t){this.dialog.open(j._,{width:"60%",data:{risque:this.multiRisqueArray.filter(n=>n.risqueNum==t)[0]}}).afterClosed().subscribe(n=>{})}openDialogList(t){this.dialog.open(z.I,{width:"60%",data:{displayedColumnsListParamRisque:this.displayedColumnsListParamRisque,idListParamList:this.idListParamList,listParamRisque:this.listParamRisque,formListParamRisque:this.formListParamRisque,garantie:this.garantieAll.find(n=>n.idGarantie==t),dataSourceListParamRisque:this.dataSourceListParamRisque,numberEffective:this.formParamRisque.get("Effectif").value}}).afterClosed().subscribe(n=>{if(n){const r=JSON.parse(JSON.stringify(n.data));this.dataSourceListParamRisque=r;const _=this.idsListParams,p=this.codesListParams;this.displayedColumnsListParamRisque.splice(-1,1),this.paramList=r.filter(d=>this.displayedColumnsListParamRisque.every(c=>d.hasOwnProperty(c))).map(d=>{let c=[],C=Object.keys(d),g=null,h="debase";for(let v=0;v<C.length;v++)"Liste of values"==this.listParamRisque.find(b=>b.formName==C[v])?.typeChamp?.description?(g=d[C[v]].idParam,h=d[C[v]].code):(g=null,"From Table"==this.listParamRisque.find(b=>b.formName==C[v])?.typeChamp?.description?h=d[C[v]].code:"date"!=this.listParamRisque.find(b=>b.formName==C[v])?.typeChamp?.description?34==this.listParamRisque.find(b=>b.formName==C[v])?.idParamRisque?h=String(Number(d[C[v]])):"Marque"==C[v]||"Mod\xe8le"==C[v]?(g=d[C[v]],h=""):h=d[C[v]]:h=d[C[v]]),c.push({idParam:_[v],codeParam:p[v],reponse:{idReponse:g,description:h}});return c});const s={idListParamRisque:this.idListParamList,idGarantie:t,paramList:[]};this.paramList.map(d=>{s.paramList.push({prime:"",paramListsValues:d})});let m=this.devis.list.findIndex(d=>d.idListParamRisque==s.idListParamRisque),l="G53"==this.garantieAll.find(d=>d.idGarantie==t)?.codeGarantie?"Effectifs":"Mat\xe9riel informatique";if(-1!=m)this.devis.list[m]=s,this.dataSourceListOfListes.data[m]={idListParamRisque:this.idListParamList,idGarantie:t,description:l};else{this.devis.list.push(s);const d=[...this.dataSourceListOfListes.data,{idListParamRisque:this.idListParamList,idGarantie:t,description:l}];this.dataSourceListOfListes.data=d}this.formListParamRisque.reset(),""!=t&&(-1==this.garantieAll.findIndex(d=>d.idGarantie==t)&&this.indexSousGarantieMrp++,this.checkListSousGaranties(this.garantieAll[this.indexGarantieMrp].sousGarantieList,this.formPackGaranties.controls.find(d=>d.controls.idPackComplet.value==this.garantieAll[this.indexGarantieMrp].idPackComplet)?.controls?.souGarantieArray))}else{let r=this.devis.list.findIndex(_=>_.idListParamRisque==this.idListParamList);-1!=r&&(this.devis.list[r].idGarantie=t),""!=t&&(-1==this.garantieAll.findIndex(_=>_.idGarantie==t)&&this.indexSousGarantieMrp++,this.checkListSousGaranties(this.garantieAll[this.indexGarantieMrp].sousGarantieList,this.formPackGaranties.controls.find(_=>_.controls.idPackComplet.value==this.garantieAll[this.indexGarantieMrp].idPackComplet)?.controls?.souGarantieArray))}})}handleError(t){switch(t.status){case 500:this.errorHandler.error=!0,this.errorHandler.msg="Erreur syst\xe8me, veuillez contacter l'administrateur.";break;case 402:this.errorHandler.error=!0,this.errorHandler.msg="Erreur lors de la validation du devis, veuillez contacter l'administrateur.";break;case 404:case 400:this.errorHandler.error=!0,this.errorHandler.msg=t.message;break;case"other":this.errorHandler.error=!0,this.errorHandler.msg=t}this.errorHandler.error&&P().fire(this.errorHandler.msg,"","error")}submitNumberVehicule(){this.devis.tailleRisque=this.nmbVehicule.value;const t=sessionStorage.getItem("roles")||"";t.includes("DA")||t.includes("CDC"),this.withFile=!0,this.devis.file=null}checkVehiculeNumber(){const t=sessionStorage.getItem("roles")||"";t.includes("DA")||t.includes("CDC"),console.log("aaaa nmbVehicule",this.nmbVehicule),console.log("bbbbb multiRisqueArray",this.multiRisqueArray),this.nmbVehicule.value!==this.multiRisqueArray.length&&"T"!=this.codeProduit?(P().fire(" le nombre de v\xe9hicules ajout\xe9s ne correspond pas au nombre de v\xe9hicules indiqu\xe9","error"),this.goBack()):this.myStepper.next()}onSousProduitSelected(t){this.selectedSousProduit=t,this.getTypePolice(this.selectedSousProduit);const o=this.sousProduits.find(n=>n.code==this.selectedSousProduit);this.IDSOUSPROD=o.idSousProduit,console.log(" tab par cate",this.formParamRisque),this.getAllParamRisque()}onTypePoliceSelecteted(t){this.selectedTypePolice=t,console.log("voila type police",this.selectedTypePolice),"TP05"==this.selectedTypePolice.code?(console.log("this.forminforssure avant ",this.formInfosAssure),this.formInfosAssure.get("chiffreA").enable(),this.formInfosAssure.get("chiffreA")?.setValidators(u.kI.required),this.formInfosAssure.get("chiffreA")?.updateValueAndValidity(),console.log("this.forminforssure apres ",this.formInfosAssure)):(this.formInfosAssure.get("chiffreA").disable(),this.formInfosAssure.get("chiffreA").clearValidators(),this.formInfosAssure.get("chiffreA").updateValueAndValidity()),console.log("this.forminfoassure",this.formInfosAssure),this.getdureeTransport(this.selectedTypePolice)}isReadonly(){return!(this.TOTALE>5e9&&this.isBOUser||"CTH"==this.selectedSousProduit&&this.isBOUser)}onInput(t,o){}deleteRisque(t){let o;this.multiRisqueArray=this.multiRisqueArray.filter(n=>n.risqueNum!=t),this.dataSourceRisque.data=this.multiRisqueArray,this.devisGroupe.map(n=>{n.groupeList=n.groupeList.filter(r=>(r.numRisque==t&&(o=n.description),r.numRisque!=t))}),this.groupArray=this.groupArray.filter(n=>n!=o),this.devisGroupe=this.devisGroupe.filter(n=>n.description!=o),this.dataSourceGroupePack.data=this.dataSourceGroupePack.data.filter(n=>n.group!=o),this.devis.groupes=this.devisGroupe}onFileSelected(t){this.selectedFile=t.target.files[0],this.uploadExcelFile()}uploadExcelFile(){if(this.selectedFile){const t=new FileReader;t.onload=o=>{if(null!=o.target){let n=o.target.result;const r=n?.split(",");2===r.length&&(n=r[1]),this.sendToAPI(n)}},t.readAsDataURL(this.selectedFile)}}sendToAPI(t){this.devisService.controleDevisMulti({file:t},this.codeProduit).subscribe({next:n=>{this.fileControle=n,this.fileControle.some(_=>_.description.some(p=>0!==p.length))&&(this.fileInput.nativeElement.value=null,this.fileSuccess=!1),this.fileControle.length==this.nmbVehicule.value?(this.devis.file=t,this.fileSuccess=!0):(this.fileSuccess=!1,this.fileInput.nativeElement.value=null,P().fire("Le nombre de lignes ne correspond pas au nombre de risque indiqu\xe9, nombre de ligne= "+this.fileControle.length+", nombre indiqu\xe9= "+this.nmbVehicule.value+". veuillez resaisir le fichier ou modifi\xe9 le nombre de risque","","error")),this.fileControle.length>20&&(sessionStorage.getItem("roles")?.includes("DA")||sessionStorage.getItem("roles")?.includes("CDC"))?(P().fire("Vous n\u2019avez pas le privil\xe8ge pour faire ce devis veuillez voir avec le BO","","error"),this.fileSuccess=!1,this.fileInput.nativeElement.value=null):(this.devis.file=t,this.fileSuccess=!0)},error:n=>{P().fire(n,"","error"),this.fileInput.nativeElement.value=null}})}formWay(t){switch(console.log("thisdevus",this.devis),t){case"form":this.risqueStep=1,this.withFile=!1,this.dataSourceRisque=new x.by([]),this.selectedFile=null,this.controleDevis=[],this.devis.groupes.groupeList=[];break;case"file":this.risqueStep=2,this.withFile=!1,this.selectedFile=null,this.dataSourceRisque=new x.by([]),this.controleDevis=[],this.devis.groupes.groupeList=[]}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(W.t),e.Y36(X.uw),e.Y36(e.sBO),e.Y36(N.gz),e.Y36(N.F0),e.Y36(ee.ux),e.Y36(te.Y),e.Y36(ie.$),e.Y36(oe.J),e.Y36(ae.w),e.Y36(ne.F),e.Y36(re.e),e.Y36(se.F),e.Y36(le.Y),e.Y36(me.D),e.Y36(ce.M),e.Y36(u.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-devis-commercial-line"]],viewQuery:function(t,o){if(1&t&&(e.Gf(he,5),e.Gf(xe,5),e.Gf(ve,5),e.Gf(Pe,5)),2&t){let n;e.iGM(n=e.CRH())&&(o.myStepper=n.first),e.iGM(n=e.CRH())&&(o.fileInput=n.first),e.iGM(n=e.CRH())&&(o.innerTables=n),e.iGM(n=e.CRH())&&(o.innerSort=n)}},decls:94,vars:39,consts:[[1,"container"],[1,"header-title"],["aria-label","directions_car",1,"mat-icon","notranslate","material-symbols-outlined","material-icons","mat-icon-no-color"],["stepper",""],[3,"stepControl","editable"],["matStepLabel",""],[3,"formGroup","ngSubmit"],["multi","",1,"example-headers-align"],[3,"expanded"],[1,"row",2,"flex-direction","column","flex-direction","column","padding","1rem 2rem"],["appearance","outline",1,"col-md-5"],["formControlName","typeClient",3,"selectionChange"],[4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],[1,"row"],["type","text","matInput","","placeholder","","formControlName","nom"],["appearance","outline","class","col-md-5",4,"ngIf"],["class","col-md-5","appearance","outline",4,"ngIf"],["type","text","matInput","","placeholder","","formControlName","email"],["formControlName","typeContact",3,"selectionChange"],["matPrefix",""],["type","text","matInput","","placeholder","","formControlName","tel"],["appearance","outline","class","col-md-5 ",4,"ngIf"],["formControlName","agence"],["type","number","matInput","","placeholder","","formControlName","chiffreA"],["type","submit",1,"btn","btn-action"],[3,"formGroup",4,"ngIf"],["class","btn btn-action","type","button",3,"click",4,"ngIf"],["class","btn btn-cancel","type","button",3,"click",4,"ngIf"],["class","",4,"ngIf"],[4,"ngIf"],[3,"editable",4,"ngIf"],["class","alert alert-danger",4,"ngIf"],["class","alert alert-success",4,"ngIf"],[1,"resume"],["class","resume-buttons",4,"ngIf"],["type","button",1,"btn","btn-cancel",3,"click"],["class","btn btn-action",3,"ngClass","disabled","click",4,"ngIf"],[3,"disabled","value"],[1,"invalid-feedback"],["type","text","matInput","","placeholder","","formControlName","prenom"],["matInput","","formControlName","dateNaissance",3,"matDatepicker"],["matSuffix","",3,"for"],["pickerDateNaissance",""],[3,"value"],["formControlName","duree"],["formControlName","idSousProduits",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["formControlName","idTypePolice","formControlName","typePolice",3,"selectionChange"],[3,"formGroup"],["formDirective","ngForm"],["hideToggle","",1,"risque-panel",3,"expanded"],["hideToggle","","class","panel-risque",3,"expanded",4,"ngIf"],["hideToggle","","class","panel-risque","style","margin-top: 20px;",3,"expanded",4,"ngIf"],["class","risque-panel","hideToggle","",3,"expanded",4,"ngIf"],[1,"",2,"margin-bottom","20px"],["class","btn btn-secondary",3,"click",4,"ngIf"],["mat-table","","class","gestion-table risque",3,"dataSource",4,"ngIf"],["hideToggle","",1,"panel-risque",3,"expanded"],[1,"categoryTitle"],[1,"row",2,"padding","1rem 2rem"],[3,"formControlName","selectionChange"],["matInput","","type","text",3,"formControlName","readonly","value"],["matInput","","type","number",3,"formControlName","readonly","value","ngModelChange"],["matInput","",3,"matDatepicker","formControlName"],["picker",""],[3,"formControlName"],["hideToggle","",1,"panel-risque",2,"margin-top","20px",3,"expanded"],[1,"multiRisque-nombre"],["matInput","","type","number",3,"formControl"],[1,"row","download"],["id","wrap",2,"justify-content","space-around","display","flex"],[1,"btn","btn-file",3,"click"],["matInput","","type","text",3,"formControlName"],["matInput","","type","number",3,"formControlName"],["class","row",4,"ngIf","ngIfElse"],["groupeT",""],["appearance","outline",1,"col-md-3"],["formControlName","groupe"],["value","new"],["matInput","","type","text","formControlName","newGroupe"],["matInput","","value","Transport","formControlName","groupe",3,"readonly"],[1,"btn","btn-secondary",3,"click"],["mat-table","",1,"gestion-table","risque",3,"dataSource"],["matColumnDef","risqueNum"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","groupe"],["matColumnDef","action"],["mat-header-row","","class","example-second-header-row",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","type","button","aria-label","menu risque list",3,"matMenuTriggerFor"],["xPosition","after"],["menu","matMenu"],["mat-menu-item","","type","button",3,"click"],["mat-header-row","",1,"example-second-header-row"],["mat-row",""],["id","wrap"],["type","file","name","fileInput",3,"change"],["fileInput",""],[1,"alert","alert-danger"],[1,"error-lines"],["type","button",1,"btn","btn-action",3,"click"],[1,""],[1,"row",2,"display","flex","align-items","center","justify-content","space-between","margin","2rem 1rem"],[3,"selectionChange"],["appearance","outline","class","col-md-3",4,"ngIf"],["class","col-md-4",4,"ngIf"],["class","btn btn-secondary ","style","display: flex; width:\n                    133px;",3,"click",4,"ngIf"],["mat-table","","multiTemplateDataRows","","class","mat-elevation-z8 pack-table",3,"dataSource",4,"ngIf"],["class","row card",4,"ngIf"],["style","display: flex;",3,"class","disabled","click",4,"ngIf"],["class","btn btn-cancel",3,"click",4,"ngIf"],[1,"col-md-4"],[3,"checked","formControl","change"],[1,"btn","btn-secondary",2,"display","flex","width","133px",3,"click"],[1,"material-symbols-outlined",2,"margin-right","9px","font-size","24px"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8","pack-table",3,"dataSource"],["matColumnDef","select"],["matColumnDef","garantie"],["matColumnDef","plafond"],["matColumnDef","taux"],["matColumnDef","franchise"],["matColumnDef","formule"],["matColumnDef","sousGarantie"],["mat-cell","","class","example-element-row",3,"example-expanded-row",4,"matCellDef"],["matColumnDef","expandedDetail"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],[3,"checked","formControl","click","change"],[4,"ngIf","ngIfElse"],["plafondNotEmpty",""],[3,"ngModelChange",4,"ngIf","ngIfElse"],["plafondInput",""],[3,"ngModelChange"],[3,"formControl","ngModelChange"],["plafondValue",""],["type","text","matInput","",3,"formControl","ngModelChange"],["plafondNull",""],["tauxNotEmpty",""],["tauxInput",""],["tauxValue",""],["type","text","matInput","",3,"formControl","readonly"],["franchiseNotEmpty",""],["franchiseInput",""],["franchiseValue",""],["type","text","matInput","",3,"formControl"],["formuleNotEmpty",""],["formuleInput",""],["formuleValue",""],["primeNull",""],["mat-cell","",1,"example-element-row"],["mat-icon-button","","type","button","class","expandButton","aria-label","",3,"click",4,"ngIf"],["mat-icon-button","","type","button","aria-label","",1,"expandButton",3,"click"],[1,"example-element-detail"],["mat-table","","multiTemplateDataRows","","class","mat-elevation-z8 pack-table innertable",3,"dataSource",4,"ngIf"],["mat-table","","multiTemplateDataRows","",1,"mat-elevation-z8","pack-table","innertable",3,"dataSource"],["matColumnDef","more"],[3,"formControl"],["type","number","matInput","",3,"max","formControl"],["mat-header-row",""],["mat-row","",1,"example-detail-row"],["class","col-md-12",4,"ngIf"],[1,"col-md-12"],["mat-table","",1,"mat-elevation-z8","adresse-table",3,"dataSource"],["matColumnDef","idList"],["matColumnDef","description"],["aria-label","Select page  of users",3,"pageSize","pageSizeOptions"],["mat-icon-button","","type","button","aria-label","menu list param",3,"matMenuTriggerFor"],[1,"row","card"],[1,"prime-card"],[2,"font-size","21px","color","#00008f","font-weight","600"],[2,"font-size","18px","font-weight","600","margin-right","12px"],[2,"float","right"],[2,"display","flex",3,"disabled","click"],[1,"material-symbols-outlined",2,"margin-left","9px","font-size","24px"],[1,"btn","btn-cancel",3,"click"],[3,"editable"],[1,"row",3,"formGroup","ngSubmit"],["formControlName","convention",3,"value","valueChange","selectionChange"],["formControlName","reduction"],[1,"alert","alert-success"],[1,"consult-devis",3,"routerLink"],[1,"primeTotale"],[1,"resume-buttons"],[1,"btn","btn-download",3,"click"],[1,"material-symbols-outlined"],[1,"btn","btn-action",3,"ngClass","disabled","click"],[1,"button__text"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h2",1)(2,"mat-icon",2),e._uU(3),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"mat-stepper",null,3)(7,"mat-step",4),e.YNc(8,be,1,0,"ng-template",5),e.TgZ(9,"form",6),e.NdJ("ngSubmit",function(){return o.submitInfosAssure()}),e.TgZ(10,"mat-accordion",7)(11,"mat-expansion-panel",8)(12,"mat-expansion-panel-header")(13,"mat-panel-title"),e._uU(14," Information de l'assur\xe9(e) "),e.qZA()(),e.TgZ(15,"div",9)(16,"mat-form-field",10)(17,"mat-label"),e._uU(18,"Type client"),e.qZA(),e.TgZ(19,"mat-select",11),e.NdJ("selectionChange",function(r){return o.changeTypeClient(r.value)}),e.YNc(20,qe,3,3,"ng-container",12),e.qZA(),e.YNc(21,Le,2,1,"mat-error",13),e.qZA(),e.TgZ(22,"div",14)(23,"mat-form-field",10)(24,"mat-label"),e._uU(25),e.qZA(),e._UZ(26,"input",15),e.YNc(27,Ae,2,1,"mat-error",13),e.qZA(),e.YNc(28,ke,5,1,"mat-form-field",16),e.qZA(),e.TgZ(29,"div",14),e.YNc(30,Se,8,3,"mat-form-field",17),e.TgZ(31,"mat-form-field",10)(32,"mat-label"),e._uU(33,"Email"),e.qZA(),e._UZ(34,"input",18),e.YNc(35,Qe,3,2,"mat-error",13),e.qZA()(),e.TgZ(36,"div",14)(37,"mat-form-field",10)(38,"mat-label"),e._uU(39,"Type contact"),e.qZA(),e.TgZ(40,"mat-select",19),e.NdJ("selectionChange",function(r){return o.changeTypeContact(r.value)}),e.YNc(41,Ye,3,2,"ng-container",12),e.qZA(),e.YNc(42,Ee,2,1,"mat-error",13),e.qZA(),e.TgZ(43,"mat-form-field",10)(44,"mat-label"),e._uU(45,"T\xe9l\xe9phone"),e.qZA(),e.TgZ(46,"span",20),e._uU(47,"+213 \xa0"),e.qZA(),e._UZ(48,"input",21),e.YNc(49,Ve,3,2,"mat-error",13),e.qZA()()()(),e.TgZ(50,"mat-expansion-panel",8)(51,"mat-expansion-panel-header")(52,"mat-panel-title"),e._uU(53," Contrat "),e.qZA()(),e.TgZ(54,"div",9),e.YNc(55,He,6,2,"mat-form-field",22),e.TgZ(56,"mat-form-field",10)(57,"mat-label"),e._uU(58,"Agence"),e.qZA(),e.TgZ(59,"mat-select",23),e.YNc(60,je,3,2,"ng-container",12),e.qZA(),e.YNc(61,Ke,2,1,"mat-error",13),e.qZA(),e.YNc(62,Xe,5,1,"mat-form-field",16),e.YNc(63,tt,5,1,"mat-form-field",16),e.YNc(64,ot,5,1,"mat-form-field",22),e.TgZ(65,"mat-form-field",10)(66,"mat-label"),e._uU(67,"Chiffre d\u2019affaire"),e.qZA(),e._UZ(68,"input",24),e.qZA(),e.YNc(69,st,6,2,"mat-form-field",22),e.qZA()()(),e.TgZ(70,"div")(71,"button",25),e._uU(72,"Suivant0 "),e.qZA()()()(),e.TgZ(73,"mat-step",4),e.YNc(74,lt,1,0,"ng-template",5),e.YNc(75,ki,16,10,"form",26),e.YNc(76,yi,2,0,"button",27),e.YNc(77,Ii,2,0,"button",28),e.YNc(78,Ri,3,0,"div",29),e.qZA(),e.YNc(79,Xa,22,12,"mat-step",30),e.YNc(80,rn,20,9,"mat-step",31),e.TgZ(81,"mat-step"),e.YNc(82,sn,1,0,"ng-template",5),e.YNc(83,ln,2,1,"div",32),e.YNc(84,cn,4,6,"div",33),e.TgZ(85,"table",34),e.YNc(86,un,2,1,"tr",12),e.YNc(87,pn,9,7,"tr",12),e.YNc(88,fn,2,1,"tr",12),e.qZA(),e.YNc(89,gn,9,0,"div",35),e.TgZ(90,"div")(91,"button",36),e.NdJ("click",function(){return o.goBackReduc()}),e._uU(92,"Retour"),e.qZA(),e.YNc(93,hn,3,4,"button",37),e.qZA()()()()),2&t&&(e.xp6(3),e.Oqu(o.produitInfo.icon),e.xp6(1),e.hij(" ",o.produitInfo.description," "),e.xp6(3),e.Q6J("stepControl",o.formInfosAssure)("editable",!0),e.xp6(2),e.Q6J("formGroup",o.formInfosAssure),e.xp6(2),e.Q6J("expanded",!0),e.xp6(9),e.Q6J("ngForOf",o.typeClients),e.xp6(1),e.Q6J("ngIf",o.formInfosAssure.controls.typeClient.errors),e.xp6(4),e.Oqu(o.labelNom),e.xp6(2),e.Q6J("ngIf",o.formInfosAssure.controls.nom.errors),e.xp6(1),e.Q6J("ngIf","personne morale"!=o.typeClient),e.xp6(2),e.Q6J("ngIf","personne morale"!=o.typeClient),e.xp6(5),e.Q6J("ngIf",o.formInfosAssure.controls.email.errors),e.xp6(6),e.Q6J("ngForOf",o.typesContact),e.xp6(1),e.Q6J("ngIf",o.formInfosAssure.controls.typeContact.errors),e.xp6(7),e.Q6J("ngIf",o.formInfosAssure.controls.tel.errors),e.xp6(1),e.Q6J("expanded",!0),e.xp6(5),e.Q6J("ngIf","T"!=o.codeProduit),e.xp6(5),e.Q6J("ngForOf",o.agences),e.xp6(1),e.Q6J("ngIf",o.formInfosAssure.controls.agence.errors),e.xp6(1),e.Q6J("ngIf","97"==o.codeProduit),e.xp6(1),e.Q6J("ngIf","T"==o.codeProduit),e.xp6(1),e.Q6J("ngIf","T"==o.codeProduit),e.xp6(5),e.Q6J("ngIf","T"==o.codeProduit),e.xp6(4),e.Q6J("stepControl",o.formParamRisque)("editable",!0),e.xp6(2),e.Q6J("ngIf",o.risqueArrayReady&&o.multiRisque),e.xp6(1),e.Q6J("ngIf",2==o.risqueStep),e.xp6(1),e.Q6J("ngIf",2==o.risqueStep),e.xp6(1),e.Q6J("ngIf",o.multiRisque&&1==o.risqueStep&&(0!=o.dataSourceRisque.data.length||"45L"==o.codeProduit)),e.xp6(1),e.Q6J("ngIf",2!=o.risqueStep),e.xp6(1),e.Q6J("ngIf","97"!=o.codeProduit),e.xp6(3),e.Q6J("ngIf",o.errorHandler.error),e.xp6(1),e.Q6J("ngIf",o.successDevis),e.xp6(2),e.Q6J("ngForOf",o.returnedTarif.primeList),e.xp6(1),e.Q6J("ngForOf",o.returnedTarif.taxeList),e.xp6(1),e.Q6J("ngForOf",o.returnedTarif.primeList),e.xp6(1),e.Q6J("ngIf",o.successDevis&&!o.saveDevis),e.xp6(4),e.Q6J("ngIf",o.saveDevis))},dependencies:[A.mk,A.sg,A.O5,_e.Hw,k.pp,k.ib,k.yz,k.yK,R.VK,R.OP,R.p6,u._Y,u.Fj,u.wV,u.JJ,u.JL,u.Fd,u.oH,u.sg,u.u,D.TO,D.KE,D.hX,D.qo,D.R9,ue.Nt,x.BZ,x.fO,x.as,x.w1,x.Dz,x.nj,x.ge,x.ev,x.XQ,x.Gk,pe.NW,M.Mq,M.hl,M.nW,de.gD,I.ey,fe.lW,S.C0,S.VY,S.Vq,ge.oG,N.rH,A.JJ,Ce.X],styles:['.container[_ngcontent-%COMP%]{background-color:#fff;padding:40px 0;height:100%;overflow-x:hidden;box-shadow:0 .5rem 1rem #00000026}h2.header-title[_ngcontent-%COMP%]{padding:0 24px;font-size:21px!important;color:#00008f;font-weight:600!important;letter-spacing:1px;display:flex;justify-content:flex-end}h2.header-title[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:1rem}  .mat-form-field-appearance-outline .mat-form-field-prefix{top:auto!important}.mat-expansion-panel-header[_ngcontent-%COMP%]{background:rgba(199,199,199,.2)!important;font-weight:600;font-size:16px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{height:48px}  .mat-step-header .mat-step-icon-state-edit{background-color:#d14624}.mat-expansion-panel-header-title[_ngcontent-%COMP%]{color:#00008f}  .mat-step-text-label{font-size:16px}  .mat-step-label-selected .mat-step-text-label{font-size:16px;font-weight:700;color:#00008f}.btn.btn-action[_ngcontent-%COMP%], .btn.btn-secondary[_ngcontent-%COMP%]{margin-top:2rem;float:right}.btn.btn-cancel[_ngcontent-%COMP%]{margin-top:2rem;float:left}.btn.btn-download[_ngcontent-%COMP%]{box-shadow:0 1px 2px #00000026;transition:box-shadow .3s ease-in-out}.btn.btn-download[_ngcontent-%COMP%]:hover{box-shadow:0 5px 15px #0000004d}table[_ngcontent-%COMP%]{width:100%}.innertable[_ngcontent-%COMP%]{background-color:#f7f7f9}.expandButton[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:26px!important}.cdk-column-expandedDetail[_ngcontent-%COMP%]{border-bottom-width:0px}.mat-header-row[_ngcontent-%COMP%]{background-color:#f7f7f9}.mat-header-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#00008f}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:16px}.mat-header-cell[_ngcontent-%COMP%]{color:#333;font-weight:600;letter-spacing:.5px;font-size:15px;width:165px}.mat-menu-item[_ngcontent-%COMP%]{font-size:16px}.mat-menu-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:21px;height:-moz-fit-content;height:fit-content}.mat-menu-item[_ngcontent-%COMP%]:hover:not([disabled]){color:#00008f}.mat-menu-item[_ngcontent-%COMP%]:hover:not([disabled])   .mat-icon[_ngcontent-%COMP%]{color:#00008f}.mat-icon[_ngcontent-%COMP%]{height:100%;font-size:36px;width:-moz-fit-content;width:fit-content}.mat-cell[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#00008f}.mat-header-cell.mat-icon[_ngcontent-%COMP%]{color:#fff}.mat-cell[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]:hover, .mat-header-cell[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]:hover{color:#d14723;cursor:pointer}  .mat-checkbox-checked.mat-accent.mat-checkbox-disabled .mat-checkbox-background, .mat-checkbox-indeterminate.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#ccc}  .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-image:none}.mat-input-element[_ngcontent-%COMP%]:disabled{color:inherit}.mat-cell[_ngcontent-%COMP%]{padding-top:10px}.pack-table[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{font-size:16px}.resume-table[_ngcontent-%COMP%]{margin-top:2rem}.resume-table[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{font-size:16px;border-right:1px solid rgba(0,0,0,.12);padding-left:30px}.resume-table[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{background-color:#00008f;color:#fff;border-right:1px solid white;padding-left:30px}.mat-cell[_ngcontent-%COMP%]:not(.mat-column-garantie){font-weight:600}.row.card[_ngcontent-%COMP%]{justify-content:end;width:100%}.prime-card[_ngcontent-%COMP%]{background:rgb(247,247,249);width:-moz-fit-content;width:fit-content;margin-top:3rem;border:1px solid rgba(0,0,0,.12);padding:18px 14px}table.resume[_ngcontent-%COMP%]{width:60%;border-collapse:collapse;border-spacing:0 19px;margin-top:4rem}table.resume[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:17px;padding:12px 19px;border:1px solid rgba(0,0,0,.12)}table.resume[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background:rgb(247,247,249)}.resume-buttons[_ngcontent-%COMP%]{margin-top:4rem;display:flex;justify-content:space-between}.resume-buttons[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:9px;font-size:24px}.risque-panel.mat-expansion-panel[_ngcontent-%COMP%]{box-shadow:none}.risque-panel[_ngcontent-%COMP%]     .mat-expansion-panel-content{padding:1rem}.panel-risque[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{margin-right:1rem}.categoryTitle[_ngcontent-%COMP%]{text-transform:capitalize}  .mat-progress-bar-fill:after{background-color:#d14624}mat-form-field.ng-invalid.ng-touched[_ngcontent-%COMP%]{animation:example;animation-duration:.3s;margin-bottom:2rem}.button__text[_ngcontent-%COMP%]{transition:all .2s}.button--loading[_ngcontent-%COMP%]   .button__text[_ngcontent-%COMP%]{visibility:hidden;opacity:0}.button--loading[_ngcontent-%COMP%]{position:relative}.button--loading[_ngcontent-%COMP%]:after{content:"";position:absolute;width:16px;height:16px;inset:0;margin:auto;border:4px solid transparent;border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_button-loading-spinner 1s ease infinite}.button--loading[_ngcontent-%COMP%]:hover{background-color:#00008f}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex}tr.example-detail-row[_ngcontent-%COMP%]{height:0}.mat-column-expandedDetail[_ngcontent-%COMP%]{padding:0}@keyframes _ngcontent-%COMP%_button-loading-spinner{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.primeTotale[_ngcontent-%COMP%]{color:#00008f;font-weight:600}.consult-devis[_ngcontent-%COMP%]{font-weight:600;color:#155724}.btn-action[_ngcontent-%COMP%]:disabled:hover{background-color:#00008f;color:#fff}.mat-column-expandedDetail[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}table[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:26px}table[_ngcontent-%COMP%]   .mat-column-plafond[_ngcontent-%COMP%]{padding-left:1rem}.gestion-table.risque[_ngcontent-%COMP%]{margin-top:2rem!important}.group-risque[_ngcontent-%COMP%]{align-items:center;margin-top:3rem}.group-risque[_ngcontent-%COMP%]   .array-buttons[_ngcontent-%COMP%]{margin-left:auto;width:-moz-fit-content;width:fit-content}.group-risque[_ngcontent-%COMP%]   .array-buttons[_ngcontent-%COMP%]   .btn-round[_ngcontent-%COMP%]{margin-right:1em}.group-risque[_ngcontent-%COMP%]   mat-form-field.ng-invalid.ng-touched[_ngcontent-%COMP%]{margin-bottom:0rem}.multiRisque-nombre[_ngcontent-%COMP%]{margin-top:3rem}.row.download[_ngcontent-%COMP%]{text-align:center;margin-top:3rem;font-size:17px;font-weight:600}.row.download[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:50%;margin:auto;line-height:2rem}#wrap[_ngcontent-%COMP%]{margin:20px auto;text-align:center}.btn-slide[_ngcontent-%COMP%]{position:relative;display:inline-block;height:50px;width:263px;line-height:50px;padding:0;border-radius:50px;background:#fdfdfd;border:2px solid #00008f;margin:10px;transition:.5s}.btn-slide[_ngcontent-%COMP%]:hover{background-color:#00008f}.btn-slide[_ngcontent-%COMP%]:hover   span.circle[_ngcontent-%COMP%]{left:100%;margin-left:-45px;background-color:#fdfdfd;color:#00008f}.btn-slide[_ngcontent-%COMP%]:hover   span.title[_ngcontent-%COMP%]{left:40px;opacity:0}.btn-slide[_ngcontent-%COMP%]:hover   span.title-hover[_ngcontent-%COMP%]{opacity:1;left:40px}.btn-slide[_ngcontent-%COMP%]   span.circle[_ngcontent-%COMP%]{display:block;background-color:#00008f;color:#fff;position:absolute;float:left;margin:5px;line-height:42px;height:40px;width:40px;top:-2px;left:0;transition:.5s;border-radius:50%}.btn-slide[_ngcontent-%COMP%]   span.title[_ngcontent-%COMP%], .btn-slide[_ngcontent-%COMP%]   span.title-hover[_ngcontent-%COMP%]{position:absolute;left:90px;text-align:center;margin:0 auto;font-size:16px;font-weight:700;color:#00008f;transition:.5s}.btn-slide[_ngcontent-%COMP%]   span.title-hover[_ngcontent-%COMP%]{left:80px;opacity:0}.btn-slide[_ngcontent-%COMP%]   span.title-hover[_ngcontent-%COMP%]{color:#fff}.btn-slide[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:25px}.error-lines[_ngcontent-%COMP%]{text-align:left}.error-lines[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-decoration:underline}input[type=file][_ngcontent-%COMP%]::file-selector-button{padding:0 16px;height:40px;cursor:pointer;background-color:#fff;color:#00008f;font-weight:700!important;border:1px solid #00008f;margin-right:16px;transition:background-color .2s;border-radius:50px}.btn-file[_ngcontent-%COMP%]{padding:0 16px;height:40px;cursor:pointer;background-color:#fff;color:#00008f;font-weight:700!important;border:1px solid #00008f;margin-right:16px;transition:background-color .2s;border-radius:50px}input[type=file][_ngcontent-%COMP%]::file-selector-button:hover{background-color:#f3f4f6}input[type=file][_ngcontent-%COMP%]::file-selector-button:active{background-color:#e5e7eb}'],data:{animation:[(0,T.X$)("detailExpand",[(0,T.SB)("collapsed",(0,T.oB)({height:"0px",minHeight:"0",display:"none"})),(0,T.SB)("expanded",(0,T.oB)({height:"*"})),(0,T.eR)("expanded <=> collapsed",(0,T.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),i})(),canActivate:[O.k],data:{roles:["COURTIER","ADMIN","ROLE_SUPER_ADMIN","ANALYSTE","METIER","BACKOFFICE","DA","BO","CDC"]}},{path:"consultation/commercialLine/:codeProduit/:nomProduit",component:(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-gestion-devis-commercial-line"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"gestion-devis-commercial-line works!"),e.qZA())}}),i})(),canActivate:[O.k],data:{roles:["COURTIER","ADMIN","ROLE_SUPER_ADMIN","ANALYSTE","METIER","BACKOFFICE","DA","BO","CDC","CONSULTATION"]}}];let qn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[N.Bz.forChild(bn),N.Bz]}),i})();var Tn=f(4466),Ln=f(4092),Zn=f(294);const w={parse:{dateInput:"DD/MM/YYYY"},display:{dateInput:"DD/MM/YYYY",monthYearLabel:"MMMM YYYY",dateA11yLabel:"LL",monthYearA11yLabel:"MMMM YYYY"}};let An=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:I._A,useClass:G.t},{provide:I.sG,useValue:w},V.b],imports:[A.ez,Tn.m,Ln.q,Zn.I,qn]}),i})()}}]);